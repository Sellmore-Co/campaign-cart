{
  "version": 3,
  "sources": ["../src/components/checkout/ReceiptPage.js", "../src/index.js", "../src/api/ApiClient.js", "../src/utils/Logger.js", "../src/components/checkout/AddressHandler.js", "../src/components/checkout/FormValidator.js", "../src/managers/SpreedlyManager.js", "../src/utils/KonamiCodeHandler.js", "../src/components/checkout/PaymentHandler.js", "../src/components/checkout/BillingAddressHandler.js", "../src/components/checkout/PaymentSelector.js", "../src/components/checkout/AddressAutocomplete.js", "../src/components/checkout/PhoneInputHandler.js", "../src/components/checkout/ProspectCartHandler.js", "../src/managers/CheckoutManager.js", "../src/helpers/CampaignHelper.js", "../src/managers/StateManager.js", "../src/managers/CartManager.js", "../src/utils/DebugUtils.js", "../src/managers/SelectorManager.js", "../src/managers/ToggleManager.js", "../src/managers/DebugManager.js", "../src/managers/TimerManager.js", "../src/managers/DisplayManager.js", "../src/managers/CartDisplayManager.js", "../src/managers/AttributionManager.js", "../src/managers/EventManager.js", "../node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs", "../node_modules/@floating-ui/core/dist/floating-ui.core.mjs", "../node_modules/@floating-ui/utils/dist/floating-ui.utils.dom.mjs", "../node_modules/@floating-ui/dom/dist/floating-ui.dom.esm.js", "../src/managers/TooltipManager.js", "../src/managers/UpsellManager.js", "../src/utils/PBAccordion.js", "../src/utils/UtmTransfer.js", "../src/core/TwentyNineNext.js"],
  "sourcesContent": ["/**\n * ReceiptPage - Handles the receipt page functionality\n * \n * This class is responsible for:\n * - Fetching order details using the ref_id from URL parameters\n * - Updating the DOM elements with order information\n * - Handling any receipt-specific interactions\n */\n\nexport class ReceiptPage {\n  #apiClient;\n  #logger;\n  #app;\n  #orderData = null;\n  #orderFetched = false; // Flag to prevent duplicate API calls\n  #initialized = false; // Flag to prevent duplicate initialization\n  #debugMode = false;\n  \n  /**\n   * Initialize the ReceiptPage\n   * @param {Object} apiClient - The API client instance\n   * @param {Object} logger - The logger instance\n   * @param {Object} app - The main application instance\n   */\n  constructor(apiClient, logger, app) {\n    this.#apiClient = apiClient;\n    this.#logger = logger;\n    this.#app = app;\n    \n    // Check for debug mode\n    const debugMeta = document.querySelector('meta[name=\"os-debug\"]');\n    this.#debugMode = debugMeta?.getAttribute('content') === 'true';\n    \n    this.#safeLog('info', 'ReceiptPage component created');\n    \n    // Initialize immediately\n    this.init();\n  }\n  \n  // Safe logging method to handle potential missing logger methods\n  #safeLog(level, message, ...args) {\n    try {\n      if (this.#logger && typeof this.#logger[level] === 'function') {\n        this.#logger[level](message, ...args);\n      } else if (console[level]) {\n        console[level](message, ...args);\n      } else {\n        console.log(`[${level.toUpperCase()}] ${message}`, ...args);\n      }\n    } catch (error) {\n      console.error('Error logging message:', error);\n    }\n  }\n  \n  /**\n   * Initialize the receipt page\n   */\n  async init() {\n    // Prevent duplicate initialization\n    if (this.#initialized) {\n      this.#safeLog('info', 'Receipt page already initialized, skipping');\n      return;\n    }\n    \n    this.#safeLog('info', 'Initializing Receipt Page');\n    this.#initialized = true;\n    \n    // Get ref_id from URL parameters\n    const urlParams = new URLSearchParams(window.location.search);\n    const refId = urlParams.get('ref_id');\n    \n    if (!refId) {\n      this.#safeLog('error', 'No ref_id found in URL parameters');\n      this.#showError('Order reference not found. Please check your URL.');\n      return;\n    }\n    \n    this.#safeLog('info', `Found ref_id in URL: ${refId}`);\n    \n    try {\n      // Fetch order details\n      await this.#fetchOrderDetails(refId);\n      \n      // Update the DOM with order details\n      this.#updateReceiptContent();\n    } catch (error) {\n      this.#safeLog('error', 'Error initializing receipt page:', error);\n      this.#showError('Failed to load order details. Please try again later.');\n    }\n  }\n  \n  /**\n   * Fetch order details from the API\n   * @param {string} refId - The order reference ID\n   */\n  async #fetchOrderDetails(refId) {\n    this.#safeLog('info', `Fetching order details for ref_id: ${refId}`);\n    \n    // Check if we've already fetched this order to prevent duplicate requests\n    if (this.#orderFetched && this.#orderData) {\n      this.#safeLog('info', 'Order already fetched, using cached data');\n      return this.#orderData;\n    }\n    \n    try {\n      // Check if API client is available\n      if (!this.#apiClient) {\n        throw new Error('API client not available');\n      }\n      \n      // Fetch order details\n      this.#safeLog('debug', 'Making API request to fetch order details');\n      this.#orderData = await this.#apiClient.getOrder(refId);\n      this.#orderFetched = true; // Set flag to prevent duplicate requests\n      \n      this.#safeLog('info', 'Order details fetched successfully');\n      this.#safeLog('debug', 'Order data:', this.#orderData);\n      \n      return this.#orderData;\n    } catch (error) {\n      this.#safeLog('error', `Error fetching order details for ref_id ${refId}:`, error);\n      throw error;\n    }\n  }\n  \n  /**\n   * Update the receipt content with order details\n   */\n  #updateReceiptContent() {\n    if (!this.#orderData) {\n      this.#safeLog('error', 'No order data available to update receipt content');\n      return;\n    }\n    \n    this.#safeLog('info', 'Updating receipt content with order details');\n    \n    // Update customer name\n    this.#updateElement('fname', this.#orderData.user?.first_name || '');\n    \n    // Update billing information\n    if (this.#orderData.billing_address) {\n      this.#updateElement('billing_fname', `${this.#orderData.billing_address.first_name} ${this.#orderData.billing_address.last_name}`);\n      this.#updateElement('billing_address', this.#formatAddress(this.#orderData.billing_address));\n      this.#updateElement('billing_location', this.#formatLocation(this.#orderData.billing_address));\n      this.#updateElement('billing_country', this.#getCountryName(this.#orderData.billing_address.country) || '');\n    }\n    \n    // Update shipping information\n    if (this.#orderData.shipping_address) {\n      this.#updateElement('shipping_fname', `${this.#orderData.shipping_address.first_name} ${this.#orderData.shipping_address.last_name}`);\n      this.#updateElement('shipping_address', this.#formatAddress(this.#orderData.shipping_address));\n      this.#updateElement('shipping_location', this.#formatLocation(this.#orderData.shipping_address));\n      this.#updateElement('shipping_country', this.#getCountryName(this.#orderData.shipping_address.country) || '');\n    }\n    \n    // Update payment method - determine from order data\n    const paymentMethod = this.#determinePaymentMethod();\n    this.#updateElement('payment_method', paymentMethod);\n    \n    // Update order lines\n    this.#updateOrderLines();\n    \n    // Update shipping method - use both attribute names for compatibility\n    const shippingMethod = this.#orderData.shipping_method || 'Standard Shipping';\n    this.#updateElement('shipping-method', shippingMethod); // Hyphen version\n    this.#updateElement('shipping_method', shippingMethod); // Underscore version\n    \n    // Update total\n    const total = this.#formatCurrency(parseFloat(this.#orderData.total_incl_tax) || 0);\n    this.#updateElement('total', total);\n    \n    // Update order number\n    this.#updateElement('order_number', this.#orderData.number || '');\n    \n    // Update order reference\n    this.#updateElement('order_reference', this.#orderData.ref_id || '');\n    \n    this.#safeLog('info', 'Receipt content updated successfully');\n  }\n  \n  /**\n   * Determine payment method from order data\n   * @returns {string} The formatted payment method\n   */\n  #determinePaymentMethod() {\n    // Check if payment_detail exists in the order data\n    if (this.#orderData.payment_detail && this.#orderData.payment_detail.payment_method) {\n      return this.#formatPaymentMethod(this.#orderData.payment_detail.payment_method);\n    }\n    \n    // If no payment_detail, try to determine from other fields\n    if (this.#orderData.payment_method) {\n      return this.#formatPaymentMethod(this.#orderData.payment_method);\n    }\n    \n    // Default to Credit Card if we can't determine\n    return 'Credit Card';\n  }\n  \n  /**\n   * Update order lines in the receipt\n   */\n  #updateOrderLines() {\n    if (!this.#orderData.lines || !Array.isArray(this.#orderData.lines)) {\n      this.#safeLog('warn', 'No order lines available');\n      return;\n    }\n    \n    const orderLinesContainer = document.querySelector('[data-os-receipt=\"order-lines\"]');\n    if (!orderLinesContainer) {\n      this.#safeLog('warn', 'Order lines container not found in DOM');\n      return;\n    }\n    \n    // Clear existing content\n    orderLinesContainer.innerHTML = '';\n    \n    // Template for a product line\n    const lineTemplate = document.querySelector('[data-os-receipt=\"product-line\"]');\n    \n    // If no template is found, create a simple one\n    let template = lineTemplate ? lineTemplate.outerHTML : `\n      <div data-os-receipt=\"product-line\" class=\"cart-summary__line\">\n        <div class=\"cart-summary__line-item\">\n          <div data-os-receipt=\"line-title\" class=\"cart-line__title\"></div>\n          <div data-os-receipt=\"line-saving\" class=\"cart-line__discount\"></div>\n        </div>\n        <div class=\"cart-summary__line-item\">\n          <p data-os-receipt=\"line-compare\" class=\"pb-cart__line-price pb--compare\"></p>\n          <p data-os-receipt=\"line-subtotal\" class=\"pb-cart__line-price\"></p>\n        </div>\n      </div>\n    `;\n    \n    // Add each order line\n    this.#orderData.lines.forEach(line => {\n      // Create a new line element\n      const lineElement = document.createElement('div');\n      lineElement.innerHTML = template;\n      const newLine = lineElement.firstElementChild;\n      \n      // Update line details\n      const productTitle = line.product_title || line.title || line.package_title || 'Product';\n      this.#updateElementInNode(newLine, 'line-title', productTitle);\n      \n      // Calculate savings if compare price is available\n      if (line.price_excl_tax_excl_discounts && \n          parseFloat(line.price_excl_tax_excl_discounts) > parseFloat(line.price_excl_tax)) {\n        const originalPrice = parseFloat(line.price_excl_tax_excl_discounts);\n        const currentPrice = parseFloat(line.price_excl_tax);\n        const savingsPercent = Math.round((1 - currentPrice / originalPrice) * 100);\n        \n        this.#updateElementInNode(newLine, 'line-saving', `(${savingsPercent}% OFF)`);\n        this.#updateElementInNode(newLine, 'line-compare', this.#formatCurrency(originalPrice));\n      } else {\n        // Hide savings elements if no compare price\n        const savingElement = newLine.querySelector('[data-os-receipt=\"line-saving\"]');\n        const compareElement = newLine.querySelector('[data-os-receipt=\"line-compare\"]');\n        if (savingElement) savingElement.style.display = 'none';\n        if (compareElement) compareElement.style.display = 'none';\n      }\n      \n      // Update subtotal - ensure we're using a number\n      const price = parseFloat(line.price_incl_tax) || parseFloat(line.price_excl_tax) || 0;\n      this.#updateElementInNode(newLine, 'line-subtotal', this.#formatCurrency(price));\n      \n      // Add the line to the container\n      orderLinesContainer.appendChild(newLine);\n    });\n  }\n  \n  /**\n   * Update an element with the given value\n   * @param {string} attribute - The data-os-receipt attribute value\n   * @param {string} value - The value to set\n   */\n  #updateElement(attribute, value) {\n    const elements = document.querySelectorAll(`[data-os-receipt=\"${attribute}\"]`);\n    \n    if (elements.length === 0) {\n      this.#safeLog('debug', `No elements found with data-os-receipt=\"${attribute}\"`);\n      return;\n    }\n    \n    elements.forEach(element => {\n      element.textContent = value;\n    });\n  }\n  \n  /**\n   * Update an element within a specific node\n   * @param {HTMLElement} node - The parent node\n   * @param {string} attribute - The data-os-receipt attribute value\n   * @param {string} value - The value to set\n   */\n  #updateElementInNode(node, attribute, value) {\n    const element = node.querySelector(`[data-os-receipt=\"${attribute}\"]`);\n    \n    if (!element) {\n      this.#safeLog('debug', `No element found with data-os-receipt=\"${attribute}\" in node`);\n      return;\n    }\n    \n    element.textContent = value;\n  }\n  \n  /**\n   * Format an address for display\n   * @param {Object} address - The address object\n   * @returns {string} The formatted address\n   */\n  #formatAddress(address) {\n    let formattedAddress = '';\n    \n    if (address.line1) {\n      formattedAddress += address.line1;\n    }\n    \n    if (address.line2) {\n      formattedAddress += formattedAddress ? `, ${address.line2}` : address.line2;\n    }\n    \n    return formattedAddress;\n  }\n  \n  /**\n   * Format location (city, state, zip) for display\n   * @param {Object} address - The address object\n   * @returns {string} The formatted location\n   */\n  #formatLocation(address) {\n    let parts = [];\n    \n    if (address.line4) {\n      parts.push(address.line4); // City is in line4\n    }\n    \n    if (address.state) {\n      parts.push(address.state);\n    }\n    \n    if (address.postcode) {\n      parts.push(address.postcode);\n    }\n    \n    return parts.join(', ');\n  }\n  \n  /**\n   * Get country name from country code\n   * @param {string} countryCode - The country code\n   * @returns {string} The country name\n   */\n  #getCountryName(countryCode) {\n    const countryMap = {\n      'US': 'United States',\n      'CA': 'Canada',\n      'GB': 'United Kingdom',\n      'AU': 'Australia',\n      'NZ': 'New Zealand',\n      // Add more countries as needed\n    };\n    \n    return countryMap[countryCode] || countryCode;\n  }\n  \n  /**\n   * Format payment method for display\n   * @param {string} method - The payment method\n   * @returns {string} The formatted payment method\n   */\n  #formatPaymentMethod(method) {\n    const methodMap = {\n      'card_token': 'Credit Card',\n      'paypal': 'PayPal',\n      'apple_pay': 'Apple Pay',\n      'google_pay': 'Google Pay',\n      'credit': 'Credit Card',\n      'card': 'Credit Card'\n    };\n    \n    return methodMap[method] || method;\n  }\n  \n  /**\n   * Format currency for display\n   * @param {number} amount - The amount\n   * @returns {string} The formatted currency\n   */\n  #formatCurrency(amount) {\n    const currency = this.#orderData.currency || 'USD';\n    \n    // Ensure amount is a number\n    const numericAmount = parseFloat(amount);\n    \n    if (isNaN(numericAmount)) {\n      this.#safeLog('warn', `Invalid amount for currency formatting: ${amount}`);\n      return `$0.00 ${currency}`;\n    }\n    \n    try {\n      return new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: currency\n      }).format(numericAmount);\n    } catch (error) {\n      this.#safeLog('error', `Error formatting currency: ${error}`);\n      return `$${numericAmount.toFixed(2)} ${currency}`;\n    }\n  }\n  \n  /**\n   * Show an error message on the page\n   * @param {string} message - The error message\n   */\n  #showError(message) {\n    this.#safeLog('error', `Displaying error message: ${message}`);\n    \n    // Find a container to show the error\n    const container = document.querySelector('.receipt-content') || document.body;\n    \n    // Create error element\n    const errorElement = document.createElement('div');\n    errorElement.className = 'receipt-error';\n    errorElement.style.color = 'red';\n    errorElement.style.padding = '20px';\n    errorElement.style.margin = '20px 0';\n    errorElement.style.border = '1px solid red';\n    errorElement.style.borderRadius = '5px';\n    errorElement.style.backgroundColor = 'rgba(255, 0, 0, 0.1)';\n    errorElement.textContent = message;\n    \n    // Add to the beginning of the container\n    container.prepend(errorElement);\n  }\n} ", "/**\n * 29next Client - Checkout Focus\n * A streamlined JavaScript utility for connecting 29next campaigns with checkout functionality.\n * \n * This is the main entry point for the library. It handles auto-initialization\n * and exports the TwentyNineNext class for manual initialization.\n */\n\nimport { TwentyNineNext } from './core/TwentyNineNext.js';\n\n// Initialize the client\nconst initialize = () => {\n  try {\n    // Skip initialization if explicitly disabled\n    if (document.querySelector('meta[name=\"os-disable-auto-init\"]')) {\n      console.log('29next Client: Auto-initialization disabled');\n      return;\n    }\n\n    // Get configuration from meta tags\n    const config = {\n      apiKey: document.querySelector('meta[name=\"os-api-key\"]')?.getAttribute('content') ?? null,\n      campaignId: document.querySelector('meta[name=\"os-campaign-id\"]')?.getAttribute('content') ?? null,\n      debug: document.querySelector('meta[name=\"os-debug\"]')?.getAttribute('content') === 'true',\n      paypalClientId: document.querySelector('meta[name=\"os-paypal-client-id\"]')?.getAttribute('content') ?? null,\n    };\n    \n    // Log initialization attempt\n    console.log('29next Client: Initializing with config', \n      JSON.stringify({\n        apiKey: config.apiKey ? '✓ Set' : '✗ Not set',\n        campaignId: config.campaignId ? '✓ Set' : '✗ Not set',\n        debug: config.debug\n      })\n    );\n    \n    // Set up the on29NextReady array if it doesn't exist yet\n    window.on29NextReady = Array.isArray(window.on29NextReady) ? window.on29NextReady : [];\n    \n    // Store the original callbacks\n    const callbacks = [...window.on29NextReady];\n    \n    // Create the client instance\n    window.twentyNineNext = new TwentyNineNext(config);\n    \n    // Process existing callbacks\n    callbacks.forEach(callback => {\n      window.twentyNineNext.onReady(callback);\n    });\n    \n    // Replace the array with an object that uses onReady for future callbacks\n    window.on29NextReady = {\n      push: callback => window.twentyNineNext.onReady(callback)\n    };\n  } catch (error) {\n    console.error('29next Client: Error during initialization', error);\n  }\n};\n\n// Initialize now if the DOM is already loaded, otherwise wait for DOMContentLoaded\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initialize);\n} else {\n  initialize();\n}\n\nexport { TwentyNineNext };", "/**\n * ApiClient - Handles API requests to the 29next API\n * \n * This class is responsible for making API requests to the 29next API,\n * including fetching campaign data, creating carts, and processing orders.\n */\n\nexport class ApiClient {\n  #app;\n  #apiKey;\n  #baseUrl = 'https://campaigns.apps.29next.com/api/v1';\n  #logger;\n\n  constructor(app) {\n    this.#app = app;\n    this.#logger = app.logger.createModuleLogger('API');\n  }\n\n  init() {\n    this.#logger.info('Initializing ApiClient');\n    \n    this.#apiKey = this.#app.config.apiKey;\n    \n    if (this.#apiKey) {\n      this.#logger.info('API key is set');\n    } else {\n      const apiKeyMeta = document.querySelector('meta[name=\"os-api-key\"]');\n      this.#apiKey = apiKeyMeta?.getAttribute('content');\n      this.#logger.info(this.#apiKey ? 'API key retrieved from meta tag' : 'API key is not set');\n    }\n    \n    const proxyMeta = document.querySelector('meta[name=\"os-proxy-url\"]');\n    const proxyUrl = proxyMeta?.getAttribute('content');\n    if (proxyUrl) {\n      this.#baseUrl = proxyUrl;\n      this.#logger.info(`Using proxy URL: ${proxyUrl}`);\n    }\n  }\n\n  #buildUrl(endpoint) {\n    const cleanEndpoint = endpoint.startsWith('/') ? endpoint.slice(1) : endpoint;\n    return `${this.#baseUrl}/${cleanEndpoint}`;\n  }\n\n  async #request(endpoint, method = 'GET', data = null) {\n    if (!this.#apiKey) {\n      this.#logger.warn('API key is not set');\n      if (endpoint === 'campaigns/') {\n        this.#logger.info('Returning mock campaign data since API key is not set');\n        return [{\n          name: 'Mock Campaign',\n          id: 'mock-campaign',\n          currency: 'USD',\n          locale: 'en-US',\n          packages: [],\n          products: []\n        }];\n      }\n      throw new Error('API key is required');\n    }\n\n    const url = this.#buildUrl(endpoint);\n    const options = {\n      method,\n      mode: 'cors',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': this.#apiKey\n      }\n    };\n\n    if (method !== 'GET' && data) options.body = JSON.stringify(data);\n\n    this.#logger.debug(`Making ${method} request to ${url}`, method !== 'GET' ? { requestData: data } : {});\n\n    try {\n      const response = await fetch(url, options);\n      this.#logger.debug(`Received response from ${url} with status ${response.status}`);\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        this.#logger.error(`API error response from ${url}:`, errorData);\n        throw new Error(JSON.stringify(errorData));\n      }\n\n      const responseData = await response.json();\n      this.#logger.debug(`Successfully processed response from ${url}`);\n      return responseData;\n    } catch (error) {\n      this.#logger.error(`API request failed: ${endpoint}`, error);\n      if (error.message?.match(/NetworkError|Failed to fetch|Network request failed/)) {\n        this.#logger.warn('This appears to be a CORS issue. Make sure the API endpoint allows cross-origin requests.');\n      }\n      throw error;\n    }\n  }\n\n  async getCampaign() {\n    try {\n      const campaignsData = await this.#request('campaigns/');\n      this.#logger.debug('Campaign data received');\n\n      if (Array.isArray(campaignsData) && campaignsData.length > 0) return campaignsData[0];\n      if (campaignsData?.name) return campaignsData;\n\n      throw new Error('No valid campaign data found');\n    } catch (error) {\n      this.#logger.error('Error fetching campaign:', error);\n      this.#logger.warn('Using fallback empty campaign object');\n      return {\n        name: 'Default Campaign',\n        currency: 'USD',\n        packages: [],\n        formatPrice: price => `$${Number.parseFloat(price).toFixed(2)}`\n      };\n    }\n  }\n\n  /**\n   * Get attribution data from the app instance\n   * @returns {Object} Attribution data\n   */\n  #getAttributionData() {\n    // Try to get from AttributionManager first\n    if (this.#app.attribution) {\n      // Use getAttributionForApi() which formats data correctly for the API\n      if (typeof this.#app.attribution.getAttributionForApi === 'function') {\n        return this.#app.attribution.getAttributionForApi();\n      }\n      return this.#app.attribution.getAttributionData();\n    }\n    \n    // Fall back to state if AttributionManager is not available\n    if (this.#app.state) {\n      // Try to get the API-formatted attribution data first\n      const apiFormatted = this.#app.state.getState('attribution');\n      if (apiFormatted) {\n        return apiFormatted;\n      }\n      // Fall back to the complete attribution data if necessary\n      return this.#app.state.getState('cart.attribution') || {};\n    }\n    \n    return {};\n  }\n\n  /**\n   * Create a cart via the API\n   * @param {Object} cartData - The cart data\n   * @returns {Promise<Object>} The created cart\n   */\n  async createCart(cartData) {\n    this.#logger.debug('Creating cart', cartData);\n    \n    // Ensure attribution data is included\n    if (!cartData.attribution) {\n      cartData.attribution = this.#getAttributionData();\n      this.#logger.debug('Added attribution data to cart:', cartData.attribution);\n    } else {\n      this.#logger.debug('Cart already has attribution data:', cartData.attribution);\n    }\n    \n    try {\n      const response = await this.#request('carts/', 'POST', cartData);\n      this.#logger.info('Cart created successfully', response);\n      return response;\n    } catch (error) {\n      this.#logger.error('Error creating cart', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Create an order via the API\n   * @param {Object} orderData - The order data\n   * @returns {Promise<Object>} The created order\n   */\n  async createOrder(orderData) {\n    this.#logger.debug('Creating order', orderData);\n    \n    // Ensure attribution data is included\n    if (!orderData.attribution) {\n      orderData.attribution = this.#getAttributionData();\n      this.#logger.debug('Added attribution data to order:', orderData.attribution);\n    } else {\n      this.#logger.debug('Order already has attribution data:', orderData.attribution);\n    }\n    \n    // Check if this is a test order with test_card token\n    if (orderData.payment_token === 'test_card' || \n        (orderData.payment_detail && orderData.payment_detail.card_token === 'test_card')) {\n      \n      this.#logger.debug('Using test card token for order');\n      \n      // Ensure payment_detail is properly formatted for test card\n      orderData.payment_detail = orderData.payment_detail || {};\n      orderData.payment_detail.payment_method = 'card_token';\n      orderData.payment_detail.card_token = 'test_card';\n      \n      // If there was a payment_token at the root level, move it to payment_detail\n      if (orderData.payment_token) {\n        delete orderData.payment_token;\n      }\n    }\n    \n    try {\n      const response = await this.#request('orders/', 'POST', orderData);\n      this.#logger.info('Order created successfully', response);\n      \n      // Store order reference ID in sessionStorage\n      if (response.ref_id) {\n        sessionStorage.setItem('order_ref_id', response.ref_id);\n        this.#logger.debug(`Order reference ID stored: ${response.ref_id}`);\n      }\n      \n      return response;\n    } catch (error) {\n      this.#logger.error('Error creating order', error);\n      throw error;\n    }\n  }\n\n  async getOrder(orderRef) {\n    if (!orderRef) throw new Error('Order reference is required');\n    this.#logger.debug(`Fetching order with ref: ${orderRef}`);\n    return this.#request(`orders/${orderRef}/`);\n  }\n\n  /**\n   * Add an upsell to an existing order\n   * @param {string} orderRef - Order reference ID\n   * @param {Object} upsellData - The upsell data including package_id and quantity\n   * @returns {Promise<Object>} The updated order\n   */\n  async createOrderUpsell(orderRef, upsellData) {\n    if (!orderRef) throw new Error('Order reference is required');\n    this.#logger.debug(`Adding upsell to order ref: ${orderRef}`, upsellData);\n    \n    // Format the upsell data properly\n    const formattedData = {\n      lines: Array.isArray(upsellData.lines) ? upsellData.lines : [\n        {\n          package_id: upsellData.package_id,\n          quantity: upsellData.quantity || 1\n        }\n      ]\n    };\n    \n    // Add payment detail if provided\n    if (upsellData.payment_detail) {\n      formattedData.payment_detail = upsellData.payment_detail;\n    }\n    \n    try {\n      const response = await this.#request(`orders/${orderRef}/upsells/`, 'POST', formattedData);\n      this.#logger.info('Upsell added successfully', response);\n      return response;\n    } catch (error) {\n      this.#logger.error('Error adding upsell to order', error);\n      throw error;\n    }\n  }\n\n  async processPayment(orderData, paymentMethod) {\n    this.#logger.debug(`Processing ${paymentMethod} payment for order`);\n\n    const paymentMethodMap = {\n      'credit': 'card_token',\n      'paypal': 'paypal',\n      'apple_pay': 'apple_pay',\n      'google_pay': 'google_pay'\n    };\n\n    orderData.payment_detail = orderData.payment_detail ?? {};\n    orderData.payment_detail.payment_method = paymentMethodMap[paymentMethod] ?? paymentMethod;\n\n    if (paymentMethod === 'credit' && !orderData.payment_detail.card_token) {\n      throw new Error('Credit card payment requires a card token');\n    }\n    if (paymentMethod !== 'credit') delete orderData.payment_detail.card_token;\n\n    return this.createOrder(orderData);\n  }\n\n  getNextUrlFromOrderResponse(orderResponse, defaultPath = '/checkout/complete') {\n    this.#logger.debug('Getting next URL for redirect');\n\n    const refId = orderResponse.ref_id;\n    const nextPageMeta = document.querySelector('meta[name=\"os-next-page\"]');\n    let defaultUrl = defaultPath;\n\n    if (nextPageMeta?.getAttribute('content')) {\n      const nextPagePath = nextPageMeta.getAttribute('content');\n      this.#logger.debug(`Found meta tag with next page URL: ${nextPagePath}`);\n\n      const redirectUrl = nextPagePath.startsWith('http') ? \n        new URL(nextPagePath) : \n        new URL(nextPagePath, `${location.protocol}//${location.host}`);\n      \n      if (refId) redirectUrl.searchParams.append('ref_id', refId);\n      return redirectUrl.href;\n    }\n\n    if (orderResponse.payment_complete_url) return orderResponse.payment_complete_url;\n    if (orderResponse.order_status_url) return orderResponse.order_status_url;\n\n    const currentPath = location.pathname.split(\"/\");\n    const basePath = currentPath.slice(0, -1).join(\"/\");\n    const defaultFullUrl = new URL(`${basePath}${defaultUrl}`, `${location.protocol}//${location.host}`);\n    \n    if (refId) defaultFullUrl.searchParams.append('ref_id', refId);\n    return defaultFullUrl.href;\n  }\n}", "/**\n * Logger - Provides logging functionality for the 29next client\n */\n\n// Add global declaration for TypeScript compatibility\n// This would typically be in a separate .d.ts file in a TypeScript project\n// But including it as a comment for reference\n// declare global {\n//   interface Window {\n//     twentyNineNextStartupTime: number;\n//   }\n// }\n\nexport class Logger {\n  #debug;\n  #prefix = '29next';\n  #startupTime = 0;\n\n  constructor(debug = false) {\n    this.#debug = debug;\n    this.setStartupTime();\n  }\n\n  setDebug(debug) {\n    this.#debug = debug;\n  }\n\n  /**\n   * Sets the startup time to the current timestamp\n   */\n  setStartupTime() {\n    this.#startupTime = +new Date();\n    // Make startup time available globally\n    window.twentyNineNextStartupTime = this.#startupTime;\n  }\n\n  /**\n   * Gets the elapsed time since startup in milliseconds\n   */\n  getElapsedTime() {\n    return (+new Date()) - this.#startupTime;\n  }\n\n  createModuleLogger(moduleName) {\n    const modulePrefix = `${this.#prefix} [${moduleName}]`;\n    return {\n      debug: (...args) => this.#debugLog(modulePrefix, ...args),\n      info: (...args) => this.#info(modulePrefix, ...args),\n      warn: (...args) => this.#warn(modulePrefix, ...args),\n      error: (...args) => this.#error(modulePrefix, ...args),\n      // Add timing methods to module loggers\n      debugWithTime: (...args) => this.#debugLogWithTime(modulePrefix, ...args),\n      infoWithTime: (...args) => this.#infoWithTime(modulePrefix, ...args),\n      warnWithTime: (...args) => this.#warnWithTime(modulePrefix, ...args),\n      errorWithTime: (...args) => this.#errorWithTime(modulePrefix, ...args)\n    };\n  }\n\n  #info(prefix, message, ...args) {\n    console.info(`%c${prefix}%c ${message}`, 'color: #0066cc; font-weight: bold;', 'color: inherit;', ...args);\n  }\n\n  #warn(prefix, message, ...args) {\n    console.warn(`%c${prefix}%c ${message}`, 'color: #ff9900; font-weight: bold;', 'color: inherit;', ...args);\n  }\n\n  #error(prefix, message, ...args) {\n    console.error(`%c${prefix}%c ${message}`, 'color: #cc0000; font-weight: bold;', 'color: inherit;', ...args);\n  }\n\n  #debugLog(prefix, message, ...args) {\n    if (this.#debug) {\n      console.debug(`%c${prefix}:debug%c ${message}`, 'color: #666666; font-weight: bold;', 'color: inherit;', ...args);\n    }\n  }\n\n  // New methods with timing information\n  #infoWithTime(prefix, message, ...args) {\n    const diff = this.getElapsedTime();\n    console.info(`%c${prefix} +${diff}ms%c ${message}`, 'color: #0066cc; font-weight: bold;', 'color: inherit;', ...args);\n  }\n\n  #warnWithTime(prefix, message, ...args) {\n    const diff = this.getElapsedTime();\n    console.warn(`%c${prefix} +${diff}ms%c ${message}`, 'color: #ff9900; font-weight: bold;', 'color: inherit;', ...args);\n  }\n\n  #errorWithTime(prefix, message, ...args) {\n    const diff = this.getElapsedTime();\n    console.error(`%c${prefix} +${diff}ms%c ${message}`, 'color: #cc0000; font-weight: bold;', 'color: inherit;', ...args);\n  }\n\n  #debugLogWithTime(prefix, message, ...args) {\n    if (this.#debug) {\n      const diff = this.getElapsedTime();\n      console.debug(`%c${prefix}:debug +${diff}ms%c ${message}`, 'color: #666666; font-weight: bold;', 'color: inherit;', ...args);\n    }\n  }\n\n  // Standalone timing log methods\n  logWithTime(message, ...args) {\n    const diff = this.getElapsedTime();\n    console.log(`%c${this.#prefix} +${diff}ms%c ${message}`, 'color: #0066cc; font-weight: bold;', 'color: inherit;', ...args);\n  }\n\n  warnWithTime(message, ...args) {\n    const diff = this.getElapsedTime();\n    console.warn(`%c${this.#prefix} +${diff}ms%c ${message}`, 'color: #ff9900; font-weight: bold;', 'color: inherit;', ...args);\n  }\n\n  errorWithTime(message, ...args) {\n    const diff = this.getElapsedTime();\n    console.error(`%c${this.#prefix} +${diff}ms%c ${message}`, 'color: #cc0000; font-weight: bold;', 'color: inherit;', ...args);\n  }\n\n  debugWithTime(message, ...args) {\n    if (this.#debug) {\n      const diff = this.getElapsedTime();\n      console.debug(`%c${this.#prefix}:debug +${diff}ms%c ${message}`, 'color: #666666; font-weight: bold;', 'color: inherit;', ...args);\n    }\n  }\n}", "export class AddressHandler {\n  #form;\n  #logger;\n  #addressConfig;\n  #countries = [];\n  #states = {};\n  #elements;\n\n  constructor(form, logger) {\n    this.#form = form;\n    this.#logger = logger;\n    this.#addressConfig = this.#getAddressConfig();\n    this.#elements = {\n      shippingCountry: document.querySelector('[os-checkout-field=\"country\"]'),\n      shippingState: document.querySelector('[os-checkout-field=\"province\"]'),\n      billingCountry: document.querySelector('[os-checkout-field=\"billing-country\"]'),\n      billingState: document.querySelector('[os-checkout-field=\"billing-province\"]'),\n    };\n\n    this.#loadCachedData();\n    if (this.#elements.shippingCountry || this.#elements.billingCountry) {\n      this.#logger.info('AddressHandler initialized');\n      this.#init();\n    } else {\n      this.#logger.warn('No country selects found');\n    }\n  }\n\n  async #init() {\n    await this.#loadCountriesAndStates();\n    await Promise.all([\n      this.#elements.shippingCountry && this.#initCountrySelect(this.#elements.shippingCountry, this.#elements.shippingState),\n      this.#elements.billingCountry && this.#initCountrySelect(this.#elements.billingCountry, this.#elements.billingState),\n    ]);\n    this.#setupCountryChangeListeners();\n    this.#detectUserCountry();\n    this.#setupAutocompleteDetection();\n  }\n\n  #getAddressConfig() {\n    return {\n      defaultCountry: window.osConfig?.addressConfig?.defaultCountry ?? document.querySelector('meta[name=\"os-address-default-country\"]')?.content ?? 'US',\n      showCountries: window.osConfig?.addressConfig?.showCountries ?? document.querySelector('meta[name=\"os-address-show-countries\"]')?.content?.split(',').map(c => c.trim()) ?? [],\n      dontShowStates: window.osConfig?.addressConfig?.dontShowStates ?? document.querySelector('meta[name=\"os-address-dont-show-states\"]')?.content?.split(',').map(s => s.trim()) ?? [],\n      countries: window.osConfig?.addressConfig?.countries ?? [],\n    };\n  }\n\n  async #initCountrySelect(countrySelect, stateSelect) {\n    countrySelect.innerHTML = '<option value=\"\">Select Country</option>' + \n      this.#countries.map(c => `<option value=\"${c.iso2}\">${c.name}</option>`).join('');\n    countrySelect.value = this.#addressConfig.defaultCountry;\n    if (stateSelect && countrySelect.value) await this.#updateStateSelect(stateSelect, countrySelect.value);\n    this.#logger.debug(`Country select initialized with default ${this.#addressConfig.defaultCountry}`);\n  }\n\n  #setupCountryChangeListeners() {\n    const pairs = [\n      [this.#elements.shippingCountry, this.#elements.shippingState],\n      [this.#elements.billingCountry, this.#elements.billingState]\n    ];\n    pairs.forEach(([country, state]) => {\n      country?.addEventListener('change', () => state && this.#updateStateSelect(state, country.value));\n    });\n  }\n\n  async #updateStateSelect(stateSelect, countryCode, isPriority = false) {\n    if (!countryCode) return stateSelect.innerHTML = '<option value=\"\">Select State/Province</option>';\n    const states = this.#states[countryCode] || (await this.#loadStates(countryCode));\n    if (isPriority) await states;\n    this.#populateStateSelect(stateSelect, states);\n    this.#logger.debug(`State select updated for ${countryCode}`);\n  }\n\n  #populateStateSelect(stateSelect, states) {\n    const currentValue = stateSelect.value || stateSelect.getAttribute('data-pending-state') || '';\n    stateSelect.innerHTML = '<option value=\"\">Select State/Province</option>' + \n      states.map(s => `<option value=\"${s.iso2}\">${s.name}</option>`).join('');\n    stateSelect.parentElement.style.display = states.length ? '' : 'none';\n    if (currentValue && Array.from(stateSelect.options).some(o => o.value === currentValue)) stateSelect.value = currentValue;\n  }\n\n  #loadCachedData() {\n    const loadCache = key => {\n      const data = JSON.parse(localStorage.getItem(key) ?? '{}');\n      return (Date.now() - (data.timestamp ?? 0) < 24 * 60 * 60 * 1000) ? data : {};\n    };\n    this.#countries = loadCache('os_countries_cache').countries ?? [];\n    \n    // Filter cached countries if showCountries is specified\n    if (this.#countries.length && this.#addressConfig.showCountries.length) {\n      this.#countries = this.#countries.filter(c => \n        this.#addressConfig.showCountries.includes(c.iso2));\n      this.#logger.debug(`Filtered cached countries to: ${this.#addressConfig.showCountries.join(', ')}`);\n    }\n    \n    this.#states = loadCache('os_states_cache').states ?? {};\n    this.#logger.debug(`Loaded cached data: ${this.#countries.length} countries, ${Object.keys(this.#states).length} state sets`);\n  }\n\n  #saveCache(key, data) {\n    localStorage.setItem(key, JSON.stringify({ ...data, timestamp: Date.now() }));\n  }\n\n  async #loadCountriesAndStates() {\n    if (this.#countries.length) return;\n    this.#countries = this.#addressConfig.countries.length ? \n      this.#addressConfig.countries.map(c => ({ iso2: c.iso2 || c.code, name: c.name })) :\n      (await (await fetch('https://api.countrystatecity.in/v1/countries', { \n        headers: { 'X-CSCAPI-KEY': 'c2R3MzNhYmpvYUJPdmhkUlE5TUJWYUtJUGs2TTlNU3cyRmxmVW9wVQ==' } \n      })).json()).filter(c => !this.#addressConfig.showCountries.length || this.#addressConfig.showCountries.includes(c.iso2));\n    this.#countries.sort((a, b) => a.name.localeCompare(b.name));\n    this.#saveCache('os_countries_cache', { countries: this.#countries });\n    this.#logger.info(`Loaded ${this.#countries.length} countries`);\n  }\n\n  async #loadStates(countryCode) {\n    if (this.#states[countryCode]) return this.#states[countryCode];\n    try {\n      const states = (await (await fetch(`https://api.countrystatecity.in/v1/countries/${countryCode}/states`, { \n        headers: { 'X-CSCAPI-KEY': 'c2R3MzNhYmpvYUJPdmhkUlE5TUJWYUtJUGs2TTlNU3cyRmxmVW9wVQ==' } \n      })).json()).filter(s => !this.#addressConfig.dontShowStates.includes(s.iso2));\n      this.#states[countryCode] = states;\n      this.#saveCache('os_states_cache', { states: this.#states });\n      this.#logger.debug(`Loaded ${states.length} states for ${countryCode}`);\n      return states;\n    } catch (error) {\n      this.#logger.error(`Failed to load states for ${countryCode}:`, error);\n      this.#states[countryCode] = countryCode === 'US' ? /* US states list */ [] : [];\n      return this.#states[countryCode];\n    }\n  }\n\n  async #detectUserCountry() {\n    if (this.#elements.shippingCountry?.value || this.#elements.billingCountry?.value) return;\n    const countryCode = this.#addressConfig.defaultCountry || (await Promise.any(['https://ipapi.co/json/', 'https://ipinfo.io/json'].map(u => fetch(u).then(r => r.json()))))?.country_code;\n    [this.#elements.shippingCountry, this.#elements.billingCountry].forEach(c => {\n      if (c) {\n        c.value = countryCode;\n        c.dispatchEvent(new Event('change'));\n      }\n    });\n    this.#logger.debug(`User country detected/set to ${countryCode}`);\n  }\n\n  #setupAutocompleteDetection() {\n    const fields = Object.values(this.#elements).filter(Boolean);\n    const observer = new MutationObserver(mutations => {\n      mutations.forEach(m => {\n        if (m.attributeName === 'value' && m.target.value) {\n          const state = m.target === this.#elements.shippingCountry ? this.#elements.shippingState : this.#elements.billingState;\n          state && this.#updateStateSelect(state, m.target.value, true);\n          this.#logger.debug(`Autocomplete detected on ${m.target.getAttribute('os-checkout-field')}`);\n        }\n      });\n    });\n    fields.forEach(f => observer.observe(f, { attributes: true, attributeFilter: ['value'] }));\n    this.#preloadCommonStates();\n    this.#logger.debug('Autocomplete detection set up');\n  }\n\n  #preloadCommonStates() {\n    const countries = this.#addressConfig.showCountries.length ? this.#addressConfig.showCountries : ['US', 'CA', 'GB', 'AU'];\n    countries.forEach(c => !this.#states[c] && this.#loadStates(c));\n    this.#logger.debug(`Preloading states for ${countries.join(', ')}`);\n  }\n}", "/**\n * FormValidator - Handles form validation for checkout\n */\nexport class FormValidator {\n  #logger;\n  #form;\n  #validationErrors = {};\n  #debugMode = false;\n  #spreedlyEnabled = false;\n  #spreedlyFieldsValid = false;\n  #spreedlyReady = false;\n\n  constructor(options = {}) {\n    this.#debugMode = options.debugMode || false;\n    this.#logger = options.logger || console;\n    this.#form = this.#getFormElement();\n    this.#spreedlyEnabled = typeof Spreedly !== 'undefined';\n\n    if (!this.#form) return;\n\n    this.#setupListeners();\n  }\n\n  #getFormElement() {\n    const form = document.querySelector('form[os-checkout=\"form\"]') || document.querySelector('form#combo_form');\n    if (!form) this.#safeLog('warn', 'No checkout form found');\n    return form;\n  }\n\n  #safeLog(level, message, ...args) {\n    try {\n      const logFn = this.#logger?.[level] || console[level] || console.log;\n      logFn.call(console, `[${level.toUpperCase()}] ${message}`, ...args);\n    } catch (error) {\n      console.error('Error logging:', error);\n    }\n  }\n\n  #setupListeners() {\n    this.#form.addEventListener('submit', e => this.#handleSubmit(e));\n    document.querySelector('[os-checkout-payment=\"combo\"]')?.addEventListener('click', () => {\n      if (this.validateAllFields()) this.#form.submit();\n    });\n    document.addEventListener('payment-method-changed', () => this.clearAllErrors());\n\n    if (this.#spreedlyEnabled && typeof Spreedly.on === 'function') {\n      this.#setupSpreedlyListeners();\n    }\n\n    // Add ZIP code formatting\n    this.#setupZipCodeFormatting();\n  }\n\n  #setupSpreedlyListeners() {\n    const listeners = {\n      'ready': () => {\n        this.#spreedlyReady = true;\n        this.#safeLog('debug', 'Spreedly is ready');\n      },\n      'paymentMethod': (token, pmData) => {\n        this.#spreedlyFieldsValid = true;\n        this.#safeLog('debug', 'Spreedly payment method created');\n        this.#clearSpreedlyErrors();\n      },\n      'validation': (result) => {\n        this.#safeLog('debug', `Spreedly field validation: ${result.fieldType} ${result.valid ? 'valid' : 'invalid'}`);\n        const field = document.getElementById(`spreedly-${result.fieldType}`);\n        if (field) {\n          field.classList.toggle('spreedly-valid', result.valid);\n          field.classList.toggle('error', !result.valid);\n        }\n        if (result.valid) {\n          this.clearErrorForField(field);\n        } else {\n          const errorMessage = this.#getSpreedlyFieldErrorMessage(result.fieldType);\n          this.#handleSpreedlyError({ attribute: result.fieldType, message: errorMessage });\n        }\n      },\n      'errors': (errors) => {\n        this.#spreedlyFieldsValid = false;\n        this.#safeLog('debug', 'Spreedly validation errors:', errors);\n        errors.forEach(error => this.#handleSpreedlyError(error));\n      },\n      'fieldEvent': (name, event, activeElement, inputData) => {\n        // Real-time feedback like Spreedly's example\n        const field = document.getElementById(`spreedly-${name}`);\n        if (event === 'input' && field) {\n          const isValid = name === 'number' ? inputData.validNumber : inputData.validCvv;\n          field.classList.toggle('spreedly-valid', isValid);\n          field.classList.toggle('error', !isValid);\n          if (isValid) {\n            this.clearErrorForField(field);\n          } else {\n            const errorMessage = this.#getSpreedlyFieldErrorMessage(name);\n            this.#showError(field, errorMessage);\n          }\n        }\n      }\n    };\n  \n    Object.entries(listeners).forEach(([event, handler]) => Spreedly.on(event, handler));\n  }\n\n  #getSpreedlyFieldErrorMessage(fieldType) {\n    const errorMessages = {\n      'number': 'Please enter a valid credit card number',\n      'cvv': 'Please enter a valid security code (CVV)'\n    };\n    return errorMessages[fieldType] || `Invalid ${fieldType}`;\n  }\n\n  #handleSpreedlyError(error) {\n    const fieldMap = {\n      'number': 'spreedly-number',\n      'card_number': 'spreedly-number',\n      'cvv': 'spreedly-cvv',\n      'month': 'cc-month',\n      'year': 'cc-year',\n      'full_name': 'cc-name',\n      'first_name': 'cc-name',\n      'last_name': 'cc-name'\n    };\n    const container = document.getElementById(fieldMap[error.attribute]) || \n                     document.querySelector(`[os-checkout-field=\"${fieldMap[error.attribute]}\"]`);\n    if (container) this.#showError(container, error.message);\n  }\n\n  #handleSubmit(event) {\n    if (!this.validateAllFields()) {\n      event.preventDefault();\n      this.#safeLog('warn', 'Form validation failed');\n    }\n  }\n\n  validateAllFields(selectedPaymentMethod = this.getSelectedPaymentMethod()) {\n    this.#debugMode && this.#logValidationStart(selectedPaymentMethod);\n    \n    const isCreditCard = ['credit', 'credit-card'].includes(selectedPaymentMethod);\n    let isValid = true;\n    \n    // First validate required fields\n    const requiredFields = Array.from(document.querySelectorAll('[os-checkout-validate=\"required\"]'));\n    const firstErrorField = this.#validateFields(requiredFields, isCreditCard);\n    \n    // For credit card payments, validate credit card fields\n    let ccValid = true;\n    if (isCreditCard) {\n      ccValid = this.validateCreditCard();\n    }\n    \n    // Now validate any filled phone fields (even if not required)\n    const phoneError = this.#validatePhoneFields();\n    \n    // Handle validation results\n    if (firstErrorField) {\n      this.#scrollToError(firstErrorField);\n      isValid = false;\n    } else if (phoneError) {\n      isValid = false;\n    } else if (!ccValid) {\n      isValid = false;\n    }\n\n    return isValid;\n  }\n\n  #logValidationStart(method) {\n    this.#safeLog('debug', 'Starting field validation for payment method:', method);\n    this.#safeLog('debug', 'Same as shipping:', this.isSameAsShipping());\n    this.#safeLog('debug', 'Spreedly enabled:', this.#spreedlyEnabled);\n    this.#safeLog('debug', 'Spreedly ready:', this.#spreedlyReady);\n  }\n\n  #validateFields(fields, isCreditCard) {\n    let firstErrorField = null;\n    \n    for (const field of fields) {\n      const fieldName = field.getAttribute('os-checkout-field');\n      if (this.#shouldSkipField(fieldName, isCreditCard)) {\n        this.clearErrorForField(field);\n        continue;\n      }\n\n      const label = field.previousElementSibling?.textContent || fieldName || field.placeholder;\n      if (!this.#validateField(field, label)) {\n        firstErrorField = firstErrorField || field;\n      }\n    }\n    return firstErrorField;\n  }\n\n  #shouldSkipField(fieldName, isCreditCard) {\n    return (this.isSameAsShipping() && fieldName?.startsWith('billing-')) ||\n           (isCreditCard && ['cc-number', 'cvv'].includes(fieldName));\n  }\n\n  #validateCreditCardExpiryFields() {\n    const [monthField, yearField] = this.#getExpiryFields();\n    return this.#validateExpiryField(monthField, 'month') && \n           this.#validateExpiryField(yearField, 'year');\n  }\n\n  #getExpiryFields() {\n    const monthSelectors = ['[os-checkout-field=\"cc-month\"]', '[os-checkout-field=\"exp-month\"]', '#credit_card_exp_month'];\n    const yearSelectors = ['[os-checkout-field=\"cc-year\"]', '[os-checkout-field=\"exp-year\"]', '#credit_card_exp_year'];\n    return [\n      monthSelectors.map(s => document.querySelector(s)).find(Boolean),\n      yearSelectors.map(s => document.querySelector(s)).find(Boolean)\n    ];\n  }\n\n  #validateExpiryField(field, type) {\n    if (!field || !field.value) {\n      this.#safeLog('error', `${type} field is empty`);\n      this.#showError(field, `Please select an expiration ${type}`);\n      return false;\n    }\n    return true;\n  }\n\n  #clearSpreedlyErrors() {\n    ['cc-number', 'cvv'].forEach(name => \n      this.clearErrorForField(document.querySelector(`[os-checkout-field=\"${name}\"]`)));\n    ['spreedly-number', 'spreedly-cvv'].forEach(id => \n      this.clearErrorForField(document.getElementById(id)));\n  }\n\n  #validateField(field, label) {\n    if (!field) return true;\n\n    const value = field.value.trim();\n    const validation = this.#getFieldValidation(field, value, this.#getReadableFieldLabel(field, label));\n    \n    if (!validation.isValid) {\n      this.#showError(field, validation.errorMessage);\n    } else {\n      this.clearErrorForField(field);\n    }\n    return validation.isValid;\n  }\n\n  #getReadableFieldLabel(field, fallbackLabel) {\n    const fieldName = field.getAttribute('os-checkout-field') || field.name;\n    \n    // Map of field names to user-friendly labels\n    const labelMap = {\n      'fname': 'First Name',\n      'lname': 'Last Name',\n      'email': 'Email',\n      'phone': 'Phone Number',\n      'address1': 'Address',\n      'address2': 'Apartment or Suite',\n      'city': 'City',\n      'province': 'State/Province',\n      'postal': 'ZIP/Postal Code',\n      'country': 'Country',\n      'cc-number': 'Credit Card Number',\n      'cvv': 'Security Code',\n      'cc-month': 'Expiration Month',\n      'cc-year': 'Expiration Year',\n      'cc-name': 'Name on Card',\n      'exp-month': 'Expiration Month',\n      'exp-year': 'Expiration Year',\n      'billing-fname': 'Billing First Name',\n      'billing-lname': 'Billing Last Name',\n      'billing-address1': 'Billing Address',\n      'billing-address2': 'Billing Apartment or Suite',\n      'billing-city': 'Billing City',\n      'billing-province': 'Billing State/Province',\n      'billing-postal': 'Billing ZIP/Postal Code',\n      'billing-country': 'Billing Country',\n      'billing-phone': 'Billing Phone Number'\n    };\n    \n    // Return the mapped label if available, otherwise use the fallback label\n    return labelMap[fieldName] || fallbackLabel || fieldName;\n  }\n\n  #getFieldValidation(field, value, label) {\n    const tag = field.tagName.toLowerCase();\n    const fieldName = field.getAttribute('os-checkout-field') || field.name;\n\n    if (tag === 'select') return {\n      isValid: !!value,\n      errorMessage: `Please select a ${label}`\n    };\n    \n    // Special handling for phone field - allow empty but validate if has value\n    if (field.type === 'tel' && field.iti) {\n      // If empty, it's valid (phone is optional)\n      if (!value.trim()) {\n        return { isValid: true, errorMessage: '' };\n      }\n      \n      // If they entered something, validate it as a US number\n      const isValid = field.iti.isValidNumber();\n      \n      return {\n        isValid: isValid,\n        errorMessage: `Please enter a valid US phone number (e.g. 555-555-5555)`\n      };\n    }\n    \n    if (!value) return { isValid: false, errorMessage: `Please enter your ${label}` };\n    \n    if (fieldName && (fieldName.includes('city') || fieldName.endsWith('-city'))) {\n      return this.#validateCity(value, label);\n    }\n    \n    if (fieldName && (fieldName.includes('zip') || fieldName.includes('postal') || fieldName.endsWith('-zip'))) {\n      return this.#validateZipCode(value, fieldName);\n    }\n    \n    if (field.type === 'email') return {\n      isValid: this.#isValidEmail(value),\n      errorMessage: `Please enter a valid email address`\n    };\n    return { isValid: true, errorMessage: '' };\n  }\n\n  #validateCity(value, label) {\n    // City should be a minimum of 2 letters without special characters, numbers, etc. Maximum length is 24 characters\n    const cityRegex = /^[a-zA-Z\\s]{2,24}$/;\n    return {\n      isValid: cityRegex.test(value),\n      errorMessage: `Please enter a valid city name (2-24 letters, no numbers or special characters)`\n    };\n  }\n\n  /**\n   * Validate a US ZIP code (5 digits or ZIP+4 format)\n   * @param {string} value - ZIP code to validate\n   * @param {string} fieldName - Name of the field for error message\n   * @returns {Object} Validation result with isValid and errorMessage\n   */\n  #validateZipCode(value, fieldName = 'Zip') {\n    // US ZIP code pattern: 5 digits or 5 digits + hyphen + 4 digits\n    const zipPattern = /(^\\d{5}$)|(^\\d{5}-\\d{4}$)/;\n    const isValid = zipPattern.test(value);\n    \n    return {\n      isValid,\n      errorMessage: isValid ? '' : `Field must be a valid US Zip code.`\n    };\n  }\n\n  #showError(input, message) {\n    if (!input) return;\n    \n    input.classList.add('error');\n    const wrapper = input.closest('.frm-flds') || input.closest('.form-group') || input.parentElement;\n    const errorElement = this.#getOrCreateErrorElement(wrapper);\n    \n    errorElement.textContent = message;\n    Object.assign(errorElement.style, {\n      color: 'red',\n      fontSize: '0.875rem',\n      marginTop: '0.25rem'\n    });\n\n    if (!input.hasErrorListener) {\n      input.hasErrorListener = true;\n      ['input', 'change'].forEach(event => \n        input.addEventListener(event, () => this.clearErrorForField(input)));\n      if (input.type === 'tel' && input.iti) {\n        input.addEventListener('countrychange', () => this.clearErrorForField(input));\n      }\n    }\n  }\n\n  #getOrCreateErrorElement(wrapper) {\n    let errorElement = wrapper.querySelector('.pb-input-error');\n    if (!errorElement) {\n      errorElement = document.createElement('div');\n      errorElement.className = 'pb-input-error';\n      wrapper.appendChild(errorElement);\n    }\n    return errorElement;\n  }\n\n  clearErrorForField(field) {\n    if (!field) return;\n    \n    field.classList.remove('error');\n    const wrapper = field.closest('.frm-flds') || field.closest('.form-group') || field.parentElement;\n    wrapper?.querySelector('.pb-input-error')?.remove();\n\n    const fieldName = field.getAttribute('os-checkout-field');\n    if (['cc-number', 'cvv'].includes(fieldName)) {\n      const spreedlyId = `spreedly-${fieldName === 'cc-number' ? 'number' : 'cvv'}`;\n      const spreedlyContainer = document.getElementById(spreedlyId);\n      if (spreedlyContainer) {\n        spreedlyContainer.classList.remove('error');\n        spreedlyContainer.closest('.frm-flds')?.querySelector('.pb-input-error')?.remove();\n      }\n    }\n  }\n\n  clearAllErrors() {\n    this.#validationErrors = {};\n    document.querySelectorAll('.error').forEach(el => el.classList.remove('error'));\n    document.querySelectorAll('.pb-input-error').forEach(el => el.remove());\n    this.#clearSpreedlyErrors();\n  }\n\n  #scrollToError(element) {\n    if (!element) return;\n    \n    window.scrollTo({\n      top: element.getBoundingClientRect().top + window.pageYOffset - 100,\n      behavior: 'smooth'\n    });\n    setTimeout(() => element.focus(), 500);\n  }\n\n  #isValidEmail(email) {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n  }\n\n  isSameAsShipping() {\n    const checkbox = document.querySelector('[os-checkout-field=\"same-as-shipping\"] input[type=\"checkbox\"]') || \n                     document.querySelector('[os-input-field=\"use-shipping-address\"] input[type=\"checkbox\"]') || \n                     document.querySelector('#use_shipping_address');\n    return checkbox ? checkbox.checked : true;\n  }\n\n  getSelectedPaymentMethod() {\n    return document.querySelector('input[name=\"payment_method\"]:checked')?.value || \n           document.querySelector('input[name=\"combo_mode\"]:checked')?.value || \n           'credit';\n  }\n\n  getFormValues() {\n    const values = {};\n    this.#form.querySelectorAll('input, select, textarea').forEach(field => {\n      if (['button', 'submit'].includes(field.type) || field.disabled || !field.name) return;\n\n      const fieldName = field.getAttribute('os-checkout-field') || field.name;\n      if (field.type === 'checkbox') {\n        values[fieldName] = field.checked;\n      } else if (field.type === 'radio') {\n        if (field.checked) values[fieldName] = field.value;\n      } else if (fieldName.includes('.')) {\n        const [parent, child] = fieldName.split('.');\n        values[parent] = values[parent] || {};\n        values[parent][child] = field.value;\n      } else {\n        values[fieldName] = field.value;\n      }\n    });\n    return values;\n  }\n\n  validateCreditCard() {\n    let isValid = true;\n  \n    // Validate expiry fields\n    const [monthField, yearField] = this.#getExpiryFields();\n    if (!this.#validateExpiryField(monthField, 'month')) isValid = false;\n    if (!this.#validateExpiryField(yearField, 'year')) isValid = false;\n  \n    // If Spreedly is enabled, validate its fields\n    if (this.#spreedlyEnabled && typeof Spreedly.validate === 'function') {\n      // Check if the Spreedly fields already have valid class\n      const numberContainer = document.getElementById('spreedly-number');\n      const cvvContainer = document.getElementById('spreedly-cvv');\n  \n      let numberValid = numberContainer?.classList.contains('spreedly-valid');\n      let cvvValid = cvvContainer?.classList.contains('spreedly-valid');\n  \n      // Trigger Spreedly validation\n      Spreedly.validate();\n      \n      // Use the visual validation state of the fields\n      if (!numberValid && numberContainer) {\n        this.#showError(numberContainer, 'Please enter a valid credit card number');\n        isValid = false;\n      }\n      \n      if (!cvvValid && cvvContainer) {\n        this.#showError(cvvContainer, 'Please enter a valid security code (CVV)');\n        isValid = false;\n      }\n    } else {\n      // Fallback for non-Spreedly setups\n      const ccNumber = document.querySelector('[os-checkout-field=\"cc-number\"]');\n      const cvv = document.querySelector('[os-checkout-field=\"cvv\"]');\n      \n      if (!ccNumber?.value.trim()) {\n        this.#showError(ccNumber, 'Please enter a credit card number');\n        isValid = false;\n      }\n      if (!cvv?.value.trim()) {\n        this.#showError(cvv, 'Please enter a security code (CVV)');\n        isValid = false;\n      }\n    }\n  \n    return isValid;\n  }\n\n  #validatePhoneFields() {\n    // Find all phone input fields\n    const phoneFields = Array.from(document.querySelectorAll('input[type=\"tel\"]'));\n    let hasError = false;\n    \n    for (const field of phoneFields) {\n      // Skip if field is empty (phone is optional)\n      if (!field.value.trim() || !field.iti) continue;\n      \n      // Validate phone number if entered\n      const isValid = field.iti.isValidNumber();\n      \n      if (!isValid) {\n        // Get specific error code for better error messages\n        const errorCode = field.iti.getValidationError();\n        \n        // Map error codes to user-friendly messages\n        const errorMessages = {\n          0: 'Please enter a valid US phone number (e.g. 555-555-5555)',\n          1: 'Invalid country code',\n          2: 'Phone number is too short',\n          3: 'Phone number is too long',\n          4: 'Please enter a valid phone number',\n          5: 'Invalid phone number format'\n        };\n        \n        const message = errorMessages[errorCode] || 'Please enter a valid US phone number';\n        this.#showError(field, message);\n        \n        if (!hasError) {\n          this.#scrollToError(field);\n          hasError = true;\n        }\n      } else {\n        this.clearErrorForField(field);\n      }\n    }\n    \n    return hasError;\n  }\n\n  /**\n   * Set up auto-formatting for ZIP code fields\n   */\n  #setupZipCodeFormatting() {\n    // Find all ZIP/postal code fields\n    const zipFields = [\n      ...document.querySelectorAll('[os-checkout-field=\"postal\"]'),\n      ...document.querySelectorAll('[os-checkout-field=\"billing-postal\"]'),\n      ...document.querySelectorAll('[os-checkout-field=\"zip\"]')\n    ];\n    \n    zipFields.forEach(field => {\n      if (field) {\n        field.addEventListener('input', (e) => this.#formatZipCode(e));\n        this.#logger.debug(`ZIP code formatting setup for: ${field.getAttribute('os-checkout-field') || field.name || 'unknown'}`);\n      }\n    });\n  }\n  \n  /**\n   * Format ZIP code as user types: \n   * - Allow only numbers and hyphen\n   * - Automatically add hyphen after 5 digits if the user is entering more\n   * @param {Event} event - Input event\n   */\n  #formatZipCode(event) {\n    const input = event.target;\n    const cursorPos = input.selectionStart;\n    const oldValue = input.value;\n    \n    // Remove non-digits and non-hyphens\n    let cleaned = oldValue.replace(/[^\\d-]/g, '');\n    \n    // Only allow one hyphen after the 5th digit\n    if (cleaned.length > 5) {\n      const firstPart = cleaned.slice(0, 5);\n      \n      if (cleaned.charAt(5) !== '-') {\n        // Insert hyphen after 5 digits\n        const secondPart = cleaned.slice(5).replace(/-/g, '');\n        cleaned = `${firstPart}-${secondPart}`;\n      } else {\n        // Keep existing hyphen and remove any others\n        const secondPart = cleaned.slice(6).replace(/-/g, '');\n        cleaned = `${firstPart}-${secondPart}`;\n      }\n    }\n    \n    // Limit to ZIP+4 format (12345-6789)\n    if (cleaned.includes('-')) {\n      const [first, second] = cleaned.split('-');\n      cleaned = `${first.slice(0, 5)}-${second.slice(0, 4)}`;\n    } else {\n      cleaned = cleaned.slice(0, 5);\n    }\n    \n    // Only update if changed to avoid cursor jumping\n    if (cleaned !== oldValue) {\n      input.value = cleaned;\n      \n      // Adjust cursor position\n      const posAdjust = cleaned.length - oldValue.length;\n      input.setSelectionRange(cursorPos + posAdjust, cursorPos + posAdjust);\n    }\n  }\n}", "/**\n * SpreedlyManager - Manages Spreedly iframe integration for secure credit card processing\n * \n * This class handles:\n * - Loading the Spreedly script if not already loaded\n * - Setting up the iframe fields for card number and CVV\n * - Styling the iframe fields to match the site design\n * - Handling tokenization of credit card data\n * - Managing validation and error handling\n */\n\nexport class SpreedlyManager {\n  #environmentKey;\n  #debugMode = false;\n  #isReady = false;\n  #onReadyCallback = null;\n  #onErrorCallback = null;\n  #onPaymentMethodCallback = null;\n  #onValidationCallback = null;\n  #config = null;\n  #app = null;\n\n  /**\n   * Create a new SpreedlyManager\n   * @param {string} environmentKey - The Spreedly environment key\n   * @param {Object} options - Configuration options\n   * @param {boolean} options.debug - Enable debug mode\n   * @param {Object} options.app - The app instance for accessing global config\n   */\n  constructor(environmentKey, options = {}) {\n    this.#environmentKey = environmentKey;\n    this.#debugMode = options.debug || false;\n    this.#app = options.app || null;\n    \n    // Load Spreedly configuration\n    this.#loadConfig();\n    \n    if (!environmentKey) {\n      this.#log('error', 'No environment key provided to SpreedlyManager');\n      return;\n    }\n    \n    this.#log('debug', `SpreedlyManager initialized with environment key: ${environmentKey}`);\n    this.#initialize();\n  }\n\n  /**\n   * Load Spreedly configuration from global config\n   */\n  #loadConfig() {\n    // Default configuration\n    this.#config = {\n      fieldType: {\n        number: 'text',\n        cvv: 'text'\n      },\n      numberFormat: 'prettyFormat',\n      placeholder: {\n        number: 'Credit Card Number',\n        cvv: 'CVV *'\n      },\n      labels: {\n        number: 'Card Number',\n        cvv: 'CVV'\n      },\n      titles: {\n        number: 'Credit card number',\n        cvv: 'Card verification value'\n      },\n      styling: {\n        number: 'color: #212529; font-size: .925rem; font-weight: 400; width: 100%; height:100%; font-family: system-ui,-apple-system,\"Segoe UI\",Roboto,\"Helvetica Neue\",\"Noto Sans\",\"Liberation Sans\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";',\n        cvv: 'color: #212529; font-size: .925rem; font-weight: 400; width: 100%; height: 100%; font-family: system-ui,-apple-system,\"Segoe UI\",Roboto,\"Helvetica Neue\",\"Noto Sans\",\"Liberation Sans\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";'\n      },\n      placeholder_styling: '',\n      required: {\n        number: true,\n        cvv: true\n      },\n      autocomplete: true\n    };\n\n    // Merge with global configuration if it exists\n    if (window.osConfig && window.osConfig.spreedlyConfig) {\n      this.#log('debug', 'Found global Spreedly configuration', window.osConfig.spreedlyConfig);\n      \n      // Merge field types\n      if (window.osConfig.spreedlyConfig.fieldType) {\n        this.#config.fieldType = {\n          ...this.#config.fieldType,\n          ...window.osConfig.spreedlyConfig.fieldType\n        };\n      }\n      \n      // Merge number format\n      if (window.osConfig.spreedlyConfig.numberFormat) {\n        this.#config.numberFormat = window.osConfig.spreedlyConfig.numberFormat;\n      }\n      \n      // Merge placeholders\n      if (window.osConfig.spreedlyConfig.placeholder) {\n        this.#config.placeholder = {\n          ...this.#config.placeholder,\n          ...window.osConfig.spreedlyConfig.placeholder\n        };\n      }\n      \n      // Merge labels\n      if (window.osConfig.spreedlyConfig.labels) {\n        this.#config.labels = {\n          ...this.#config.labels,\n          ...window.osConfig.spreedlyConfig.labels\n        };\n      }\n      \n      // Merge titles\n      if (window.osConfig.spreedlyConfig.titles) {\n        this.#config.titles = {\n          ...this.#config.titles,\n          ...window.osConfig.spreedlyConfig.titles\n        };\n      }\n      \n      // Merge styling\n      if (window.osConfig.spreedlyConfig.styling) {\n        this.#config.styling = {\n          ...this.#config.styling,\n          ...window.osConfig.spreedlyConfig.styling\n        };\n      }\n      \n      // Merge placeholder styling\n      if (window.osConfig.spreedlyConfig.placeholder_styling) {\n        this.#config.placeholder_styling = window.osConfig.spreedlyConfig.placeholder_styling;\n      }\n      \n      // Merge required attributes\n      if (window.osConfig.spreedlyConfig.required) {\n        this.#config.required = {\n          ...this.#config.required,\n          ...window.osConfig.spreedlyConfig.required\n        };\n      }\n      \n      // Merge autocomplete setting\n      if (window.osConfig.spreedlyConfig.hasOwnProperty('autocomplete')) {\n        this.#config.autocomplete = window.osConfig.spreedlyConfig.autocomplete;\n      }\n    }\n    \n    this.#log('debug', 'Spreedly configuration initialized', this.#config);\n  }\n\n  /**\n   * Initialize Spreedly\n   * Load the script if needed and set up the iframe fields\n   */\n  #initialize() {\n    if (typeof Spreedly === 'undefined') {\n      this.#log('debug', 'Spreedly not loaded, loading script...');\n      this.#loadScript()\n        .then(() => {\n          this.#log('debug', 'Spreedly script loaded');\n          this.#setupSpreedly();\n        })\n        .catch(error => {\n          this.#log('error', 'Failed to load Spreedly script', error);\n          if (this.#onErrorCallback) {\n            this.#onErrorCallback(['Failed to load Spreedly. Please refresh the page and try again.']);\n          }\n        });\n    } else {\n      this.#log('debug', 'Spreedly already loaded');\n      this.#setupSpreedly();\n    }\n  }\n\n  /**\n   * Load the Spreedly script\n   * @returns {Promise} A promise that resolves when the script is loaded\n   */\n  #loadScript() {\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = 'https://core.spreedly.com/iframe/iframe-v1.min.js';\n      script.async = true;\n      script.onload = resolve;\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n  }\n\n  /**\n   * Set up Spreedly with the environment key and prepare the iframe fields\n   */\n  #setupSpreedly() {\n    try {\n      this.#log('debug', 'Setting up Spreedly...');\n      \n      // First, prepare the HTML structure for the iframe fields\n      this.#prepareHtmlStructure();\n      \n      // Initialize Spreedly with the environment key\n      Spreedly.init(this.#environmentKey, {\n        \"numberEl\": \"spreedly-number\",\n        \"cvvEl\": \"spreedly-cvv\"\n      });\n      \n      // Set up event listeners\n      Spreedly.on('ready', () => {\n        this.#log('debug', 'Spreedly iframe ready');\n        \n        // Apply configuration from the loaded config\n        this.#applySpreedlyConfig();\n        \n        // Mark as ready and call the ready callback if set\n        this.#isReady = true;\n        if (this.#onReadyCallback) {\n          this.#onReadyCallback();\n        }\n      });\n      \n      // Set up other event listeners\n      this.#setupEventListeners();\n      \n      this.#log('debug', 'Spreedly setup complete');\n    } catch (error) {\n      this.#log('error', 'Error setting up Spreedly', error);\n      if (this.#onErrorCallback) {\n        this.#onErrorCallback(['Failed to set up Spreedly. Please refresh the page and try again.']);\n      }\n    }\n  }\n\n  /**\n   * Apply configuration to Spreedly iframe fields\n   */\n  #applySpreedlyConfig() {\n    try {\n      this.#log('debug', 'Applying Spreedly configuration...');\n      \n      // Apply field types\n      Spreedly.setFieldType('number', this.#config.fieldType.number);\n      Spreedly.setFieldType('cvv', this.#config.fieldType.cvv);\n      \n      // Apply number format\n      Spreedly.setNumberFormat(this.#config.numberFormat);\n      \n      // Apply placeholders\n      Spreedly.setPlaceholder('number', this.#config.placeholder.number);\n      Spreedly.setPlaceholder('cvv', this.#config.placeholder.cvv);\n      \n      // Apply labels\n      Spreedly.setLabel('number', this.#config.labels.number);\n      Spreedly.setLabel('cvv', this.#config.labels.cvv);\n      \n      // Apply titles\n      Spreedly.setTitle('number', this.#config.titles.number);\n      Spreedly.setTitle('cvv', this.#config.titles.cvv);\n      \n      // Apply styling\n      Spreedly.setStyle('number', this.#config.styling.number);\n      Spreedly.setStyle('cvv', this.#config.styling.cvv);\n      \n      // Apply placeholder styling if specified\n      if (this.#config.placeholder_styling) {\n        Spreedly.setStyle('placeholder', this.#config.placeholder_styling);\n      }\n      \n      // Set required attributes if needed\n      if (this.#config.required.number) {\n        Spreedly.setRequiredAttribute('number');\n      }\n      if (this.#config.required.cvv) {\n        Spreedly.setRequiredAttribute('cvv');\n      }\n      \n      // Handle autocomplete\n      if (!this.#config.autocomplete) {\n        Spreedly.toggleAutoComplete();\n      }\n      \n      this.#log('debug', 'Spreedly configuration applied');\n    } catch (error) {\n      this.#log('error', 'Error applying Spreedly configuration', error);\n    }\n  }\n\n  /**\n   * Prepare the HTML structure for the iframe fields\n   * This uses the existing inputs rather than creating new ones\n   */\n  #prepareHtmlStructure() {\n    try {\n      this.#log('debug', 'Preparing HTML structure for Spreedly iframe fields');\n      \n      // Find the existing input containers\n      const numberField = document.querySelector('[os-checkout-field=\"cc-number\"]');\n      const cvvField = document.querySelector('[os-checkout-field=\"cvv\"]');\n      \n      if (!numberField || !cvvField) {\n        this.#log('error', 'Could not find credit card fields');\n        return;\n      }\n      \n      // Simply use the IDs of the existing fields\n      numberField.id = 'spreedly-number';\n      cvvField.id = 'spreedly-cvv';\n      \n      // Make sure the fields are set up for the iframe\n      numberField.setAttribute('data-spreedly', 'number');\n      cvvField.setAttribute('data-spreedly', 'cvv');\n      \n      this.#log('debug', 'HTML structure prepared for Spreedly iframe fields - using existing DOM elements');\n    } catch (error) {\n      this.#log('error', 'Error preparing HTML structure for Spreedly iframe fields', error);\n    }\n  }\n\n  /**\n   * Set up event listeners for Spreedly events\n   */\n  #setupEventListeners() {\n    // Listen for validation errors\n    Spreedly.on('errors', (errors) => {\n      this.#log('error', 'Spreedly validation errors:', errors);\n      \n      // Format error messages\n      const errorMessages = errors.map(error => error.message);\n      \n      // Call the error callback if set\n      if (this.#onErrorCallback) {\n        this.#onErrorCallback(errorMessages);\n      }\n      \n      // Show errors on the form\n      this.#showErrors(errors);\n    });\n    \n    // Listen for successful payment method creation\n    Spreedly.on('paymentMethod', (token, pmData) => {\n      this.#log('debug', 'Spreedly payment method created:', token);\n      \n      // Clear any existing errors\n      this.clearAllErrors();\n      \n      // Call the payment method callback if set\n      if (this.#onPaymentMethodCallback) {\n        this.#onPaymentMethodCallback(token, pmData);\n      }\n    });\n    \n    // Listen for field validation events\n    Spreedly.on('validation', (result) => {\n      this.#log('debug', 'Spreedly field validation:', result);\n      \n      // Clear any existing error for this field\n      this.#clearFieldError(result.fieldType);\n      \n      // Call the validation callback if set\n      if (this.#onValidationCallback) {\n        this.#onValidationCallback(result);\n      }\n    });\n  }\n\n  /**\n   * Show errors on the form\n   * @param {Array} errors - Array of error objects from Spreedly\n   */\n  #showErrors(errors) {\n    errors.forEach(error => {\n      const fieldType = error.attribute;\n      let field = null;\n      \n      // Map Spreedly field types to our fields\n      if (fieldType === 'number' || fieldType === 'card_number') {\n        field = document.getElementById('spreedly-number');\n      } else if (fieldType === 'cvv') {\n        field = document.getElementById('spreedly-cvv');\n      } else if (fieldType === 'month' || fieldType === 'year') {\n        // Find the month/year select elements\n        field = document.querySelector(`[os-checkout-field=\"cc-${fieldType}\"]`) || \n               document.querySelector(`[os-checkout-field=\"exp-${fieldType}\"]`) || \n               document.querySelector(`#credit_card_exp_${fieldType}`);\n      } else if (fieldType === 'full_name' || fieldType === 'first_name' || fieldType === 'last_name') {\n        field = document.querySelector('[os-checkout-field=\"cc-name\"]');\n      }\n      \n      if (field) {\n        // Add error class to the field\n        field.classList.add('error');\n        \n        // Find the parent wrapper\n        const wrapper = field.closest('.frm-flds') || field.parentElement;\n        \n        // Create or update error message\n        let errorElement = wrapper.querySelector('.pb-input-error');\n        if (!errorElement) {\n          errorElement = document.createElement('div');\n          errorElement.className = 'pb-input-error';\n          wrapper.appendChild(errorElement);\n        }\n        \n        // Set error message and style\n        errorElement.textContent = error.message;\n        errorElement.style.color = 'red';\n        errorElement.style.fontSize = '0.875rem';\n        errorElement.style.marginTop = '0.25rem';\n      }\n    });\n  }\n\n  /**\n   * Clear error for a specific field\n   * @param {string} fieldType - The field type (number, cvv, etc.)\n   */\n  #clearFieldError(fieldType) {\n    let field = null;\n    \n    // Map Spreedly field types to our fields\n    if (fieldType === 'number' || fieldType === 'card_number') {\n      field = document.getElementById('spreedly-number');\n    } else if (fieldType === 'cvv') {\n      field = document.getElementById('spreedly-cvv');\n    }\n    \n    if (field) {\n      // Remove error class from the field\n      field.classList.remove('error');\n      \n      // Find the parent wrapper\n      const wrapper = field.closest('.frm-flds') || field.parentElement;\n      \n      // Remove error message if it exists\n      const errorElement = wrapper.querySelector('.pb-input-error');\n      if (errorElement) {\n        errorElement.remove();\n      }\n    }\n  }\n\n  /**\n   * Clear all errors\n   */\n  clearAllErrors() {\n    // Clear errors for number field\n    this.#clearFieldError('number');\n    \n    // Clear errors for CVV field\n    this.#clearFieldError('cvv');\n    \n    // Clear errors for month/year fields\n    const monthField = document.querySelector('[os-checkout-field=\"cc-month\"]') || \n                      document.querySelector('[os-checkout-field=\"exp-month\"]') || \n                      document.querySelector('#credit_card_exp_month');\n    const yearField = document.querySelector('[os-checkout-field=\"cc-year\"]') || \n                     document.querySelector('[os-checkout-field=\"exp-year\"]') || \n                     document.querySelector('#credit_card_exp_year');\n    \n    if (monthField) {\n      monthField.classList.remove('error');\n      const monthWrapper = monthField.closest('.frm-flds') || monthField.parentElement;\n      const monthError = monthWrapper.querySelector('.pb-input-error');\n      if (monthError) monthError.remove();\n    }\n    \n    if (yearField) {\n      yearField.classList.remove('error');\n      const yearWrapper = yearField.closest('.frm-flds') || yearField.parentElement;\n      const yearError = yearWrapper.querySelector('.pb-input-error');\n      if (yearError) yearError.remove();\n    }\n  }\n\n  /**\n   * Tokenize a credit card\n   * @param {Object} cardData - The card data to tokenize\n   * @param {string} cardData.full_name - The cardholder name\n   * @param {string} cardData.month - The expiration month (2 digits)\n   * @param {string} cardData.year - The expiration year (4 digits)\n   */\n  tokenizeCard(cardData) {\n    this.#log('debug', 'Tokenizing card with data:', {\n      ...cardData,\n      full_name: cardData.full_name,\n      month: cardData.month,\n      year: cardData.year\n    });\n    \n    // Clear any existing errors\n    this.clearAllErrors();\n    \n    // Validate required fields\n    if (!cardData.full_name || !cardData.month || !cardData.year) {\n      this.#log('error', 'Missing required card data');\n      \n      const errors = [];\n      if (!cardData.full_name) errors.push({ attribute: 'full_name', message: 'Cardholder name is required' });\n      if (!cardData.month) errors.push({ attribute: 'month', message: 'Expiration month is required' });\n      if (!cardData.year) errors.push({ attribute: 'year', message: 'Expiration year is required' });\n      \n      this.#showErrors(errors);\n      \n      if (this.#onErrorCallback) {\n        this.#onErrorCallback(errors.map(e => e.message));\n      }\n      \n      return;\n    }\n    \n    // Check if Spreedly is ready\n    if (!this.#isReady) {\n      this.#log('error', 'Spreedly is not ready yet');\n      \n      if (this.#onErrorCallback) {\n        this.#onErrorCallback(['Payment system is not ready yet. Please try again in a moment.']);\n      }\n      \n      return;\n    }\n    \n    // Tokenize the card\n    try {\n      Spreedly.tokenizeCreditCard(cardData);\n      this.#log('debug', 'Card tokenization initiated');\n    } catch (error) {\n      this.#log('error', 'Error tokenizing card', error);\n      \n      if (this.#onErrorCallback) {\n        this.#onErrorCallback(['An error occurred while processing your card. Please try again.']);\n      }\n    }\n  }\n\n  /**\n   * Set a callback to be called when Spreedly is ready\n   * @param {Function} callback - The callback function\n   */\n  setOnReady(callback) {\n    this.#onReadyCallback = callback;\n    \n    // If already ready, call the callback immediately\n    if (this.#isReady && callback) {\n      callback();\n    }\n  }\n\n  /**\n   * Set a callback to be called when Spreedly encounters an error\n   * @param {Function} callback - The callback function\n   */\n  setOnError(callback) {\n    this.#onErrorCallback = callback;\n  }\n\n  /**\n   * Set a callback to be called when a payment method is created\n   * @param {Function} callback - The callback function\n   */\n  setOnPaymentMethod(callback) {\n    this.#onPaymentMethodCallback = callback;\n  }\n\n  /**\n   * Set a callback to be called when a field is validated\n   * @param {Function} callback - The callback function\n   */\n  setOnValidation(callback) {\n    this.#onValidationCallback = callback;\n  }\n\n  /**\n   * Log a message with the specified level\n   * @param {string} level - The log level (debug, info, warn, error)\n   * @param {string} message - The message to log\n   * @param {*} data - Additional data to log\n   */\n  #log(level, message, data) {\n    if (this.#debugMode || level === 'error') {\n      const prefix = '[SpreedlyManager]';\n      \n      if (data) {\n        console[level](`${prefix} ${message}`, data);\n      } else {\n        console[level](`${prefix} ${message}`);\n      }\n    }\n  }\n}  ", "/**\n * KonamiCodeHandler - Utility class for handling the Konami code Easter egg\n * \n * This class provides functionality for detecting the Konami code sequence\n * and triggering a test order with predefined data.\n */\n\nexport class KonamiCodeHandler {\n  #konamiCodeSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];\n  #konamiCodePosition = 0;\n  #indicatorTimeout;\n  #indicator;\n  #logger;\n  #callback;\n  \n  /**\n   * Create a new KonamiCodeHandler instance\n   * @param {Object} options - Configuration options\n   * @param {Function} options.callback - Function to call when Konami code is detected\n   * @param {Object} options.logger - Logger instance for logging\n   */\n  constructor({ callback, logger } = {}) {\n    this.#logger = logger;\n    this.#callback = callback;\n    this.#createIndicator();\n    this.#initListener();\n    \n    if (this.#logger) {\n      this.#logger.debug('KonamiCodeHandler initialized');\n    }\n  }\n  \n  /**\n   * Create the visual indicator element\n   * @private\n   */\n  #createIndicator() {\n    this.#indicator = document.createElement('div');\n    this.#indicator.style.position = 'fixed';\n    this.#indicator.style.bottom = '10px';\n    this.#indicator.style.right = '10px';\n    this.#indicator.style.background = 'rgba(0, 0, 0, 0.7)';\n    this.#indicator.style.color = '#fff';\n    this.#indicator.style.padding = '5px 10px';\n    this.#indicator.style.borderRadius = '5px';\n    this.#indicator.style.fontFamily = 'monospace';\n    this.#indicator.style.fontSize = '12px';\n    this.#indicator.style.zIndex = '9999';\n    this.#indicator.style.display = 'none';\n    this.#indicator.textContent = 'Konami: 0/' + this.#konamiCodeSequence.length;\n    document.body.appendChild(this.#indicator);\n  }\n  \n  /**\n   * Initialize the keydown event listener\n   * @private\n   */\n  #initListener() {\n    document.addEventListener('keydown', (e) => {\n      // Check if the pressed key matches the next key in the sequence\n      if (e.key === this.#konamiCodeSequence[this.#konamiCodePosition]) {\n        // Move to the next position in the sequence\n        this.#konamiCodePosition++;\n        \n        // Only show the indicator after the first 4 keystrokes (up, up, down, down)\n        if (this.#konamiCodePosition >= 4) {\n          this.#indicator.style.display = 'block';\n          this.#indicator.textContent = `Konami: ${this.#konamiCodePosition}/${this.#konamiCodeSequence.length}`;\n        }\n        \n        // If we've reached the end of the sequence, trigger the callback\n        if (this.#konamiCodePosition === this.#konamiCodeSequence.length) {\n          if (this.#callback) {\n            this.#callback();\n          }\n          \n          // Reset the position for next time\n          this.#konamiCodePosition = 0;\n          \n          // Hide the indicator\n          setTimeout(() => {\n            this.#indicator.style.display = 'none';\n          }, 500);\n        }\n        \n        // Hide the indicator after a delay if not completed\n        if (this.#konamiCodePosition >= 4) {\n          clearTimeout(this.#indicatorTimeout);\n          this.#indicatorTimeout = setTimeout(() => {\n            this.#indicator.style.display = 'none';\n          }, 3000);\n        }\n      } else {\n        // Reset the position if the wrong key is pressed\n        if (this.#konamiCodePosition > 0) {\n          this.#konamiCodePosition = 0;\n          \n          // Only hide the indicator if it's currently shown\n          if (this.#indicator.style.display === 'block') {\n            this.#indicator.textContent = `Konami: 0/${this.#konamiCodeSequence.length}`;\n            \n            // Hide the indicator after a delay\n            clearTimeout(this.#indicatorTimeout);\n            this.#indicatorTimeout = setTimeout(() => {\n              this.#indicator.style.display = 'none';\n            }, 1500);\n          }\n        }\n      }\n    });\n  }\n  \n  /**\n   * Set Konami code test mode in session storage\n   * This can be used by other components to detect when Konami code is active\n   */\n  static setTestMode() {\n    sessionStorage.setItem('konami_test_mode', 'true');\n    return true;\n  }\n  \n  /**\n   * Check if Konami code test mode is active\n   * @returns {boolean} True if Konami code test mode is active\n   */\n  static isTestMode() {\n    return sessionStorage.getItem('konami_test_mode') === 'true';\n  }\n  \n  /**\n   * Clear Konami code test mode from session storage\n   */\n  static clearTestMode() {\n    sessionStorage.removeItem('konami_test_mode');\n  }\n  \n  /**\n   * Get predefined test order data for Konami code test mode\n   * @param {Object} state - Application state\n   * @param {Function} getPackageIdFromUrl - Function to get package ID from URL\n   * @param {Function} getCartLines - Function to get cart lines\n   * @returns {Object} Test order data\n   */\n  static getTestOrderData(state, getPackageIdFromUrl, getCartLines) {\n    try {\n      // Get cart items from the app state\n      const cartItems = state?.cart?.items || [];\n      \n      // If cart is empty, create a dummy item\n      const packageId = getPackageIdFromUrl ? getPackageIdFromUrl() : 1;\n      const lines = cartItems.length > 0 && getCartLines ? \n        getCartLines(cartItems) : \n        [{ package_id: packageId || 1, quantity: 1 }];\n      \n      // Create a complete test order data object\n      return {\n        user: {\n          email: 'test@test.com',\n          first_name: 'Test',\n          last_name: 'Order'\n        },\n        shipping_address: {\n          first_name: 'Test',\n          last_name: 'Order',\n          line1: 'Test Address 123',\n          line2: '',\n          line3: '',\n          line4: 'Tempe',\n          state: 'AZ',\n          postcode: '85281',\n          country: 'US',\n          phone_number: '+14807581224'\n        },\n        billing_address: {\n          first_name: 'Test',\n          last_name: 'Order',\n          line1: 'Test Address 123',\n          line2: '',\n          line3: '',\n          line4: 'Tempe',\n          state: 'AZ',\n          postcode: '85281',\n          country: 'US',\n          phone_number: '+14807581224'\n        },\n        shipping_method: 1,\n        attribution: state?.cart?.attribution || {},\n        lines: lines,\n        // Don't include payment-related fields here as they'll be added by the payment handler\n        success_url: window.location.origin + '/checkout/confirmation/'\n      };\n    } catch (error) {\n      console.error('Error getting Konami test order data:', error);\n      return null;\n    }\n  }\n  \n  /**\n   * Show a message to the user when Konami code is activated\n   * @returns {HTMLElement} The message element\n   */\n  static showActivationMessage() {\n    const messageElement = document.createElement('div');\n    messageElement.style.position = 'fixed';\n    messageElement.style.top = '50%';\n    messageElement.style.left = '50%';\n    messageElement.style.transform = 'translate(-50%, -50%)';\n    messageElement.style.background = 'rgba(0, 0, 0, 0.8)';\n    messageElement.style.color = '#fff';\n    messageElement.style.padding = '20px';\n    messageElement.style.borderRadius = '10px';\n    messageElement.style.zIndex = '9999';\n    messageElement.style.textAlign = 'center';\n    messageElement.style.fontFamily = 'monospace';\n    messageElement.style.fontSize = '18px';\n    messageElement.innerHTML = `\n      <h3>🎮 KONAMI CODE ACTIVATED! 🎮</h3>\n      <p>Creating test order with predefined data:</p>\n      <p style=\"font-size: 14px; margin-top: 10px; text-align: left;\">\n        Email: test@test.com<br>\n        Name: Test Order<br>\n        Address: Test Address 123<br>\n        City: Tempe, AZ 85281<br>\n        Country: US<br>\n        Phone: +14807581224<br>\n        Card: 4111111111111111 (test mode)\n      </p>\n    `;\n    document.body.appendChild(messageElement);\n    return messageElement;\n  }\n} ", "/**\n * PaymentHandler - Handles payment processing for checkout\n */\nimport { SpreedlyManager } from '../../managers/SpreedlyManager.js';\nimport { FormValidator } from './FormValidator.js';\nimport { KonamiCodeHandler } from '../../utils/KonamiCodeHandler.js';\n\nexport class PaymentHandler {\n  #apiClient;\n  #logger;\n  #app;\n  #form;\n  #spreedlyManager = null;\n  #formValidator = null;\n  #paymentMethod = 'credit-card';\n  #isProcessing = false;\n  #debugMode = false;\n  #testCards = {\n    visa: '4111111111111111',\n    mastercard: '5555555555554444',\n    amex: '378282246310005',\n    discover: '6011111111111117'\n  };\n\n  constructor(apiClient, logger, app) {\n    this.#apiClient = apiClient;\n    this.#logger = logger;\n    this.#app = app;\n    this.#form = this.#getCheckoutForm();\n\n    if (!this.#form) return;\n\n    this.#setupFormPrevention();\n    this.#setupCheckoutButton();\n    \n    this.#formValidator = new FormValidator({ \n      debugMode: this.#debugMode,\n      logger: this.#logger\n    });\n    this.#form.__formValidator = this.#formValidator;\n\n    this.#initPaymentMethods();\n    this.#initSpreedly();\n  }\n\n  #getCheckoutForm() {\n    const form = document.querySelector('form[os-checkout=\"form\"]') || document.querySelector('form#combo_form');\n    if (!form) {\n      this.#safeLog('warn', 'No checkout form found');\n    }\n    return form;\n  }\n\n  #setupFormPrevention() {\n    this.#form.removeAttribute('action');\n    this.#form.setAttribute('method', 'post');\n    \n    const hiddenInput = document.createElement('input');\n    hiddenInput.type = 'hidden';\n    hiddenInput.name = 'prevent_serialization';\n    hiddenInput.value = 'true';\n    this.#form.appendChild(hiddenInput);\n\n    this.#form.addEventListener('submit', this.#preventFormSubmission.bind(this), true);\n    this.#form.onsubmit = this.#preventFormSubmission.bind(this);\n    this.#convertSubmitButtons();\n  }\n\n  #preventFormSubmission(e) {\n    if (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n    }\n    \n    this.#form.removeAttribute('action');\n    this.#form.setAttribute('method', 'post');\n    window.stop?.();\n    \n    this.#safeLog('debug', 'Form submission prevented');\n    return false;\n  }\n\n  #convertSubmitButtons() {\n    try {\n      const submitButtons = this.#form.querySelectorAll('button[type=\"submit\"], input[type=\"submit\"]');\n      submitButtons.forEach((button, index) => {\n        button.setAttribute('type', 'button');\n        button.addEventListener('click', (e) => {\n          e.preventDefault();\n          this.#safeLog('debug', `Submit button ${index + 1} clicked`);\n          this.processPayment();\n        });\n      });\n    } catch (error) {\n      this.#safeLog('error', 'Error converting submit buttons:', error);\n    }\n  }\n\n  #setupCheckoutButton() {\n    const checkoutButton = document.querySelector('[os-checkout-payment=\"combo\"]');\n    if (!checkoutButton) {\n      this.#safeLog('warn', 'Checkout button not found');\n      return;\n    }\n\n    const newButton = checkoutButton.cloneNode(true);\n    checkoutButton.parentNode.replaceChild(newButton, checkoutButton);\n    \n    newButton.addEventListener('click', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n      \n      this.#form.onsubmit = this.#preventFormSubmission.bind(this);\n      this.#form.removeAttribute('action');\n      this.#form.setAttribute('method', 'post');\n      \n      this.#safeLog('debug', 'Checkout button clicked');\n      setTimeout(() => this.processPayment(), 0);\n    });\n  }\n\n  #safeLog(level, message, ...args) {\n    try {\n      const logFn = this.#logger?.[level] || console[level] || console.log;\n      logFn.call(console, `[${level.toUpperCase()}] ${message}`, ...args);\n    } catch (error) {\n      console.error('Error logging:', error);\n    }\n  }\n\n  #initPaymentMethods() {\n    try {\n      const paymentMethodSelector = document.querySelector('[os-checkout-field=\"payment-method\"]') || \n                                   document.querySelector('input[name=\"combo_mode\"]:checked');\n      if (!paymentMethodSelector) {\n        this.#safeLog('warn', 'Payment method selector not found');\n        return;\n      }\n\n      this.#paymentMethod = paymentMethodSelector.value || 'credit-card';\n      this.#setupPaymentMethodListeners();\n    } catch (error) {\n      this.#safeLog('error', 'Error initializing payment methods:', error);\n    }\n  }\n\n  #setupPaymentMethodListeners() {\n    const radioButtons = document.querySelectorAll('input[name=\"combo_mode\"]');\n    const handler = (e) => {\n      this.#paymentMethod = e.target.value;\n      this.#safeLog('debug', `Payment method changed to: ${this.#paymentMethod}`);\n      document.dispatchEvent(new CustomEvent('payment-method-changed', {\n        detail: { mode: this.#paymentMethod }\n      }));\n    };\n\n    if (radioButtons.length > 0) {\n      radioButtons.forEach(radio => radio.addEventListener('change', handler));\n    } else {\n      document.querySelector('[os-checkout-field=\"payment-method\"]')\n        ?.addEventListener('change', handler);\n    }\n  }\n\n  #initSpreedly() {\n    try {\n      const environmentKey = document.querySelector('meta[name=\"spreedly-environment-key\"]')?.content ||\n                            document.querySelector('meta[name=\"os-payment-env-key\"]')?.content;\n      if (!environmentKey) {\n        this.#safeLog('warn', 'Spreedly environment key not found');\n        return;\n      }\n\n      this.#spreedlyManager = new SpreedlyManager(environmentKey, { \n        debug: this.#debugMode,\n        app: this.#app\n      });\n      this.#setupSpreedlyCallbacks();\n      this.#initializeExpirationFields();\n    } catch (error) {\n      this.#safeLog('error', 'Error initializing Spreedly:', error);\n    }\n  }\n\n  #setupSpreedlyCallbacks() {\n    this.#spreedlyManager.setOnReady(() => this.#safeLog('debug', 'Spreedly ready'));\n    this.#spreedlyManager.setOnError((errors) => {\n      this.#safeLog('error', 'Spreedly errors:', errors);\n      this.#isProcessing = false;\n      this.#hideProcessingState();\n      \n      // Map Spreedly validation errors to user-friendly messages\n      const errorMessage = this.#formatSpreedlyErrors(errors);\n      this.#handlePaymentError(errorMessage);\n    });\n    this.#spreedlyManager.setOnPaymentMethod((token, pmData) => {\n      this.#safeLog('debug', 'Spreedly payment method token received:', token);\n      this.#createOrder({\n        payment_token: token,\n        payment_method: 'credit-card',\n        ...this.#getOrderData()\n      });\n    });\n  }\n\n  #formatSpreedlyErrors(errors) {\n    if (!errors || errors.length === 0) {\n      return 'An unknown error occurred with your payment method';\n    }\n    \n    // Map common Spreedly error messages to user-friendly messages\n    const errorMap = {\n      'The card number is not a valid credit card number': 'Please enter a valid credit card number',\n      'Credit card number entered is not valid': 'Please enter a valid credit card number',\n      'The card number is too short': 'The card number you entered is too short',\n      'The card number is too long': 'The card number you entered is too long',\n      'The card security code is invalid': 'Please enter a valid security code (CVV)',\n      'The card security code is too short': 'The security code (CVV) is too short',\n      'The card security code is too long': 'The security code (CVV) is too long',\n      'The card has expired': 'This card has expired. Please use a different card',\n      'The card expiration month is invalid': 'Please select a valid expiration month',\n      'The card expiration year is invalid': 'Please select a valid expiration year'\n    };\n    \n    // Check if any of the errors match our map\n    for (const error of errors) {\n      for (const [key, value] of Object.entries(errorMap)) {\n        if (error.includes(key)) {\n          return value;\n        }\n      }\n    }\n    \n    // If no specific mapping, return the first error\n    return errors[0];\n  }\n\n  #initializeExpirationFields() {\n    try {\n      const [monthSelect, yearSelect] = this.#getExpirationElements();\n      this.#populateExpirationOptions(monthSelect, yearSelect);\n    } catch (error) {\n      this.#safeLog('error', 'Error initializing expiration fields:', error);\n    }\n  }\n\n  #getExpirationElements() {\n    const monthSelectors = ['[os-checkout-field=\"cc-month\"]', '[os-checkout-field=\"exp-month\"]', '#credit_card_exp_month'];\n    const yearSelectors = ['[os-checkout-field=\"cc-year\"]', '[os-checkout-field=\"exp-year\"]', '#credit_card_exp_year'];\n    \n    return [\n      monthSelectors.map(s => document.querySelector(s)).find(Boolean),\n      yearSelectors.map(s => document.querySelector(s)).find(Boolean)\n    ];\n  }\n\n  #populateExpirationOptions(monthSelect, yearSelect) {\n    if (monthSelect) {\n      monthSelect.innerHTML = '<option value=\"\">Month</option>';\n      for (let i = 1; i <= 12; i++) {\n        const month = i.toString().padStart(2, '0');\n        monthSelect.appendChild(new Option(month, month));\n      }\n    }\n\n    if (yearSelect) {\n      yearSelect.innerHTML = '<option value=\"\">Year</option>';\n      const currentYear = new Date().getFullYear();\n      for (let i = 0; i < 20; i++) {\n        const year = currentYear + i;\n        yearSelect.appendChild(new Option(year, year));\n      }\n    }\n  }\n\n  #isTestMode() {\n    // Check for URL parameter or Konami code flag in sessionStorage\n    return new URLSearchParams(window.location.search).get('test') === 'true' || \n           KonamiCodeHandler.isTestMode();\n  }\n\n  /**\n   * Set Konami code test mode flag\n   * This method can be called from CheckoutManager when Konami code is activated\n   */\n  setKonamiTestMode() {\n    KonamiCodeHandler.setTestMode();\n    this.#safeLog('info', '🎮 Konami code test mode activated');\n    return true;\n  }\n\n  processPayment() {\n    // Check if Konami code test mode is active and clear it after use\n    const isKonamiMode = KonamiCodeHandler.isTestMode();\n    if (isKonamiMode) {\n      KonamiCodeHandler.clearTestMode();\n      this.#safeLog('info', '🎮 Processing payment in Konami test mode');\n    }\n\n    if (this.#isProcessing) {\n      this.#safeLog('warn', 'Payment already processing');\n      return;\n    }\n\n    // Clear any previous errors before starting a new payment attempt\n    this.#clearPaymentErrors();\n\n    this.#enforceFormPrevention();\n    this.#isProcessing = true;\n    this.#safeLog('debug', `Processing payment with method: ${this.#paymentMethod}`);\n\n    try {\n      // If in Konami mode, bypass validation and use predefined test data\n      if (isKonamiMode) {\n        this.#showProcessingState();\n        \n        // Get order data using predefined test data\n        const orderData = KonamiCodeHandler.getTestOrderData(\n          this.#app?.state?.getState(),\n          this.#getPackageIdFromUrl.bind(this),\n          this.#getCartLines.bind(this)\n        );\n          \n        if (!orderData) {\n          this.#hideProcessingState();\n          return;\n        }\n        \n        // Create the order with test payment details using the specific test card\n        this.#createOrder({\n          ...orderData,\n          payment_detail: { \n            payment_method: 'card_token', \n            card_token: 'test_card',\n            test_card_number: '6011111111111117' // Use specific test card for Konami mode\n          }\n        });\n        return;\n      }\n      \n      // Regular payment flow (including test mode)\n      if (!this.#formValidator.validateAllFields(this.#paymentMethod)) {\n        this.#isProcessing = false;\n        this.#hideProcessingState();\n        return;\n      }\n\n      this.#showProcessingState();\n      const orderData = this.#getOrderData();\n      if (!orderData) return;\n\n      // If in test mode, bypass Spreedly validation and use test card token\n      if (this.#isTestMode()) {\n        this.#createOrder({\n          ...orderData,\n          payment_detail: { \n            payment_method: 'card_token', \n            card_token: 'test_card' // Use test_card token for test mode\n          }\n        });\n        return;\n      }\n\n      switch (this.#paymentMethod) {\n        case 'credit-card':\n        case 'credit':\n          this.#processCreditCard();\n          break;\n        case 'paypal':\n          this.#processPaypal();\n          break;\n        default:\n          this.#handlePaymentError(`Unknown payment method: ${this.#paymentMethod}`);\n      }\n    } catch (error) {\n      this.#safeLog('error', 'Error processing payment:', error);\n      this.#handlePaymentError('Unexpected error occurred');\n      this.#hideProcessingState();\n    }\n  }\n\n  #enforceFormPrevention() {\n    this.#form?.removeAttribute('action');\n    this.#form?.setAttribute('method', 'post');\n    this.#form.onsubmit = this.#preventFormSubmission.bind(this);\n    this.#form?.querySelectorAll('button[type=\"submit\"], input[type=\"submit\"]')\n      .forEach(btn => {\n        btn.disabled = true;\n        btn.setAttribute('type', 'button');\n      });\n  }\n\n  #showProcessingState() {\n    const submitButton = document.querySelector('[os-checkout-payment=\"combo\"]');\n    if (submitButton) {\n      submitButton.disabled = true;\n      submitButton.classList.add('is-submitting');\n    }\n  }\n\n  #hideProcessingState() {\n    const submitButton = document.querySelector('[os-checkout-payment=\"combo\"]');\n    if (submitButton) {\n      submitButton.disabled = false;\n      submitButton.classList.remove('is-submitting');\n    }\n    this.#isProcessing = false;\n  }\n\n  #processCreditCard() {\n    if (!this.#spreedlyManager) {\n      this.#handlePaymentError('Credit card processing unavailable');\n      return;\n    }\n  \n    const [fullName, month, year] = this.#getCreditCardFields();\n  \n    // If we're in debug test card mode or regular test mode, use test card flow\n    if (this.#isDebugTestCardMode() || this.#isTestMode()) {\n      this.#processTestCard(fullName, month, year);\n      return;\n    }\n  \n    // Validate credit card fields using the FormValidator\n    if (!this.#formValidator.validateCreditCard()) {\n      this.#safeLog('debug', 'Credit card validation failed on initial check');\n      if (!month || !year) {\n        this.#isProcessing = false;\n        this.#hideProcessingState();\n        return;\n      }\n    }\n  \n    // Proceed with tokenization\n    this.#spreedlyManager.tokenizeCard({ full_name: fullName || 'Test User', month, year });\n  }\n\n  #getCreditCardFields() {\n    return [\n      document.querySelector('[os-checkout-field=\"cc-name\"]')?.value || '',\n      document.querySelector('[os-checkout-field=\"cc-month\"]')?.value || \n      document.querySelector('[os-checkout-field=\"exp-month\"]')?.value || \n      document.querySelector('#credit_card_exp_month')?.value || '',\n      document.querySelector('[os-checkout-field=\"cc-year\"]')?.value || \n      document.querySelector('[os-checkout-field=\"exp-year\"]')?.value || \n      document.querySelector('#credit_card_exp_year')?.value || ''\n    ];\n  }\n\n  #isDebugTestCardMode() {\n    const params = new URLSearchParams(window.location.search);\n    return (this.#debugMode || params.get('debug') === 'true') && params.has('test-card');\n  }\n\n  #processTestCard(fullName, month, year) {\n    // Get the actual card number from the input field\n    const cardNumber = document.querySelector('[os-checkout-field=\"cc-number\"]')?.value || \n                      document.querySelector('#credit_card_number')?.value;\n    \n    if (!cardNumber) {\n      this.#handlePaymentError('Please enter a credit card number');\n      return;\n    }\n\n    // Create a test token with the actual card number\n    this.#createOrder({\n      payment_token: `test_card_token_${Date.now()}`,\n      payment_method: 'credit-card',\n      test_card_number: cardNumber,\n      ...this.#getOrderData()\n    });\n  }\n\n  #processPaypal() {\n    this.#createOrder({\n      payment_method: 'paypal',\n      ...this.#getOrderData()\n    });\n  }\n\n  #getPackageIdFromUrl() {\n    const params = new URLSearchParams(window.location.search);\n    const id = params.get('package_id') || params.get('pid');\n    return id ? parseInt(id, 10) || null : null;\n  }\n\n  #getOrderData() {\n    try {\n      const shippingData = this.#getAddressData(['fname', 'lname', 'address1', 'address2', 'city', 'province', 'postal', 'country', 'phone']);\n      const billingData = this.#formValidator.isSameAsShipping() ? null : \n        this.#getAddressData(['billing-fname', 'billing-lname', 'billing-address1', 'billing-address2', 'billing-city', 'billing-province', 'billing-postal', 'billing-country', 'billing-phone']);\n\n      const shippingAddress = this.#formatAddress(shippingData);\n      const billingAddress = billingData ? this.#formatAddress(billingData) : { ...shippingAddress };\n\n      if (!this.#app?.state) {\n        this.#handlePaymentError('Cart data missing');\n        return null;\n      }\n\n      const state = this.#app.state.getState();\n      if (!state.cart?.items?.length) {\n        this.#handlePaymentError('Cart is empty');\n        return null;\n      }\n\n      return {\n        user: {\n          email: state.user?.email || '',\n          first_name: state.user?.firstName || shippingAddress.first_name,\n          last_name: state.user?.lastName || shippingAddress.last_name\n        },\n        shipping_address: shippingAddress,\n        billing_address: billingAddress,\n        shipping_method: this.#getShippingMethod(state),\n        attribution: state.cart.attribution || {},\n        lines: this.#getCartLines(state.cart.items)\n      };\n    } catch (error) {\n      this.#safeLog('error', 'Error getting order data:', error);\n      this.#handlePaymentError('Error preparing order');\n      return null;\n    }\n  }\n\n  #getAddressData(fields) {\n    const data = {};\n    fields.forEach(field => {\n      const value = document.querySelector(`[os-checkout-field=\"${field}\"]`)?.value;\n      if (value) data[field.replace('billing-', '')] = value;\n    });\n    return data;\n  }\n\n  #formatAddress(data) {\n    return {\n      first_name: data.fname || '',\n      last_name: data.lname || '',\n      line1: data.address1 || '',\n      line2: data.address2 || '',\n      line3: '',\n      line4: data.city || '',\n      state: data.province || '',\n      postcode: data.postal || '',\n      country: data.country || '',\n      phone_number: data.phone || ''\n    };\n  }\n\n  #getShippingMethod(state) {\n    const method = state.cart?.shippingMethod;\n    return typeof method === 'number' ? method : \n           parseInt(method, 10) || 1;\n  }\n\n  #getCartLines(items) {\n    return items.map(item => {\n      let packageId = parseInt(item.id || item.external_id, 10) || this.#getPackageIdFromUrl();\n      if (!packageId) throw new Error(`Invalid package ID for item: ${item.name}`);\n      \n      // Create the line item\n      const lineItem = {\n        package_id: packageId,\n        quantity: item.quantity || 1\n      };\n      \n      // If is_upsell property exists on the item, add it to the line item\n      if (item.is_upsell === true) {\n        lineItem.is_upsell = true;\n        this.#safeLog('debug', `Adding line item with is_upsell=true: ${packageId}`);\n      }\n      \n      return lineItem;\n    });\n  }\n\n  #createOrder(orderData) {\n    if (!orderData || !this.#apiClient) {\n      this.#handlePaymentError('Cannot create order');\n      this.#hideProcessingState();\n      return;\n    }\n\n    this.#enforceFormPrevention();\n    const formattedOrderData = this.#formatOrderData(orderData);\n\n    this.#apiClient.createOrder(formattedOrderData)\n      .then(response => this.#handleOrderSuccess(response))\n      .catch(error => this.#handlePaymentError(this.#formatErrorMessage(error)))\n      .finally(() => this.#hideProcessingState());\n  }\n\n  #formatOrderData(orderData) {\n    const formatted = { ...orderData, success_url: orderData.success_url || window.location.origin + '/checkout/confirmation/' };\n    if (orderData.payment_token) {\n      formatted.payment_detail = { card_token: orderData.payment_token };\n      delete formatted.payment_token;\n    }\n    if (orderData.payment_method) {\n      formatted.payment_detail = formatted.payment_detail || {};\n      formatted.payment_detail.payment_method = {\n        'credit-card': 'card_token',\n        'credit': 'card_token',\n        'paypal': 'paypal'\n      }[orderData.payment_method] || orderData.payment_method;\n      delete formatted.payment_method;\n    }\n    formatted.shipping_method = parseInt(formatted.shipping_method, 10) || 1;\n    formatted.billing_address = formatted.billing_address || formatted.shipping_address;\n    return formatted;\n  }\n\n  #formatErrorMessage(error) {\n    try {\n      const errorData = JSON.parse(error.message);\n      \n      // Handle specific payment errors\n      if (errorData?.payment_details) {\n        return this.#formatPaymentErrorMessage(errorData);\n      }\n      \n      if (errorData?.message) {\n        return `Order creation failed: ${\n          Array.isArray(errorData.message) ? \n            errorData.message.map(e => Object.entries(e).map(([k, v]) => `${k}: ${v}`).join(', ')).join(', ') :\n            Object.entries(errorData.message).map(([k, v]) => `${k}: ${v}`).join(', ')\n        }`;\n      }\n    } catch {\n      return error.message || 'Unknown error';\n    }\n    return 'Order creation failed';\n  }\n\n  #formatPaymentErrorMessage(errorData) {\n    // Create a user-friendly message based on the payment error\n    const errorCode = errorData.payment_response_code;\n    const errorDetails = errorData.payment_details;\n    \n    // Map common error codes to user-friendly messages\n    const errorMessages = {\n      '3005': 'The card number you entered is invalid. Please check and try again.',\n      '3006': 'The card expiration date is invalid. Please check and try again.',\n      '3007': 'The card security code (CVV) is invalid. Please check and try again.',\n      '3008': 'The card has been declined. Please try another payment method.',\n      '3009': 'This card has expired. Please use a different card.',\n      '3010': 'The card has insufficient funds. Please try another payment method.'\n    };\n    \n    return errorMessages[errorCode] || errorDetails || 'There was a problem processing your payment. Please try again.';\n  }\n\n  #handlePaymentError(message) {\n    this.#hideProcessingState();\n    \n    // Clear any previous error indicators\n    this.#clearPaymentErrors();\n    \n    // Check if this is a credit card specific error\n    const isCreditCardError = this.#paymentMethod === 'credit-card' && \n      (message.includes('card') || message.includes('Card') || message.includes('CVV'));\n    \n    if (isCreditCardError) {\n      // Display error on the credit card field\n      this.#displayCreditCardError(message);\n    }\n    \n    // Handle Spreedly errors in the toast handler\n    const spreedlyErrorContainer = document.querySelector('[os-checkout-element=\"spreedly-error\"]');\n    if (spreedlyErrorContainer) {\n      const errorMessageElement = spreedlyErrorContainer.querySelector('[data-os-message=\"error\"]');\n      if (errorMessageElement) {\n        errorMessageElement.textContent = message;\n        spreedlyErrorContainer.style.display = 'flex';\n      }\n    } else {\n      // Fallback to general error container\n      const errorContainer = document.querySelector('[os-checkout-element=\"payment-error\"]');\n      if (errorContainer) {\n        errorContainer.textContent = message;\n        errorContainer.style.display = 'block';\n        errorContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      } else {\n        alert(`Payment Error: ${message}`);\n      }\n    }\n  }\n  \n  #displayCreditCardError(message) {\n    // Find the credit card field container\n    let fieldSelector = '[os-checkout-field=\"cc-number\"]';\n    let fieldId = '#credit_card_number';\n    \n    // Determine which field has the error based on the message\n    if (message.toLowerCase().includes('cvv') || message.toLowerCase().includes('security code')) {\n      fieldSelector = '[os-checkout-field=\"cc-cvv\"]';\n      fieldId = '#credit_card_cvv';\n    } else if (message.toLowerCase().includes('expiration') || message.toLowerCase().includes('expired')) {\n      fieldSelector = '[os-checkout-field=\"cc-month\"], [os-checkout-field=\"cc-year\"]';\n      fieldId = '#credit_card_exp_month, #credit_card_exp_year';\n    }\n    \n    // Find the field container\n    const fieldSelectors = fieldSelector.split(',').map(s => s.trim());\n    const idSelectors = fieldId.split(',').map(s => s.trim());\n    \n    // Apply error styling to all matching fields\n    [...fieldSelectors, ...idSelectors].forEach(selector => {\n      const field = document.querySelector(selector);\n      if (!field) return;\n      \n      const container = field.closest('.form-group') || field.parentElement;\n      if (!container) return;\n      \n      // Add error class to the field\n      field.classList.add('is-invalid');\n      \n      // Create or update error message element\n      let errorElement = container.querySelector('.invalid-feedback');\n      if (!errorElement) {\n        errorElement = document.createElement('div');\n        errorElement.className = 'invalid-feedback';\n        container.appendChild(errorElement);\n      }\n      \n      errorElement.textContent = message;\n      errorElement.style.display = 'block';\n    });\n    \n    // Scroll to the first field with error\n    const firstErrorField = document.querySelector(fieldSelectors[0]) || document.querySelector(idSelectors[0]);\n    if (firstErrorField) {\n      firstErrorField.focus();\n      firstErrorField.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }\n  }\n  \n  #clearPaymentErrors() {\n    // Clear all credit card field errors\n    const ccFieldSelectors = [\n      '[os-checkout-field=\"cc-number\"]', '#credit_card_number',\n      '[os-checkout-field=\"cc-cvv\"]', '#credit_card_cvv',\n      '[os-checkout-field=\"cc-month\"]', '#credit_card_exp_month',\n      '[os-checkout-field=\"cc-year\"]', '#credit_card_exp_year'\n    ];\n    \n    ccFieldSelectors.forEach(selector => {\n      const field = document.querySelector(selector);\n      if (!field) return;\n      \n      field.classList.remove('is-invalid');\n      const container = field.closest('.form-group') || field.parentElement;\n      if (container) {\n        const errorElement = container.querySelector('.invalid-feedback');\n        if (errorElement) {\n          errorElement.style.display = 'none';\n        }\n      }\n    });\n    \n    // Clear general error container\n    const errorContainer = document.querySelector('[os-checkout-element=\"payment-error\"]');\n    if (errorContainer) {\n      errorContainer.style.display = 'none';\n    }\n  }\n\n  #handleOrderSuccess(orderData) {\n    sessionStorage.setItem('order_reference', orderData.ref_id);\n    \n    // Trigger order.created event for the EventManager\n    this.#app?.triggerEvent?.('order.created', orderData);\n    \n    const redirectUrl = this.#getRedirectUrl(orderData);\n    window.location.href = redirectUrl;\n  }\n\n  #getRedirectUrl(orderData) {\n    const metaUrl = document.querySelector('meta[name=\"os-next-page\"]')?.content;\n    if (metaUrl) return `${metaUrl}${metaUrl.includes('?') ? '&' : '?'}ref_id=${orderData.ref_id}`;\n    return orderData.confirmation_url || orderData.order_status_url || `/checkout/confirmation/?ref_id=${orderData.ref_id}`;\n  }\n}", "/**\n * BillingAddressHandler - Manages the billing address form\n * \n * This class handles the billing address form functionality, including:\n * - Toggle between using shipping address or a different billing address\n * - Copying shipping address values to billing fields\n * - Showing/hiding the billing form based on user selection\n * - Showing/hiding the billing location fields when address is entered\n */\n\nexport class BillingAddressHandler {\n  #app;\n  #logger;\n  #sameAsShippingCheckbox;\n  #billingFormContainer;\n  #shippingFields = {};\n  #billingFields = {};\n  #fieldMap = {\n    'fname': 'billing-fname',\n    'lname': 'billing-lname',\n    'address1': 'billing-address1',\n    'address2': 'billing-address2',\n    'city': 'billing-city',\n    'province': 'billing-province',\n    'postal': 'billing-postal',\n    'country': 'billing-country',\n    'phone': 'billing-phone'\n  };\n  #isTransitioning = false;\n  #lastState = null;\n  #billingLocationComponent = null;\n  #billingAddress1Field = null;\n\n  constructor(app) {\n    this.#app = app;\n    \n    // Ensure we have a valid logger with all required methods\n    if (app?.logger) {\n      // If app.logger is a module logger, use it directly\n      if (typeof app.logger.debug === 'function' && \n          typeof app.logger.info === 'function' && \n          typeof app.logger.warn === 'function' && \n          typeof app.logger.error === 'function') {\n        this.#logger = app.logger;\n      } else {\n        // Otherwise, try to create a module logger\n        this.#logger = app.logger.createModuleLogger ? \n          app.logger.createModuleLogger('BILLING') : \n          console;\n      }\n    } else {\n      // Fallback to console if no logger is available\n      this.#logger = console;\n    }\n    \n    this.#init();\n  }\n\n  #init() {\n    try {\n      // Find the checkbox for \"same as shipping\" - try multiple possible selectors\n      this.#sameAsShippingCheckbox = \n        document.querySelector('[os-checkout-field=\"same-as-shipping\"]') || \n        document.querySelector('[name=\"use_shipping_address\"]') || \n        document.querySelector('#use_shipping_address');\n      \n      this.#billingFormContainer = document.querySelector('[os-checkout-element=\"different-billing-address\"]');\n      \n      // Find billing location component (city, state, zip)\n      this.#billingLocationComponent = document.querySelector('[data-os-component=\"billing-location\"]');\n      \n      // Find billing address field for input monitoring\n      this.#billingAddress1Field = document.querySelector('[os-checkout-field=\"billing-address1\"]');\n      \n      if (!this.#sameAsShippingCheckbox) {\n        this.#logWarn('Same as shipping checkbox not found. Tried multiple selectors including [name=\"use_shipping_address\"] and #use_shipping_address');\n        \n        // Log all checkboxes in the form for debugging\n        const allCheckboxes = document.querySelectorAll('input[type=\"checkbox\"]');\n        this.#logDebug(`Found ${allCheckboxes.length} checkboxes on the page:`);\n        allCheckboxes.forEach((checkbox, index) => {\n          this.#logDebug(`Checkbox ${index + 1}: id=${checkbox.id}, name=${checkbox.name}, class=${checkbox.className}`);\n        });\n        \n        return;\n      }\n      \n      if (!this.#billingFormContainer) {\n        this.#logWarn('Billing form container not found with selector [os-checkout-element=\"different-billing-address\"]');\n        \n        // Try alternative selector\n        this.#billingFormContainer = document.querySelector('.billing_form-container');\n        if (this.#billingFormContainer) {\n          this.#logInfo('Found billing form container with alternative selector .billing_form-container');\n        } else {\n          return;\n        }\n      }\n      \n      this.#logDebug('BillingAddressHandler initialized');\n      \n      // Cache all shipping and billing field elements\n      this.#cacheFieldElements();\n      \n      // Set initial state based on checkbox\n      this.#lastState = this.#sameAsShippingCheckbox.checked;\n      this.#toggleBillingForm(this.#lastState, false);\n      \n      // Set up billing location visibility\n      this.#setupBillingLocationVisibility();\n      \n      // Add event listeners\n      this.#setupEventListeners();\n    } catch (error) {\n      this.#logError('Error initializing BillingAddressHandler:', error);\n    }\n  }\n\n  // Safe logging methods that check if the method exists before calling\n  #logDebug(message, ...args) {\n    if (typeof this.#logger.debug === 'function') {\n      this.#logger.debug(message, ...args);\n    } else if (typeof this.#logger.log === 'function') {\n      this.#logger.log(message, ...args);\n    }\n  }\n\n  #logInfo(message, ...args) {\n    if (typeof this.#logger.info === 'function') {\n      this.#logger.info(message, ...args);\n    } else if (typeof this.#logger.log === 'function') {\n      this.#logger.log(message, ...args);\n    }\n  }\n\n  #logWarn(message, ...args) {\n    if (typeof this.#logger.warn === 'function') {\n      this.#logger.warn(message, ...args);\n    } else if (typeof this.#logger.log === 'function') {\n      this.#logger.log(`WARNING: ${message}`, ...args);\n    }\n  }\n\n  #logError(message, error) {\n    if (typeof this.#logger.error === 'function') {\n      this.#logger.error(message, error);\n    } else if (typeof this.#logger.log === 'function') {\n      this.#logger.log(`ERROR: ${message}`, error);\n    } else {\n      console.error(message, error);\n    }\n  }\n\n  #setupBillingLocationVisibility() {\n    // If we don't have the billing location component or address field, we can't proceed\n    if (!this.#billingLocationComponent) {\n      this.#logWarn('Billing location component not found with selector [data-os-component=\"billing-location\"]');\n      return;\n    }\n    \n    if (!this.#billingAddress1Field) {\n      this.#logWarn('Billing address1 field not found with selector [os-checkout-field=\"billing-address1\"]');\n      return;\n    }\n    \n    // Set initial state - hide the location component\n    this.#billingLocationComponent.classList.add('cc-hidden');\n    \n    this.#logDebug('Billing location component initially hidden');\n  }\n\n  #cacheFieldElements() {\n    // Cache shipping fields\n    Object.keys(this.#fieldMap).forEach(shippingField => {\n      const element = document.querySelector(`[os-checkout-field=\"${shippingField}\"]`);\n      if (element) {\n        this.#shippingFields[shippingField] = element;\n      }\n    });\n    \n    // Cache billing fields\n    Object.values(this.#fieldMap).forEach(billingField => {\n      const element = document.querySelector(`[os-checkout-field=\"${billingField}\"]`);\n      if (element) {\n        this.#billingFields[billingField] = element;\n      }\n    });\n    \n    this.#logDebug(`Cached ${Object.keys(this.#shippingFields).length} shipping fields and ${Object.keys(this.#billingFields).length} billing fields`);\n  }\n\n  #setupEventListeners() {\n    // Listen for changes to the \"same as shipping\" checkbox\n    this.#sameAsShippingCheckbox.addEventListener('change', (e) => {\n      if (!this.#isTransitioning) {\n        this.#lastState = e.target.checked;\n        this.#toggleBillingForm(e.target.checked, true);\n        \n        // If checked, copy shipping values to billing\n        if (e.target.checked) {\n          this.copyShippingToBilling();\n        }\n        \n        this.#logDebug(`Billing address changed: ${e.target.checked ? 'Same as shipping' : 'Different from shipping'}`);\n      }\n    });\n    \n    // Listen for payment method changes\n    document.addEventListener('payment-method-changed', () => {\n      if (this.#lastState !== null && !this.#isTransitioning) {\n        this.#toggleBillingForm(this.#lastState, false);\n        this.#logDebug(`Payment method changed, billing address state: ${this.#lastState ? 'Same as shipping' : 'Different from shipping'}`);\n      }\n    });\n    \n    // Listen for address autocomplete showing location fields\n    document.addEventListener('location-fields-shown', () => {\n      if (this.#billingLocationComponent) {\n        this.#showBillingLocationComponent();\n        this.#logDebug('Location fields shown by AddressAutocomplete, showing billing location component as well');\n      }\n    });\n    \n    // Listen for changes to shipping fields to update billing if \"same as shipping\" is checked\n    Object.entries(this.#shippingFields).forEach(([fieldName, element]) => {\n      element.addEventListener('change', () => {\n        if (this.#sameAsShippingCheckbox.checked) {\n          const billingFieldName = this.#fieldMap[fieldName];\n          const billingElement = this.#billingFields[billingFieldName];\n          \n          if (billingElement) {\n            billingElement.value = element.value;\n            \n            // Trigger change event on the billing field\n            billingElement.dispatchEvent(new Event('change', { bubbles: true }));\n          }\n        }\n      });\n    });\n    \n    // Set up input handler for billing address1 field\n    if (this.#billingAddress1Field && this.#billingLocationComponent) {\n      // Show location component when user types in address\n      this.#billingAddress1Field.addEventListener('input', () => {\n        // Show location component after minimum characters\n        if (this.#billingAddress1Field.value.length >= 3) {\n          this.#showBillingLocationComponent();\n        }\n      });\n      \n      // Set up mutation observer for autocomplete\n      this.#setupBillingAddressAutocompleteDetection();\n    }\n  }\n\n  #setupBillingAddressAutocompleteDetection() {\n    // Create mutation observer to detect when autocomplete fills the address field\n    const observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (mutation.type === 'attributes' && \n            (mutation.attributeName === 'value' || mutation.attributeName === 'autocomplete-value')) {\n          if (this.#billingAddress1Field.value.length > 0) {\n            this.#showBillingLocationComponent();\n            this.#logDebug('Autocomplete detected on billing address field');\n          }\n        }\n      });\n    });\n    \n    // Observe changes to the value attribute of the billing address field\n    observer.observe(this.#billingAddress1Field, { \n      attributes: true, \n      attributeFilter: ['value', 'autocomplete-value'] \n    });\n    \n    // Also listen for Google Places API autocomplete events\n    document.addEventListener('google-places-autocomplete-filled', (e) => {\n      if (e.detail && e.detail.field === 'billing-address1') {\n        this.#showBillingLocationComponent();\n        this.#logDebug('Google Places autocomplete detected on billing address field');\n      }\n    });\n    \n    this.#logDebug('Billing address autocomplete detection set up');\n  }\n\n  #showBillingLocationComponent() {\n    if (this.#billingLocationComponent && this.#billingLocationComponent.classList.contains('cc-hidden')) {\n      this.#billingLocationComponent.classList.remove('cc-hidden');\n      this.#logDebug('Billing location component shown');\n    }\n  }\n\n  #toggleBillingForm(isChecked, animate = true) {\n    if (!this.#billingFormContainer || this.#isTransitioning) return;\n\n    this.#isTransitioning = true;\n\n    if (!this.#billingFormContainer.style.transition) {\n      this.#billingFormContainer.style.transition = 'height 0.3s ease-out, opacity 0.3s ease-out';\n    }\n\n    const handleTransitionEnd = (e) => {\n      if (e.propertyName === 'height') {\n        if (!isChecked) {\n          this.#billingFormContainer.style.height = 'auto';\n        }\n        this.#billingFormContainer.style.overflow = '';\n        this.#isTransitioning = false;\n        this.#billingFormContainer.removeEventListener('transitionend', handleTransitionEnd);\n        \n        this.#logDebug(`Billing form transition completed: ${isChecked ? 'collapsed' : 'expanded'}`);\n      }\n    };\n\n    if (animate) {\n      this.#billingFormContainer.removeEventListener('transitionend', handleTransitionEnd);\n      \n      if (!isChecked) {\n        // Expanding\n        this.#billingFormContainer.style.display = 'flex';\n        this.#billingFormContainer.style.height = '0px';\n        this.#billingFormContainer.style.overflow = 'hidden';\n        \n        requestAnimationFrame(() => {\n          const targetHeight = this.#billingFormContainer.scrollHeight;\n          this.#billingFormContainer.style.height = `${targetHeight}px`;\n          this.#billingFormContainer.style.opacity = '1';\n          \n          this.#logDebug(`Expanding billing form to height: ${targetHeight}px`);\n        });\n        \n        this.#billingFormContainer.addEventListener('transitionend', handleTransitionEnd);\n      } else {\n        // Collapsing\n        this.#billingFormContainer.style.height = `${this.#billingFormContainer.scrollHeight}px`;\n        this.#billingFormContainer.style.overflow = 'hidden';\n        \n        requestAnimationFrame(() => {\n          this.#billingFormContainer.style.height = '0px';\n          this.#billingFormContainer.style.opacity = '0';\n          \n          this.#logDebug('Collapsing billing form');\n        });\n        \n        this.#billingFormContainer.addEventListener('transitionend', handleTransitionEnd);\n        \n        this.#billingFormContainer.addEventListener('transitionend', (e) => {\n          if (e.propertyName === 'height' && isChecked) {\n            this.#billingFormContainer.style.display = 'none';\n            this.#logDebug('Billing form hidden after collapse');\n          }\n        }, { once: true });\n      }\n    } else {\n      // No animation for initial state\n      this.#billingFormContainer.style.display = isChecked ? 'none' : 'flex';\n      this.#billingFormContainer.style.height = isChecked ? '0' : 'auto';\n      this.#billingFormContainer.style.opacity = isChecked ? '0' : '1';\n      this.#billingFormContainer.style.overflow = '';\n      this.#isTransitioning = false;\n      \n      this.#logDebug(`Set billing form without animation: ${isChecked ? 'hidden' : 'visible'}`);\n    }\n  }\n\n  // Deprecated method - use #toggleBillingForm instead\n  #updateBillingFormVisibility() {\n    this.#toggleBillingForm(this.#sameAsShippingCheckbox.checked, false);\n  }\n\n  /**\n   * Copy shipping address values to billing address fields\n   */\n  copyShippingToBilling() {\n    try {\n      Object.entries(this.#shippingFields).forEach(([shippingField, shippingElement]) => {\n        const billingFieldName = this.#fieldMap[shippingField];\n        const billingElement = this.#billingFields[billingFieldName];\n        \n        if (billingElement && shippingElement) {\n          billingElement.value = shippingElement.value;\n          \n          // Trigger change event on the billing field\n          billingElement.dispatchEvent(new Event('change', { bubbles: true }));\n        }\n      });\n      \n      // If address1 is copied and has value, show location component\n      if (this.#billingFields['billing-address1'] && \n          this.#billingFields['billing-address1'].value && \n          this.#billingFields['billing-address1'].value.length > 0) {\n        this.#showBillingLocationComponent();\n      }\n      \n      this.#logDebug('Copied shipping address to billing address');\n    } catch (error) {\n      this.#logError('Error copying shipping to billing:', error);\n    }\n  }\n\n  /**\n   * Get the billing address data\n   * If \"same as shipping\" is checked, returns null to indicate shipping should be used\n   * Otherwise returns an object with the billing address fields\n   */\n  getBillingAddressData() {\n    // If same as shipping is checked, return null to indicate shipping should be used\n    if (this.#sameAsShippingCheckbox && this.#sameAsShippingCheckbox.checked) {\n      return null;\n    }\n    \n    // Otherwise, collect billing address data\n    const billingData = {};\n    \n    Object.entries(this.#billingFields).forEach(([fieldName, element]) => {\n      // Convert from billing-fname to fname format for API\n      const apiFieldName = fieldName.replace('billing-', '');\n      billingData[apiFieldName] = element.value;\n    });\n    \n    return billingData;\n  }\n\n  /**\n   * Check if billing address is same as shipping\n   * @returns {boolean} Whether billing address is same as shipping\n   */\n  isSameAsShipping() {\n    const isSame = this.#sameAsShippingCheckbox ? this.#sameAsShippingCheckbox.checked : true;\n    this.#logDebug(`Billing address is ${isSame ? 'same as' : 'different from'} shipping`);\n    return isSame;\n  }\n}", "/**\n * PaymentSelector - Handles payment method selection and form toggling\n */\n\nexport class PaymentSelector {\n  #logger;\n  #container;\n  #radioInputs;\n  #forms;\n  #activeTransitions = new Map();\n  #currentMode = null;\n\n  constructor(logger) {\n    this.#logger = logger;\n    this.#container = document.querySelector('[os-payment-mode]');\n    this.#radioInputs = document.querySelectorAll('input[name=\"combo_mode\"]');\n    this.#forms = document.querySelectorAll('[os-checkout-element$=\"-form\"]');\n\n    if (this.#container && this.#radioInputs.length > 0) {\n      this.#logger.debug('PaymentSelector initialized with elements found');\n      this.#init();\n    } else {\n      this.#logger.warn('PaymentSelector elements not found');\n    }\n  }\n\n  #init() {\n    const checkedRadio = document.querySelector('input[name=\"combo_mode\"]:checked');\n    if (checkedRadio && this.#container) {\n      this.#setPaymentMode(checkedRadio.value, false);\n    }\n\n    this.#radioInputs.forEach(radio => \n      radio.addEventListener('change', e => this.#setPaymentMode(e.target.value, true))\n    );\n\n    this.#logger.debug('PaymentSelector event listeners attached');\n  }\n\n  #setPaymentMode(mode, animate = true) {\n    this.#logger.debug(`Setting payment mode to: ${mode}, animate: ${animate}`);\n    \n    this.#container?.setAttribute('os-payment-mode', mode);\n    this.#currentMode = mode;\n\n    this.#forms.forEach(form => {\n      form.style.transition = 'none';\n      form.offsetHeight; // Force reflow\n      form.style.transition = '';\n    });\n\n    this.#forms.forEach(form => {\n      const formType = form.getAttribute('os-checkout-element');\n      const isSelected = formType === `${mode}-form`;\n\n      if (this.#activeTransitions.has(form)) {\n        const oldHandler = this.#activeTransitions.get(form);\n        form.removeEventListener('transitionend', oldHandler);\n        this.#activeTransitions.delete(form);\n      }\n\n      if (animate) {\n        form.style.display = 'block';\n        form.style.overflow = 'hidden';\n        const currentHeight = form.scrollHeight;\n        form.style.height = `${currentHeight}px`;\n        form.offsetHeight; // Force reflow\n\n        const transitionEndHandler = e => {\n          if (e.propertyName === 'height') {\n            if (isSelected) {\n              form.style.height = 'auto';\n              form.style.overflow = '';\n            } else {\n              form.style.display = 'none';\n            }\n            this.#activeTransitions.delete(form);\n          }\n        };\n\n        this.#activeTransitions.set(form, transitionEndHandler);\n        form.addEventListener('transitionend', transitionEndHandler, { once: true });\n\n        requestAnimationFrame(() => {\n          form.style.height = isSelected ? `${form.scrollHeight}px` : '0';\n          form.style.opacity = isSelected ? '1' : '0';\n        });\n      } else {\n        form.style.transition = 'none';\n        Object.assign(form.style, {\n          display: isSelected ? 'block' : 'none',\n          height: isSelected ? 'auto' : '0',\n          opacity: isSelected ? '1' : '0',\n          overflow: ''\n        });\n        form.offsetHeight; // Force reflow\n        form.style.transition = '';\n      }\n    });\n\n    document.dispatchEvent(new CustomEvent('payment-method-changed', { detail: { mode } }));\n  }\n}", "export class AddressAutocomplete {\n    #logger;\n    #fieldsShown = false;\n    #elements;\n    #enableAutocomplete;\n  \n    constructor(logger, options = {}) {\n      this.#logger = logger;\n      this.#enableAutocomplete = options.enableGoogleMapsAutocomplete !== false;\n      \n      this.#elements = {\n        shipping: {\n          address: document.querySelector('[os-checkout-field=\"address1\"]'),\n          city: document.querySelector('[os-checkout-field=\"city\"]'),\n          state: document.querySelector('[os-checkout-field=\"province\"]'),\n          zip: document.querySelector('[os-checkout-field=\"postal\"]'),\n          country: document.querySelector('[os-checkout-field=\"country\"]'),\n        },\n        billing: {\n          address: document.querySelector('[os-checkout-field=\"billing-address1\"]'),\n          city: document.querySelector('[os-checkout-field=\"billing-city\"]'),\n          state: document.querySelector('[os-checkout-field=\"billing-province\"]'),\n          zip: document.querySelector('[os-checkout-field=\"billing-postal\"]'),\n          country: document.querySelector('[os-checkout-field=\"billing-country\"]'),\n        },\n        locations: document.querySelectorAll('[data-os-component=\"location\"]'),\n      };\n  \n      this.#logger.info(`AddressAutocomplete initialized (autocomplete ${this.#enableAutocomplete ? 'enabled' : 'disabled'})`);\n      this.#hideLocationFields();\n      this.#init();\n    }\n  \n    async #init() {\n      this.#setupAutofillDetection();\n      \n      // Skip Google Maps initialization if autocomplete is disabled\n      if (!this.#enableAutocomplete) {\n        this.#logger.debug('Google Maps autocomplete disabled, using basic field listeners');\n        return this.#setupBasicFieldListeners();\n      }\n      \n      await this.#initAutocompleteWithRetry();\n    }\n  \n    #hideLocationFields() {\n      if (this.#fieldsShown) return;\n      this.#elements.locations.forEach(el => el.classList.add('cc-hidden'));\n      this.#logger.debug('Location fields hidden');\n    }\n  \n    #showLocationFields() {\n      if (this.#fieldsShown) return;\n      this.#elements.locations.forEach(el => el.classList.remove('cc-hidden'));\n      this.#fieldsShown = true;\n      document.dispatchEvent(new CustomEvent('location-fields-shown'));\n      this.#logger.debug('Location fields shown');\n    }\n  \n    #isGoogleMapsAvailable() {\n      return !!window.google?.maps?.places;\n    }\n  \n    async #initAutocompleteWithRetry(attempt = 0) {\n      // Skip if autocomplete is disabled\n      if (!this.#enableAutocomplete) {\n        return this.#setupBasicFieldListeners();\n      }\n      \n      if (this.#isGoogleMapsAvailable()) {\n        this.#logger.debug('Google Maps API available');\n        return this.#initializeAutocomplete();\n      }\n      if (attempt >= 3) {\n        this.#logger.warn('Google Maps API unavailable after 3 attempts');\n        return this.#setupBasicFieldListeners();\n      }\n  \n      this.#logger.debug(`Retrying Google Maps check, attempt ${attempt + 1}`);\n      await new Promise(resolve => setTimeout(resolve, 1000 * 1.5 ** attempt));\n      return this.#initAutocompleteWithRetry(attempt + 1);\n    }\n  \n    #initializeAutocomplete() {\n      const { shipping, billing } = this.#elements;\n      [shipping, billing].forEach(fields => {\n        if (fields.address) {\n          this.#setupAutocomplete(fields.address, fields);\n          this.#logger.debug(`Autocomplete set up for ${fields.address.getAttribute('os-checkout-field')}`);\n        }\n      });\n    }\n  \n    #setupAutocomplete(input, fields) {\n      try {\n        const autocomplete = new google.maps.places.Autocomplete(input, {\n          types: ['address'],\n          fields: ['address_components', 'formatted_address'],\n        });\n  \n        autocomplete.addListener('place_changed', () => {\n          const place = autocomplete.getPlace();\n          if (!place.address_components) return;\n  \n          this.#showLocationFields();\n          const components = Object.fromEntries(\n            place.address_components.map(c => [c.types[0], { long: c.long_name, short: c.short_name }])\n          );\n  \n          fields.address.value = [components.street_number?.long, components.route?.long].filter(Boolean).join(' ');\n          fields.city && (fields.city.value = components.locality?.long ?? '');\n          fields.zip && (fields.zip.value = components.postal_code?.long ?? '');\n  \n          if (fields.country && components.country) {\n            const countryCode = components.country.short;\n            if (fields.country.value !== countryCode) {\n              fields.country.value = countryCode;\n              fields.country.dispatchEvent(new Event('change', { bubbles: true }));\n              this.#logger.debug(`Country set to ${countryCode}`);\n            }\n            if (fields.state && components.administrative_area_level_1) {\n              this.#setStateWithRetry(fields.state, components.administrative_area_level_1.short);\n            }\n          }\n  \n          [fields.address, fields.city, fields.zip].forEach(el => el?.dispatchEvent(new Event('change', { bubbles: true })));\n        });\n  \n        input.addEventListener('blur', () => input.value.length > 10 && this.#showLocationFields());\n        input.addEventListener('keydown', e => e.key === 'Enter' && e.preventDefault());\n      } catch (error) {\n        this.#logger.error('Autocomplete setup failed:', error);\n        this.#setupBasicFieldListeners();\n      }\n    }\n  \n    async #setStateWithRetry(stateSelect, stateCode, attempt = 0) {\n      if (attempt >= 5) {\n        this.#logger.warn(`Failed to set state ${stateCode} after 5 attempts`);\n        return;\n      }\n      await new Promise(resolve => setTimeout(resolve, 300 * 1.5 ** attempt));\n  \n      const hasOption = Array.from(stateSelect.options).some(opt => opt.value === stateCode);\n      if (hasOption) {\n        stateSelect.value = stateCode;\n        stateSelect.dispatchEvent(new Event('change', { bubbles: true }));\n        this.#logger.debug(`State set to ${stateCode}`);\n      } else {\n        this.#setStateWithRetry(stateSelect, stateCode, attempt + 1);\n      }\n    }\n  \n    #setupBasicFieldListeners() {\n      [this.#elements.shipping.address, this.#elements.billing.address].forEach(field => {\n        field?.addEventListener('blur', () => field.value.length > 10 && this.#showLocationFields());\n      });\n      this.#logger.debug('Basic field listeners set up');\n    }\n  \n    #setupAutofillDetection() {\n      const style = document.createElement('style');\n      style.textContent = `\n        @keyframes onAutoFillStart { from { opacity: 0.99; } to { opacity: 1; } }\n        input:-webkit-autofill { animation-name: onAutoFillStart; }\n      `;\n      document.head.appendChild(style);\n  \n      const fields = [this.#elements.shipping.address, this.#elements.billing.address].filter(Boolean);\n      fields.forEach(field => {\n        field.addEventListener('input', () => field.value.length > 10 && this.#showLocationFields());\n        field.addEventListener('change', () => field.value.length > 0 && this.#showLocationFields());\n        field.addEventListener('animationstart', e => {\n          if (e.animationName === 'onAutoFillStart') {\n            this.#logger.debug(`Autofill detected on ${field.getAttribute('os-checkout-field')}`);\n            this.#showLocationFields();\n          }\n        });\n      });\n      this.#logger.debug('Autofill detection initialized');\n    }\n  }", "export class PhoneInputHandler {\n  #logger;\n  #intlTelInputAvailable = !!window.intlTelInput;\n\n  constructor(logger) {\n    this.#logger = logger;\n\n    if (!this.#intlTelInputAvailable) {\n      this.#logger.warn('intlTelInput not found, loading dynamically');\n      this.#loadIntlTelInput().then(() => this.#initPhoneInputs());\n    } else {\n      this.#logger.info('intlTelInput available, initializing phone inputs');\n      this.#initPhoneInputs();\n    }\n  }\n\n  async #loadIntlTelInput() {\n    const resources = [\n      { tag: 'link', rel: 'stylesheet', href: 'https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.min.css' },\n      { tag: 'script', src: 'https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js', async: true },\n      { tag: 'script', src: 'https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js', async: true },\n    ];\n\n    await Promise.all(resources.map(({ tag, ...attrs }) => {\n      const element = document.createElement(tag);\n      Object.assign(element, attrs);\n      document.head.appendChild(element);\n      return tag === 'link' ? Promise.resolve() : new Promise(resolve => element.onload = resolve);\n    }));\n\n    this.#intlTelInputAvailable = true;\n    this.#logger.debug('intlTelInput and utils loaded');\n  }\n\n  #initPhoneInputs() {\n    if (!this.#intlTelInputAvailable) return;\n\n    const phoneInputs = document.querySelectorAll('input[type=\"tel\"]');\n    this.#logger.info(`Found ${phoneInputs.length} phone inputs`);\n    phoneInputs.forEach((input, i) => this.#initializePhoneInput(input, i + 1));\n  }\n\n  #initializePhoneInput(input, index) {\n    try {\n      const iti = window.intlTelInput(input, {\n        utilsScript: 'https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js',\n        separateDialCode: true,\n        onlyCountries: ['us'],\n        initialCountry: 'us',\n        allowDropdown: false,\n        dropdownContainer: document.body,\n        useFullscreenPopup: true,\n        formatOnDisplay: true,\n        autoPlaceholder: 'aggressive',\n        customContainer: 'iti-tel-input',\n        autoFormat: true,\n        nationalMode: true\n      });\n\n      input.iti = iti;\n      this.#logger.debug(`Phone input ${index} (${input.getAttribute('os-checkout-field') ?? 'unknown'}) initialized`);\n\n      this.#setupPhoneInputSync(input, iti);\n      this.#setupPhoneValidation(input, iti);\n\n      // Add input event listener for formatting and validation\n      input.addEventListener('input', () => {\n        const number = input.value.trim();\n        \n        // Format the number as user types\n        if (number) {\n          // Remove all non-numeric characters\n          const numericValue = number.replace(/\\D/g, '');\n          \n          // Format according to US pattern (XXX) XXX-XXXX\n          let formattedNumber = '';\n          if (numericValue.length > 0) {\n            if (numericValue.length <= 3) {\n              formattedNumber = `(${numericValue}`;\n            } else if (numericValue.length <= 6) {\n              formattedNumber = `(${numericValue.slice(0, 3)}) ${numericValue.slice(3)}`;\n            } else {\n              formattedNumber = `(${numericValue.slice(0, 3)}) ${numericValue.slice(3, 6)}-${numericValue.slice(6, 10)}`;\n            }\n          }\n          \n          // Only update if the format is different to avoid cursor jumping\n          if (input.value !== formattedNumber) {\n            // Store cursor position\n            const cursorPos = input.selectionStart;\n            const oldLength = input.value.length;\n            \n            // Update value\n            input.value = formattedNumber;\n            \n            // Calculate new cursor position\n            if (cursorPos !== null) {\n              const newLength = formattedNumber.length;\n              const cursorOffset = newLength - oldLength;\n              input.setSelectionRange(cursorPos + cursorOffset, cursorPos + cursorOffset);\n            }\n          }\n        }\n\n        const isValid = iti.isValidNumber();\n        const numberType = iti.getNumberType();\n        const validationError = iti.getValidationError();\n\n        // Clear any existing error if the field is empty\n        if (!number) {\n          this.#clearError(input);\n          return;\n        }\n\n        console.group('Phone Number Validation');\n        console.log('Number:', number);\n        console.log('Is Valid:', isValid);\n        console.log('Formatted Number:', iti.getNumber());\n        console.log('Number Type:', this.#getNumberTypeName(numberType));\n        console.log('Validation Error:', validationError);\n        console.groupEnd();\n\n        this.#logger.debug('Phone validation:', {\n          number,\n          isValid,\n          formattedNumber: iti.getNumber(),\n          type: this.#getNumberTypeName(numberType),\n          error: validationError\n        });\n      });\n\n      // Add blur event for validation and final formatting\n      input.addEventListener('blur', () => {\n        const number = input.value.trim();\n        if (number) {\n          const isValid = iti.isValidNumber();\n          \n          // On blur, ensure the number is in full international format\n          if (isValid) {\n            input.value = iti.getNumber(intlTelInputUtils.numberFormat.NATIONAL);\n          }\n          \n          console.log('Phone field blur - Final validation:', {\n            number,\n            isValid,\n            formattedNumber: iti.getNumber()\n          });\n\n          if (!isValid) {\n            this.#showError(input, 'Please enter a valid US phone number (e.g. 555-555-5555)');\n          } else {\n            this.#clearError(input);\n          }\n        }\n      });\n\n    } catch (error) {\n      this.#logger.error(`Error initializing phone input ${index}:`, error);\n    }\n  }\n\n  #showError(input, message) {\n    // Add error class to input\n    input.classList.add('error');\n    \n    // Add error class to iti container\n    const itiContainer = input.closest('.iti');\n    if (itiContainer) {\n      itiContainer.classList.add('error');\n      itiContainer.style.border = '1px solid red';\n    }\n    \n    // Find or create error message element\n    const wrapper = input.closest('.frm-flds') || input.closest('.form-group');\n    let errorElement = wrapper.querySelector('.pb-input-error');\n    if (!errorElement) {\n      errorElement = document.createElement('div');\n      errorElement.className = 'pb-input-error';\n      wrapper.appendChild(errorElement);\n    }\n    \n    // Set error message and styles\n    errorElement.textContent = message;\n    Object.assign(errorElement.style, {\n      color: 'red',\n      fontSize: '0.875rem',\n      marginTop: '0.25rem',\n      display: 'block',\n      position: 'relative',\n      clear: 'both'\n    });\n  }\n\n  #clearError(input) {\n    // Remove error class from input\n    input.classList.remove('error');\n    \n    // Remove error class from iti container\n    const itiContainer = input.closest('.iti');\n    if (itiContainer) {\n      itiContainer.classList.remove('error');\n      itiContainer.style.border = '';\n    }\n    \n    // Remove error message\n    const wrapper = input.closest('.frm-flds') || input.closest('.form-group');\n    const errorElement = wrapper.querySelector('.pb-input-error');\n    if (errorElement) {\n      errorElement.remove();\n    }\n  }\n\n  // Helper method to convert number type to readable name\n  #getNumberTypeName(type) {\n    const types = {\n      0: 'FIXED_LINE',\n      1: 'MOBILE',\n      2: 'FIXED_LINE_OR_MOBILE',\n      3: 'TOLL_FREE',\n      4: 'PREMIUM_RATE',\n      5: 'SHARED_COST',\n      6: 'VOIP',\n      7: 'PERSONAL_NUMBER',\n      8: 'PAGER',\n      9: 'UAN',\n      10: 'UNKNOWN'\n    };\n    return types[type] || 'UNKNOWN';\n  }\n\n  #setupPhoneInputSync(input, iti) {\n    const fieldAttr = input.getAttribute('os-checkout-field');\n    if (!fieldAttr) {\n      this.#logger.warn('Phone input missing os-checkout-field attribute');\n      return;\n    }\n\n    const countrySelect = document.querySelector(\n      fieldAttr === 'phone' ? '[os-checkout-field=\"country\"]' : '[os-checkout-field=\"billing-country\"]'\n    );\n\n    if (!countrySelect) {\n      this.#logger.warn(`Country select not found for ${fieldAttr}`);\n      return;\n    }\n\n    // Set country select to US if it exists\n    if (countrySelect.value !== 'US') {\n      countrySelect.value = 'US';\n      countrySelect.dispatchEvent(new Event('change', { bubbles: true }));\n      this.#logger.debug('Country select updated to US');\n    }\n  }\n\n  #setupPhoneValidation(input, iti) {\n    input.validatePhone = () => !input.value.trim() ? !input.hasAttribute('required') : iti.isValidNumber();\n    input.getFormattedNumber = () => iti.getNumber();\n\n    const form = input.closest('form');\n    form?.addEventListener('submit', () => {\n      if (input.value.trim() && iti.isValidNumber()) {\n        input.value = iti.getNumber();\n        this.#logger.debug(`Formatted phone number set to ${input.value} on submit`);\n      }\n    });\n  }\n}", "/**\n * ProspectCartHandler - Creates carts for users based on form data\n * \n * This component monitors checkout form fields and creates a cart in the API\n * when users fill out their email and other information. This helps with:\n * 1. Lead capture for abandoned carts\n * 2. Analytics for checkout funnel optimization\n * 3. Enabling cart recovery emails\n */\n\nexport class ProspectCartHandler {\n  #app;\n  #logger;\n  #initialized = false;\n  #cartCreated = false;\n  #cartAttempted = false;\n  #beginCheckoutFired = false; // Track if beginCheckout event has been fired\n  #debounceTimeout = null;\n  #debounceDelay = 3000; // 3 seconds debounce\n  #lastFormData = null; // Track the last form data we attempted to use\n  \n  // Form field selectors\n  #selectors = {\n    firstName: '[os-checkout-field=\"fname\"]',\n    lastName: '[os-checkout-field=\"lname\"]',\n    email: '[os-checkout-field=\"email\"]',\n    phone: '[os-checkout-field=\"phone\"]',\n    address1: '[os-checkout-field=\"address1\"]',\n    address2: '[os-checkout-field=\"address2\"]',\n    city: '[os-checkout-field=\"city\"]',\n    province: '[os-checkout-field=\"province\"]',\n    postal: '[os-checkout-field=\"postal\"]',\n    country: '[os-checkout-field=\"country\"]'\n  };\n  \n  // Form fields\n  #fields = {\n    firstName: null,\n    lastName: null,\n    email: null,\n    phone: null,\n    address1: null,\n    address2: null,\n    city: null,\n    province: null,\n    postal: null,\n    country: null\n  };\n  \n  // Email validation regex\n  #emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\n  /**\n   * Initialize the ProspectCartHandler\n   * @param {Object} app - The main application instance\n   */\n  constructor(app) {\n    this.#app = app;\n    \n    // Create a module-specific logger\n    if (this.#app && this.#app.logger) {\n      this.#logger = this.#app.logger.createModuleLogger('PROSPECT');\n    } else {\n      // Create a simple logger fallback\n      this.#logger = {\n        debug: (message, data) => console.log(`[PROSPECT DEBUG] ${message}`, data !== undefined ? data : ''),\n        info: (message, data) => console.info(`[PROSPECT INFO] ${message}`, data !== undefined ? data : ''),\n        warn: (message, data) => console.warn(`[PROSPECT WARN] ${message}`, data !== undefined ? data : ''),\n        error: (message, data) => console.error(`[PROSPECT ERROR] ${message}`, data !== undefined ? data : '')\n      };\n    }\n    \n    // Initialize the component\n    this.#init();\n  }\n  \n  /**\n   * Initialize the component\n   */\n  #init() {\n    this.#logger.info('Initializing ProspectCartHandler');\n    \n    // Find form fields\n    this.#findFormFields();\n    \n    // If required fields are found, attach event listeners\n    if (this.#fields.email && (this.#fields.firstName || this.#fields.lastName)) {\n      this.#attachEventListeners();\n      this.#initialized = true;\n      this.#logger.info('ProspectCartHandler initialized successfully');\n    } else {\n      this.#logger.warn('Required form fields not found, ProspectCartHandler not initialized');\n    }\n  }\n  \n  /**\n   * Find form fields in the DOM\n   */\n  #findFormFields() {\n    // Find each form field\n    Object.keys(this.#selectors).forEach(field => {\n      this.#fields[field] = document.querySelector(this.#selectors[field]);\n      \n      // Also try with data-os-field attribute if not found\n      if (!this.#fields[field]) {\n        const altSelector = this.#selectors[field].replace('os-checkout-field', 'data-os-field');\n        this.#fields[field] = document.querySelector(altSelector);\n      }\n      \n      // Log if field is found\n      if (this.#fields[field]) {\n        this.#logger.debug(`Found ${field} field`);\n      } else {\n        this.#logger.debug(`${field} field not found`);\n      }\n    });\n  }\n  \n  /**\n   * Attach event listeners to form fields\n   */\n  #attachEventListeners() {\n    // Attach blur event listeners to key fields\n    if (this.#fields.email) {\n      this.#fields.email.addEventListener('blur', () => this.#handleFieldChange());\n    }\n    \n    if (this.#fields.firstName) {\n      this.#fields.firstName.addEventListener('blur', () => this.#handleFieldChange());\n    }\n    \n    if (this.#fields.lastName) {\n      this.#fields.lastName.addEventListener('blur', () => this.#handleFieldChange());\n    }\n    \n    // Listen for form submission to prevent multiple cart creation attempts\n    const form = document.querySelector('form[os-checkout=\"form\"]');\n    if (form) {\n      form.addEventListener('submit', () => {\n        // If the form is being submitted, we don't need to create a prospect cart\n        this.#cartAttempted = true;\n        if (this.#debounceTimeout) {\n          clearTimeout(this.#debounceTimeout);\n        }\n      });\n    }\n    \n    this.#logger.debug('Event listeners attached to form fields');\n  }\n  \n  /**\n   * Handle field change event\n   */\n  #handleFieldChange() {\n    // If cart already created or attempted, don't try again\n    if (this.#cartCreated || this.#cartAttempted) {\n      return;\n    }\n    \n    // Clear any existing timeout\n    if (this.#debounceTimeout) {\n      clearTimeout(this.#debounceTimeout);\n    }\n    \n    // Check if we should fire the beginCheckout event\n    // We do this before the debounce to capture the intent early\n    this.#checkAndFireBeginCheckout();\n    \n    // Set a new timeout to debounce the cart creation\n    this.#debounceTimeout = setTimeout(() => {\n      this.#checkAndCreateCart();\n    }, this.#debounceDelay);\n  }\n  \n  /**\n   * Check if we should fire the beginCheckout event\n   * and fire it if we haven't already\n   */\n  #checkAndFireBeginCheckout() {\n    // If we've already fired the event, don't fire it again\n    if (this.#beginCheckoutFired) {\n      return;\n    }\n    \n    // Check if we have enough information to consider this a checkout start\n    const hasEmail = this.#fields.email && \n                    this.#fields.email.value && \n                    this.#fields.email.value.trim().length > 0;\n                    \n    const hasName = (this.#fields.firstName && this.#fields.firstName.value && \n                    this.#fields.firstName.value.trim().length > 0) || \n                    (this.#fields.lastName && this.#fields.lastName.value && \n                    this.#fields.lastName.value.trim().length > 0);\n    \n    // If the user has entered an email or name, consider it a checkout start\n    if (hasEmail || hasName) {\n      this.#logger.debug('User has started entering checkout information, firing beginCheckout event');\n      \n      // Fire the beginCheckout event\n      if (this.#app.events) {\n        this.#app.events.beginCheckout();\n        this.#beginCheckoutFired = true;\n        this.#logger.info('beginCheckout event fired');\n      }\n    }\n  }\n  \n  /**\n   * Check if we have enough information to create a cart\n   * and create it if we do\n   */\n  #checkAndCreateCart() {\n    // If cart already created or attempted, don't create another one\n    if (this.#cartCreated || this.#cartAttempted) {\n      this.#logger.debug('Cart already created or attempted, skipping');\n      return;\n    }\n    \n    // Check if we have enough information to create a cart\n    if (!this.#hasMinimumRequiredFields()) {\n      this.#logger.debug('Not enough information to create a cart');\n      return;\n    }\n    \n    // Check if the form data has changed since our last attempt\n    const currentFormData = this.#getFormData();\n    if (this.#lastFormData && this.#isSameFormData(currentFormData, this.#lastFormData)) {\n      this.#logger.debug('Form data has not changed since last attempt, skipping');\n      return;\n    }\n    \n    // Store the current form data\n    this.#lastFormData = currentFormData;\n    \n    // Mark that we've attempted to create a cart\n    this.#cartAttempted = true;\n    \n    // Create the cart\n    this.#createProspectCart();\n  }\n  \n  /**\n   * Check if we have the minimum required fields to create a cart\n   * @returns {boolean} Whether we have the minimum required fields\n   */\n  #hasMinimumRequiredFields() {\n    // We need a valid email\n    const hasValidEmail = this.#fields.email && \n                         this.#fields.email.value && \n                         this.#emailRegex.test(this.#fields.email.value);\n    \n    if (!hasValidEmail) {\n      this.#logger.debug('Email is missing or invalid');\n      return false;\n    }\n    \n    // We need at least one name field (first or last)\n    const hasFirstName = this.#fields.firstName && \n                        this.#fields.firstName.value && \n                        this.#fields.firstName.value.trim().length >= 2;\n    \n    const hasLastName = this.#fields.lastName && \n                       this.#fields.lastName.value && \n                       this.#fields.lastName.value.trim().length >= 2;\n    \n    if (!hasFirstName && !hasLastName) {\n      this.#logger.debug('First name and last name are missing or too short');\n      return false;\n    }\n    \n    this.#logger.debug('Minimum required fields are present');\n    return true;\n  }\n  \n  /**\n   * Get the current form data\n   * @returns {Object} The form data\n   */\n  #getFormData() {\n    const data = {};\n    \n    // Get values from all fields\n    Object.keys(this.#fields).forEach(field => {\n      if (this.#fields[field]) {\n        data[field] = this.#fields[field].value;\n      }\n    });\n    \n    return data;\n  }\n  \n  /**\n   * Check if two form data objects are the same\n   * @param {Object} data1 - The first form data object\n   * @param {Object} data2 - The second form data object\n   * @returns {boolean} Whether the form data objects are the same\n   */\n  #isSameFormData(data1, data2) {\n    // Check if the required fields are the same\n    return data1.email === data2.email && \n           data1.firstName === data2.firstName && \n           data1.lastName === data2.lastName;\n  }\n  \n  /**\n   * Create a prospect cart\n   */\n  #createProspectCart() {\n    this.#logger.info('Creating prospect cart');\n    \n    // Get cart data from StateManager\n    const cartData = this.#app.state.getState('cart');\n    \n    // If cart has no lines, don't create a cart\n    if (!cartData || !cartData.items || cartData.items.length === 0) {\n      this.#logger.warn('No cart items available, skipping cart creation');\n      this.#cartAttempted = false; // Reset so we can try again later\n      return;\n    }\n    \n    // Get attribution data from state - it's already initialized and stored\n    const attributionData = cartData.attribution || {};\n    this.#logger.debug('Using attribution data from state', attributionData);\n    \n    // Get user information\n    const firstName = this.#fields.firstName ? this.#fields.firstName.value : '';\n    const lastName = this.#fields.lastName ? this.#fields.lastName.value : '';\n    const email = this.#fields.email ? this.#fields.email.value : '';\n    const phone = this.#getPhoneNumber();\n    \n    // Update user state with user information\n    this.#updateUserState(email, firstName, lastName, phone);\n    \n    // Create cart data object with essential information\n    const prospectCartData = {\n      lines: cartData.items.map(item => {\n        // Create the line item with required properties\n        const lineItem = {\n          package_id: item.id,\n          quantity: item.quantity || 1\n        };\n        \n        // Preserve is_upsell flag if it exists\n        if (item.is_upsell === true) {\n          lineItem.is_upsell = true;\n          this.#logger.debug(`Adding upsell item to prospect cart: ${item.id}`);\n        }\n        \n        return lineItem;\n      }),\n      user: {\n        first_name: firstName,\n        last_name: lastName,\n        email: email\n      },\n      attribution: attributionData\n    };\n\n    // Only add phone number if it's valid\n    if (phone) {\n      prospectCartData.user.phone_number = phone;\n    } else {\n      this.#logger.warn('Invalid phone number format - sending cart without phone number');\n    }\n    \n    // Add shipping method if available\n    if (cartData.shippingMethod) {\n      prospectCartData.shipping_method = cartData.shippingMethod.code || cartData.shippingMethod.id;\n    }\n    \n    // Only add address data if it's complete and valid\n    const addressData = this.#getValidAddressData();\n    if (addressData && Object.keys(addressData).length > 0) {\n      // Check if we have a valid address (with valid postal code if country is provided)\n      if (this.#isAddressValid(addressData)) {\n        this.#logger.debug('Adding valid address data to cart');\n        prospectCartData.address = addressData;\n      } else {\n        this.#logger.info('Address data is incomplete or invalid - sending cart with user info only');\n      }\n    } else {\n      this.#logger.debug('No address data available - sending cart with user info only');\n    }\n    \n    // Create the cart via API\n    this.#createCartViaApi(prospectCartData);\n  }\n  \n  /**\n   * Update user state with user information\n   * @param {string} email - User's email\n   * @param {string} firstName - User's first name\n   * @param {string} lastName - User's last name\n   * @param {string} phone - User's phone number\n   */\n  #updateUserState(email, firstName, lastName, phone) {\n    if (!this.#app.state) {\n      this.#logger.warn('State manager not available, cannot update user state');\n      return;\n    }\n    \n    try {\n      // Get current user state\n      const currentUser = this.#app.state.getState('user') || {};\n      \n      // Update user state with new information\n      const updatedUser = {\n        ...currentUser,\n        email: email || currentUser.email,\n        firstName: firstName || currentUser.firstName,\n        lastName: lastName || currentUser.lastName,\n        phone: phone || currentUser.phone\n      };\n      \n      // Set the updated user state\n      this.#app.state.setState('user', updatedUser);\n      this.#logger.debug('Updated user state with user information', updatedUser);\n    } catch (error) {\n      this.#logger.error('Error updating user state:', error);\n    }\n  }\n  \n  /**\n   * Check if address data is valid\n   * @param {Object} address - The address data\n   * @returns {boolean} Whether the address is valid\n   */\n  #isAddressValid(address) {\n    // If we have a country but no postal code, or an invalid postal code, the address is invalid\n    if (address.country === 'US' && (!address.postcode || !this.#isValidPostalCode(address.postcode, 'US'))) {\n      this.#logger.warn('US address requires a valid postal code');\n      return false;\n    }\n    \n    // For other countries, we're less strict\n    return true;\n  }\n  \n  /**\n   * Get address data from form fields, validating postal code if present\n   * @returns {Object} The validated address data\n   */\n  #getValidAddressData() {\n    // Get country and postal code first to check validity\n    const country = this.#fields.country && this.#fields.country.value ? \n                   this.#fields.country.value : '';\n    \n    const postalCode = this.#fields.postal && this.#fields.postal.value ? \n                      this.#fields.postal.value : '';\n    \n    // For US addresses, if postal code is invalid, don't include any address data\n    if (country === 'US' && postalCode && !this.#isValidPostalCode(postalCode, country)) {\n      this.#logger.warn(`Invalid postal code for US: ${postalCode} - omitting all address data`);\n      return null;\n    }\n    \n    // Only include address fields that have values\n    const address = {};\n    \n    // Add name and phone to address if available\n    if (this.#fields.firstName && this.#fields.firstName.value) {\n      address.first_name = this.#fields.firstName.value;\n    }\n    \n    if (this.#fields.lastName && this.#fields.lastName.value) {\n      address.last_name = this.#fields.lastName.value;\n    }\n    \n    const phone = this.#getPhoneNumber();\n    if (phone) {\n      address.phone_number = phone;\n    }\n    \n    // Add optional address fields if they have values\n    if (this.#fields.address1 && this.#fields.address1.value) {\n      address.line1 = this.#fields.address1.value;\n    }\n    \n    if (this.#fields.address2 && this.#fields.address2.value) {\n      address.line2 = this.#fields.address2.value;\n    }\n    \n    if (this.#fields.city && this.#fields.city.value) {\n      address.line4 = this.#fields.city.value; // City\n    }\n    \n    if (this.#fields.province && this.#fields.province.value) {\n      address.state = this.#fields.province.value;\n    }\n    \n    // Add country and postal code if available and valid\n    if (country) {\n      address.country = country;\n    }\n    \n    if (postalCode && (!country || this.#isValidPostalCode(postalCode, country))) {\n      address.postcode = postalCode;\n    }\n    \n    return address;\n  }\n  \n  /**\n   * Check if a postal code is valid for a country\n   * @param {string} postalCode - The postal code to validate\n   * @param {string} country - The country code\n   * @returns {boolean} Whether the postal code is valid\n   */\n  #isValidPostalCode(postalCode, country) {\n    // Skip validation if no postal code or country\n    if (!postalCode || !country) {\n      return true;\n    }\n    \n    // Validate based on country\n    switch (country.toUpperCase()) {\n      case 'US':\n        // US postal codes should be 5 digits or 5+4 digits\n        return /^\\d{5}(-\\d{4})?$/.test(postalCode);\n        \n      case 'CA':\n        // Canadian postal codes: A1A 1A1\n        return /^[A-Za-z]\\d[A-Za-z][ -]?\\d[A-Za-z]\\d$/.test(postalCode);\n        \n      case 'GB':\n      case 'UK':\n        // UK postal codes are complex but generally follow this pattern\n        return /^[A-Z]{1,2}[0-9][A-Z0-9]? ?[0-9][A-Z]{2}$/i.test(postalCode);\n        \n      case 'AU':\n        // Australian postal codes are 4 digits\n        return /^\\d{4}$/.test(postalCode);\n        \n      case 'NZ':\n        // New Zealand postal codes are 4 digits\n        return /^\\d{4}$/.test(postalCode);\n        \n      case 'DE':\n        // German postal codes are 5 digits\n        return /^\\d{5}$/.test(postalCode);\n        \n      case 'FR':\n        // French postal codes are 5 digits\n        return /^\\d{5}$/.test(postalCode);\n        \n      // Add more countries as needed\n        \n      default:\n        // For other countries, accept any non-empty string\n        // The API will validate if needed\n        return postalCode.trim().length > 0;\n    }\n  }\n  \n  /**\n   * Get phone number from field, handling international format\n   * @returns {string} The phone number\n   */\n  #getPhoneNumber() {\n    if (!this.#fields.phone) return '';\n    \n    // Check if we have an international telephone input instance\n    if (this.#fields.phone.iti && typeof this.#fields.phone.iti.getNumber === 'function') {\n      const number = this.#fields.phone.iti.getNumber();\n      // Only return the number if it's valid\n      if (this.#fields.phone.iti.isValidNumber()) {\n        return number;\n      }\n      return ''; // Return empty string if invalid\n    }\n    \n    // If no international telephone input, validate the number format\n    const value = this.#fields.phone.value;\n    if (!value) return '';\n    \n    // Basic phone number validation\n    const phoneRegex = /^\\+?[1-9]\\d{1,14}$/;\n    return phoneRegex.test(value.replace(/\\D/g, '')) ? value : '';\n  }\n  \n  /**\n   * Create a cart via the API\n   * @param {Object} cartData - The cart data\n   */\n  #createCartViaApi(cartData) {\n    // Check if we have access to the API client\n    if (!this.#app.api || typeof this.#app.api.createCart !== 'function') {\n      this.#logger.error('API client not available');\n      this.#cartAttempted = false; // Reset so we can try again later\n      return;\n    }\n    \n    // Log the cart data being sent\n    this.#logger.debug('Sending cart data to API', cartData);\n    \n    // Create the cart\n    this.#app.api.createCart(cartData)\n      .then(response => {\n        this.#logger.info('Prospect cart created successfully', response);\n        this.#cartCreated = true;\n        \n        // Trigger prospect cart created event\n        if (this.#app.events) {\n          this.#app.events.trigger('prospect.cartCreated', {\n            cart: response\n          });\n          \n          // Trigger begin_checkout event for analytics if not already fired\n          if (!this.#beginCheckoutFired) {\n            this.#logger.info('Triggering beginCheckout event for analytics');\n            this.#app.events.beginCheckout();\n            this.#beginCheckoutFired = true;\n          } else {\n            this.#logger.debug('beginCheckout event already fired, skipping');\n          }\n        }\n      })\n      .catch(error => {\n        this.#logger.error('Error creating prospect cart', error);\n        // Reset the attempted flag so we can try again later with different data\n        this.#cartAttempted = false;\n      });\n  }\n  \n  /**\n   * Manually trigger the beginCheckout event\n   * This can be called from outside the class if needed\n   */\n  triggerBeginCheckout() {\n    if (this.#app && this.#app.events) {\n      // Only fire if not already fired\n      if (!this.#beginCheckoutFired) {\n        this.#logger.info('Manually triggering beginCheckout event');\n        this.#app.events.beginCheckout();\n        this.#beginCheckoutFired = true;\n        return true;\n      } else {\n        this.#logger.debug('beginCheckout event already fired, skipping');\n        return false;\n      }\n    } else {\n      this.#logger.warn('Cannot trigger beginCheckout event: Events manager not available');\n      return false;\n    }\n  }\n  \n  /**\n   * Reset the beginCheckout flag\n   * This can be used if the user clears the form or starts over\n   */\n  resetBeginCheckoutFlag() {\n    this.#beginCheckoutFired = false;\n    this.#logger.debug('Reset beginCheckout flag');\n    return true;\n  }\n} ", "/**\n * CheckoutPage - Handles checkout page functionality\n * \n * This class is responsible for initializing and managing the checkout page,\n * including form validation, payment processing, and address handling.\n */\n\nimport { AddressHandler } from '../components/checkout/AddressHandler.js';\nimport { FormValidator } from '../components/checkout/FormValidator.js';\nimport { PaymentHandler } from '../components/checkout/PaymentHandler.js';\nimport { BillingAddressHandler } from '../components/checkout/BillingAddressHandler.js';\nimport { PaymentSelector } from '../components/checkout/PaymentSelector.js';\nimport { AddressAutocomplete } from '../components/checkout/AddressAutocomplete.js';\nimport { PhoneInputHandler } from '../components/checkout/PhoneInputHandler.js';\nimport { ProspectCartHandler } from '../components/checkout/ProspectCartHandler.js';\nimport { KonamiCodeHandler } from '../utils/KonamiCodeHandler.js';\n\nexport class CheckoutPage {\n  #apiClient;\n  #logger;\n  #form;\n  #app;\n  #konamiCodeHandler;\n\n  constructor(apiClient, logger, app) {\n    this.#apiClient = apiClient;\n    this.#logger = logger;\n    this.#app = app; // Store the app instance for use with ProspectCartHandler\n    this.#form = document.querySelector('form[os-checkout=\"form\"]') || document.querySelector('form#combo_form');\n    \n    if (!this.#form) {\n      this.#logger.warn('No checkout form found with [os-checkout=\"form\"] selector or form#combo_form');\n      return;\n    }\n    \n    // CRITICAL: Remove any action and set method to post to prevent URL serialization\n    this.#form.removeAttribute('action');\n    this.#form.setAttribute('method', 'post');\n    this.#form.setAttribute('novalidate', 'novalidate');\n    \n    // Add a hidden input to indicate JavaScript is enabled\n    const hiddenInput = document.createElement('input');\n    hiddenInput.type = 'hidden';\n    hiddenInput.name = 'js_enabled';\n    hiddenInput.value = 'true';\n    this.#form.appendChild(hiddenInput);\n    \n    // Add a hidden input to prevent serialization\n    const preventSerializationInput = document.createElement('input');\n    preventSerializationInput.type = 'hidden';\n    preventSerializationInput.name = 'prevent_serialization';\n    preventSerializationInput.value = 'true';\n    this.#form.appendChild(preventSerializationInput);\n    \n    // Add multiple layers of form submission prevention\n    const preventSubmit = (e) => {\n      if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n      }\n      \n      // Ensure form doesn't have action and has post method\n      this.#form.removeAttribute('action');\n      this.#form.setAttribute('method', 'post');\n      \n      // Cancel any form submission that might be in progress\n      if (typeof window.stop === 'function') {\n        window.stop();\n      }\n      \n      this.#logger.debug('Form direct submission prevented');\n      return false;\n    };\n    \n    this.#form.addEventListener('submit', preventSubmit, true);\n    this.#form.onsubmit = preventSubmit;\n    \n    // Disable all submit buttons in the form\n    this.#disableSubmitButtons();\n    \n    this.#logger.debug('CheckoutPage initialized with form found');\n    this.#initializeComponents();\n    \n    // Initialize Konami code handler\n    this.#initKonamiCodeHandler();\n  }\n\n  #initializeComponents() {\n    try {\n      // First, fix the billing form by duplicating shipping form fields\n      this.#injectBillingFormFields();\n      \n      // Initialize components one by one with proper error handling\n      this.#initAddressHandler();\n      this.#initBillingAddressHandler();\n      this.#initPaymentSelector();\n      this.#initFormValidator();\n      this.#initPaymentHandler();\n      this.#initAddressAutocomplete();\n      this.#initPhoneInputHandler();\n      this.#initProspectCartHandler();\n      \n      this.#setupEventListeners();\n      \n      document.dispatchEvent(new CustomEvent('os:checkout.ready', {\n        detail: { checkoutPage: this }\n      }));\n      \n      this.#logger.info('Checkout page components initialized successfully');\n    } catch (error) {\n      this.#logger.error('Error initializing checkout components', error);\n    }\n  }\n\n  /**\n   * Initialize the Konami code handler\n   */\n  #initKonamiCodeHandler() {\n    try {\n      // Create a new KonamiCodeHandler instance with a callback to trigger the Easter egg\n      this.#konamiCodeHandler = new KonamiCodeHandler({\n        callback: () => this.#triggerKonamiCodeEasterEgg(),\n        logger: this.#logger\n      });\n      \n      this.#logger.debug('Konami code handler initialized');\n    } catch (error) {\n      this.#logger.error('Error initializing Konami code handler:', error);\n    }\n  }\n  \n  /**\n   * Trigger the Konami code Easter egg - create a test order with predefined data\n   */\n  #triggerKonamiCodeEasterEgg() {\n    try {\n      this.#logger.info('🎮 Konami code activated! Creating test order...');\n      \n      // Show the activation message\n      const messageElement = KonamiCodeHandler.showActivationMessage();\n      \n      // Process the test payment after a short delay\n      setTimeout(() => {\n        // Remove the message\n        document.body.removeChild(messageElement);\n        \n        // Process the test payment\n        if (this.paymentHandler) {\n          // Set Konami test mode\n          KonamiCodeHandler.setTestMode();\n          \n          // Process the payment - the payment handler will detect the Konami test mode\n          this.paymentHandler.processPayment();\n          \n          this.#logger.info('Konami code test order initiated');\n        } else {\n          this.#logger.error('Payment handler not initialized, cannot create test order');\n          alert('Could not create test order: Payment handler not initialized');\n        }\n      }, 2000);\n    } catch (error) {\n      this.#logger.error('Error triggering Konami code Easter egg:', error);\n    }\n  }\n\n  #initAddressHandler() {\n    try {\n      this.addressHandler = new AddressHandler(this.#form, this.#logger);\n    } catch (error) {\n      this.#logger.error('Error initializing AddressHandler', error);\n    }\n  }\n\n  #initBillingAddressHandler() {\n    try {\n      this.billingAddressHandler = new BillingAddressHandler(this.#app);\n      \n      // Store the billing address handler on the form for access by other components\n      if (this.#form && this.billingAddressHandler) {\n        this.#form.__billingAddressHandler = this.billingAddressHandler;\n        this.#logger.debug('BillingAddressHandler initialized and attached to form');\n      }\n    } catch (error) {\n      this.#logger.error('Error initializing BillingAddressHandler', error);\n    }\n  }\n\n  #initPaymentSelector() {\n    try {\n      this.paymentSelector = new PaymentSelector(this.#logger);\n    } catch (error) {\n      this.#logger.error('Error initializing PaymentSelector', error);\n    }\n  }\n\n  #initFormValidator() {\n    try {\n      this.formValidator = new FormValidator({ \n        debugMode: window.location.search.includes('debug=true'),\n        logger: this.#logger\n      });\n      \n      if (this.#form && this.formValidator) {\n        this.#form.__formValidator = this.formValidator;\n        this.#logger.debug('FormValidator initialized and attached to form');\n      }\n    } catch (error) {\n      this.#logger.error('Error initializing FormValidator', error);\n    }\n  }\n\n  #initPaymentHandler() {\n    try {\n      this.paymentHandler = new PaymentHandler(this.#apiClient, this.#logger, this.#app);\n    } catch (error) {\n      this.#logger.error('Error initializing PaymentHandler', error);\n    }\n  }\n\n  #initAddressAutocomplete() {\n    try {\n      // Pass Google Maps options from the app instance\n      const googleMapsOptions = {\n        enableGoogleMapsAutocomplete: this.#app.options.enableGoogleMapsAutocomplete\n      };\n      \n      this.addressAutocomplete = new AddressAutocomplete(this.#logger, googleMapsOptions);\n    } catch (error) {\n      this.#logger.error('Error initializing AddressAutocomplete', error);\n    }\n  }\n\n  #initPhoneInputHandler() {\n    try {\n      this.phoneInputHandler = new PhoneInputHandler(this.#logger);\n    } catch (error) {\n      this.#logger.error('Error initializing PhoneInputHandler', error);\n    }\n  }\n\n  #initProspectCartHandler() {\n    try {\n      // Initialize the ProspectCartHandler if we have the app instance\n      if (this.#app) {\n        this.prospectCartHandler = new ProspectCartHandler(this.#app);\n        this.#logger.info('ProspectCartHandler initialized');\n      } else {\n        this.#logger.warn('App instance not provided, ProspectCartHandler not initialized');\n      }\n    } catch (error) {\n      this.#logger.error('Error initializing ProspectCartHandler', error);\n    }\n  }\n\n  /**\n   * Fix billing form by duplicating shipping form fields\n   * This ensures the billing form has the correct field attributes\n   */\n  #injectBillingFormFields() {\n    try {\n      this.#logger.info('Fixing billing form by duplicating shipping form');\n      \n      // Find the shipping form and billing container\n      const shippingForm = document.querySelector('[os-checkout-component=\"shipping-form\"]');\n      const billingContainer = document.querySelector('[os-checkout-component=\"billing-form\"]');\n      \n      // If both elements exist, proceed with duplication\n      if (shippingForm && billingContainer) {\n        // Log the found elements\n        this.#logger.info(`Found shipping form and billing container`);\n        \n        // Clone the shipping form\n        const billingForm = shippingForm.cloneNode(true);\n        \n        // Update all field attributes to billing-specific ones\n        const fieldMap = {\n          'fname': 'billing-fname',\n          'lname': 'billing-lname',\n          'address1': 'billing-address1',\n          'address2': 'billing-address2',\n          'city': 'billing-city',\n          'province': 'billing-province',\n          'postal': 'billing-postal',\n          'country': 'billing-country',\n          'phone': 'billing-phone'\n        };\n        \n        // Update all input, select fields\n        billingForm.querySelectorAll('input, select').forEach(field => {\n          const fieldAttr = field.getAttribute('os-checkout-field');\n          if (fieldAttr && fieldMap[fieldAttr]) {\n            field.setAttribute('os-checkout-field', fieldMap[fieldAttr]);\n            \n            // Also update IDs and names to avoid duplicates\n            if (field.id) {\n              field.id = 'billing_' + field.id;\n            }\n            if (field.name) {\n              field.name = 'billing_' + field.name;\n            }\n            if (field.getAttribute('data-name')) {\n              field.setAttribute('data-name', 'Billing ' + field.getAttribute('data-name'));\n            }\n            \n            // Update autocomplete attributes\n            if (field.getAttribute('autocomplete')) {\n              field.setAttribute('autocomplete', 'billing ' + field.getAttribute('autocomplete'));\n            }\n          }\n        });\n        \n        // Update location container attribute\n        const locationContainer = billingForm.querySelector('[data-os-component=\"location\"]');\n        if (locationContainer) {\n          locationContainer.setAttribute('data-os-component', 'billing-location');\n        }\n        \n        // Clear any existing content in the billing container\n        billingContainer.innerHTML = '';\n        \n        // Append the modified form to the billing container\n        billingContainer.appendChild(billingForm);\n        \n        this.#logger.info('Billing form successfully created from shipping form');\n      } else {\n        this.#logger.warn('Could not fix billing form - shipping form or billing container not found');\n        this.#logger.warn(`Shipping form found: ${!!shippingForm}, Billing container found: ${!!billingContainer}`);\n        \n        // Log all checkout components for debugging\n        const allComponents = document.querySelectorAll('[os-checkout-component]');\n        this.#logger.warn(`Found ${allComponents.length} checkout components:`);\n        allComponents.forEach(comp => {\n          this.#logger.warn(`- ${comp.getAttribute('os-checkout-component')}`);\n        });\n      }\n    } catch (error) {\n      this.#logger.error('Error fixing billing form:', error);\n    }\n  }\n\n  #setupEventListeners() {\n    try {\n      document.addEventListener('payment-method-changed', e => {\n        this.#logger.debug(`Payment method changed to: ${e.detail.mode}`);\n        const container = document.querySelector('[os-payment-mode]');\n        container?.setAttribute('os-payment-mode', e.detail.mode);\n      });\n      \n      // Ensure we're properly handling form submission\n      if (this.#form) {\n        this.#form.addEventListener('submit', e => this.#handleSubmit(e));\n        this.#logger.debug('Form submit event listener attached');\n      }\n      \n      // Listen for prospect cart created event if ProspectCartHandler is initialized\n      if (this.#app && this.#app.events && this.prospectCartHandler) {\n        this.#app.events.on('prospect.cartCreated', (data) => {\n          this.#logger.info('Prospect cart created successfully', data);\n          // You can add additional logic here if needed\n        });\n      }\n      \n      // Listen for order created event\n      if (this.#app && this.#app.events) {\n        this.#app.events.on('order.created', (data) => {\n          this.#logger.info('Order created successfully', data);\n          // You can add additional logic here if needed\n        });\n      }\n    } catch (error) {\n      this.#logger.error('Error setting up event listeners:', error);\n    }\n  }\n\n  #handleSubmit(event) {\n    // Always prevent the default form submission first\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n      event.stopImmediatePropagation();\n    }\n    \n    this.#logger.debug('Form submission intercepted by #handleSubmit');\n    \n    // Prevent any form submission\n    if (this.#form) {\n      this.#form.removeAttribute('action');\n      this.#form.setAttribute('method', 'post');\n      \n      const preventSubmit = (e) => {\n        if (e) {\n          e.preventDefault();\n          e.stopPropagation();\n          e.stopImmediatePropagation();\n        }\n        \n        // Ensure form doesn't have action and has post method\n        if (this.#form) {\n          this.#form.removeAttribute('action');\n          this.#form.setAttribute('method', 'post');\n        }\n        \n        // Cancel any form submission that might be in progress\n        if (typeof window.stop === 'function') {\n          window.stop();\n        }\n        \n        this.#logger.debug('Form direct submission prevented');\n        return false;\n      };\n      \n      this.#form.onsubmit = preventSubmit;\n    }\n    \n    if (this.formValidator && !this.formValidator.validateAllFields()) {\n      this.#logger.warn('Form validation failed, stopping submission');\n      return false;\n    }\n    \n    if (this.paymentHandler) {\n      this.#logger.debug('Delegating to paymentHandler.processPayment()');\n      this.paymentHandler.processPayment();\n    } else {\n      this.#logger.error('Payment handler not initialized');\n    }\n    \n    return false;\n  }\n\n  /**\n   * Disable all submit buttons in the form to prevent accidental form submission\n   * @private\n   */\n  #disableSubmitButtons() {\n    try {\n      if (!this.#form) return;\n      \n      // Find all submit buttons in the form\n      const submitButtons = this.#form.querySelectorAll('button[type=\"submit\"], input[type=\"submit\"]');\n      \n      if (submitButtons.length > 0) {\n        this.#logger.debug(`Found ${submitButtons.length} submit buttons, converting to type=\"button\"`);\n        \n        submitButtons.forEach((button, index) => {\n          // Change type to button\n          button.setAttribute('type', 'button');\n          \n          // Add click handler to process payment\n          button.addEventListener('click', (e) => {\n            e.preventDefault();\n            this.#logger.debug(`Submit button ${index + 1} clicked, delegating to payment handler`);\n            \n            if (this.paymentHandler) {\n              this.paymentHandler.processPayment();\n            } else {\n              this.#logger.error('Payment handler not initialized');\n            }\n          });\n          \n          this.#logger.debug(`Converted submit button ${index + 1} to type=\"button\"`);\n        });\n      } else {\n        this.#logger.debug('No submit buttons found in the form');\n      }\n    } catch (error) {\n      this.#logger.error('Error disabling submit buttons:', error);\n    }\n  }\n}", "/**\n * CampaignHelper - Utility class for working with campaign data\n * \n * This class provides helper methods for accessing and using campaign data\n * that was retrieved during initialization.\n */\n\nexport class CampaignHelper {\n  #app;\n  #logger;\n  #viewItemListFired = false;\n\n  constructor(app) {\n    this.#app = app;\n    this.#logger = app.logger.createModuleLogger('CAMPAIGN');\n  }\n\n  getCampaignData() {\n    const campaignData = this.#app.campaignData;\n    \n    // If we have campaign data and the view_item_list event hasn't been fired yet,\n    // trigger it now (but only if we have the EventManager initialized)\n    if (campaignData && !this.#viewItemListFired && this.#app.events?.viewItemList) {\n      this.#logger.debug('Triggering view_item_list event from getCampaignData');\n      console.log('🔍 Triggering view_item_list from getCampaignData', campaignData);\n      \n      // Add a small delay to ensure everything is initialized\n      setTimeout(() => {\n        this.#app.events.viewItemList(campaignData);\n        this.#viewItemListFired = true;\n        console.log('✅ view_item_list triggered from getCampaignData');\n      }, 500);\n    }\n    \n    return campaignData;\n  }\n\n  getCampaignName() {\n    return this.#app.campaignData?.name ?? '';\n  }\n\n  getCampaignId() {\n    return this.#app.campaignData?.id ?? '';\n  }\n\n  getProducts() {\n    const products = this.#app.campaignData?.products ?? [];\n    \n    // If we have products and the view_item_list event hasn't been fired yet,\n    // trigger it now (but only if we have the EventManager initialized)\n    if (products.length > 0 && !this.#viewItemListFired && this.#app.events?.viewItemList) {\n      this.#logger.debug('Triggering view_item_list event from getProducts');\n      console.log('🔍 Triggering view_item_list from getProducts', this.#app.campaignData);\n      \n      // Add a small delay to ensure everything is initialized\n      setTimeout(() => {\n        this.#app.events.viewItemList(this.#app.campaignData);\n        this.#viewItemListFired = true;\n        console.log('✅ view_item_list triggered from getProducts');\n      }, 500);\n    }\n    \n    return products;\n  }\n\n  getProductById(productId) {\n    return this.getProducts().find(product => product.id === productId);\n  }\n\n  getCurrency() {\n    return this.#app.campaignData?.currency ?? 'USD';\n  }\n\n  getLocale() {\n    return this.#app.campaignData?.locale ?? 'en-US';\n  }\n\n  formatPrice(price) {\n    if (typeof price !== 'number') return '';\n\n    try {\n      return new Intl.NumberFormat(this.getLocale(), {\n        style: 'currency',\n        currency: this.getCurrency()\n      }).format(price);\n    } catch (error) {\n      this.#logger.error('Error formatting price:', error);\n      return price.toString();\n    }\n  }\n  \n  /**\n   * Manually trigger the view_item_list event\n   */\n  triggerViewItemList() {\n    if (!this.#app.campaignData) {\n      this.#logger.warn('Cannot trigger view_item_list: No campaign data available');\n      return;\n    }\n    \n    if (!this.#app.events?.viewItemList) {\n      this.#logger.warn('Cannot trigger view_item_list: EventManager not initialized');\n      return;\n    }\n    \n    this.#logger.debug('Manually triggering view_item_list event');\n    this.#app.events.viewItemList(this.#app.campaignData);\n    this.#viewItemListFired = true;\n  }\n}", "/**\n * StateManager - Manages application state\n * \n * This class provides a centralized state management system for the application,\n * including local cart functionality. It uses a pub/sub pattern to notify\n * subscribers when state changes.\n */\n\nexport class StateManager {\n  #app;\n  #logger;\n  #state;\n  #subscribers = {};\n\n  constructor(app) {\n    this.#app = app;\n    this.#logger = app.logger.createModuleLogger('STATE');\n    this.#state = this.#initDefaultState();\n    this.#loadState();\n    this.#recalculateCart(false);\n    this.#logger.info('StateManager initialized');\n  }\n\n  #initDefaultState() {\n    return {\n      cart: {\n        items: [],\n        totals: {\n          subtotal: 0,\n          retail_subtotal: 0,\n          savings: 0,\n          savings_percentage: 0,\n          shipping: 0,\n          tax: 0,\n          total: 0,\n          recurring_total: 0,\n          currency: 'USD',\n          currency_symbol: '$'\n        },\n        shippingMethod: null,\n        couponCode: null,\n        attribution: {\n          utm_source: '',\n          utm_medium: '',\n          utm_campaign: '',\n          utm_content: '',\n          utm_term: '',\n          gclid: '',\n          fbclid: '',\n          sub1: '',\n          sub2: '',\n          sub3: '',\n          sub4: '',\n          sub5: '',\n          referrer: '',\n          landing_page: '',\n          user_agent: '',\n          device_type: '',\n          fbc: '',\n          fbp: ''\n        }\n      },\n      user: { email: null, firstName: null, lastName: null, phone: null },\n      ui: { loading: false, currentStep: 'cart', errors: {} }\n    };\n  }\n\n  #loadState() {\n    try {\n      const savedState = sessionStorage.getItem('os_state');\n      if (savedState) {\n        const parsedState = JSON.parse(savedState);\n        this.#state = { ...this.#state, ...parsedState, ui: { ...this.#state.ui } };\n        this.#logger.info('State loaded from sessionStorage');\n      }\n    } catch (error) {\n      this.#logger.error('Error loading state from sessionStorage:', error);\n    }\n  }\n\n  #saveState() {\n    try {\n      const stateToSave = {\n        cart: { ...this.#state.cart, totals: this.#calculateCartTotals() },\n        user: this.#state.user\n      };\n      sessionStorage.setItem('os_state', JSON.stringify(stateToSave));\n      this.#logger.debug('State saved to sessionStorage');\n    } catch (error) {\n      this.#logger.error('Error saving state to sessionStorage:', error);\n    }\n  }\n\n  getState(path = null) {\n    if (!path) return { ...this.#state, cart: { ...this.#state.cart, totals: this.#calculateCartTotals() } };\n    if (path === 'cart') return { ...this.#state.cart, totals: this.#calculateCartTotals() };\n    if (path === 'cart.totals' || path.startsWith('cart.totals.')) return this.#calculateCartTotals();\n\n    return path.split('.').reduce((obj, key) => obj?.[key] ?? null, this.#state);\n  }\n\n  setState(path, value, notify = true) {\n    let current = this.#state;\n    const parts = path.split('.');\n    for (const [i, part] of parts.entries()) {\n      if (i === parts.length - 1) {\n        current[part] = value;\n      } else {\n        current[part] ??= {};\n        current = current[part];\n      }\n    }\n\n    if (path.startsWith('cart.items')) this.#recalculateCart(false);\n    this.#saveState();\n    if (notify) {\n      this.#notifySubscribers(path, value);\n      if (path.startsWith('cart.items')) this.#notifySubscribers('cart', this.getState('cart'));\n    }\n    return this;\n  }\n\n  subscribe(path, callback) {\n    this.#subscribers[path] ??= [];\n    this.#subscribers[path].push(callback);\n    try {\n      callback(this.getState(path), path);\n    } catch (error) {\n      this.#logger.error(`Error in initial subscriber callback for ${path}:`, error);\n    }\n    return () => this.#subscribers[path] = this.#subscribers[path].filter(cb => cb !== callback);\n  }\n\n  #notifySubscribers(path, value) {\n    this.#logger.debug(`Notifying subscribers for path: ${path}`);\n    \n    for (const [subPath, callbacks] of Object.entries(this.#subscribers)) {\n      if (subPath === path || subPath === '*' || path.startsWith(`${subPath}.`)) {\n        const subValue = subPath === '*' ? this.getState() : this.getState(subPath);\n        callbacks.forEach(callback => {\n          try {\n            callback(subValue, subPath);\n          } catch (error) {\n            this.#logger.error(`Error in subscriber callback for ${subPath}:`, error);\n          }\n        });\n      }\n    }\n  }\n\n  clearState() {\n    this.#state = this.#initDefaultState();\n    sessionStorage.removeItem('os_state');\n    this.#notifySubscribers('*', this.#state);\n    this.#logger.info('State cleared');\n  }\n\n  addToCart(item) {\n    if (!item?.id || !item.name || item.price === undefined) {\n      this.#logger.error('Invalid item:', item);\n      throw new Error('Invalid item. Must have id, name, and price.');\n    }\n\n    const cart = this.getState('cart');\n    const packageData = this.#app.campaignData?.packages?.find(pkg => \n      pkg.ref_id.toString() === item.id.toString() || pkg.external_id?.toString() === item.id.toString()\n    );\n\n    const enhancedItem = {\n      ...item,\n      ...(packageData && {\n        name: packageData.name || item.name,\n        price: Number.parseFloat(packageData.price) || item.price,\n        price_total: Number.parseFloat(packageData.price_total) || item.price * (item.quantity || 1),\n        retail_price: Number.parseFloat(packageData.price_retail) ?? undefined,\n        retail_price_total: Number.parseFloat(packageData.price_retail_total) ?? undefined,\n        is_recurring: packageData.is_recurring ?? false,\n        price_recurring: packageData.price_recurring ? Number.parseFloat(packageData.price_recurring) : undefined,\n        price_recurring_total: packageData.price_recurring_total ? Number.parseFloat(packageData.price_recurring_total) : undefined,\n        interval: packageData.interval ?? undefined,\n        interval_count: packageData.interval_count ?? undefined,\n        image: packageData.image || item.image,\n        external_id: packageData.external_id ?? undefined\n      }),\n      quantity: item.quantity || 1\n    };\n\n    const existingItemIndex = cart.items.findIndex(i => i.id === item.id);\n    const updatedItems = existingItemIndex >= 0\n      ? this.#updateExistingItem(cart.items, existingItemIndex, enhancedItem)\n      : [...cart.items, enhancedItem];\n\n    this.setState('cart.items', updatedItems);\n    this.#logger.info(`Item added to cart: ${enhancedItem.name}`);\n    this.#app.triggerEvent('cart.updated', { cart: this.getState('cart') });\n    return this.getState('cart');\n  }\n\n  #updateExistingItem(items, index, newItem) {\n    const updatedItems = [...items];\n    updatedItems[index] = {\n      ...updatedItems[index],\n      quantity: (updatedItems[index].quantity || 1) + (newItem.quantity || 1),\n      price_total: updatedItems[index].price * (updatedItems[index].quantity || 1 + (newItem.quantity || 1)),\n      ...(updatedItems[index].retail_price && {\n        retail_price_total: updatedItems[index].retail_price * (updatedItems[index].quantity || 1 + (newItem.quantity || 1))\n      }),\n      ...(updatedItems[index].price_recurring && {\n        price_recurring_total: updatedItems[index].price_recurring * (updatedItems[index].quantity || 1 + (newItem.quantity || 1))\n      })\n    };\n    return updatedItems;\n  }\n\n  updateCartItem(itemId, updates) {\n    const cart = this.getState('cart');\n    const itemIndex = cart.items.findIndex(item => item.id === itemId);\n    if (itemIndex === -1) {\n      this.#logger.error(`Item not found in cart: ${itemId}`);\n      throw new Error(`Item not found in cart: ${itemId}`);\n    }\n\n    const updatedItems = [...cart.items];\n    updatedItems[itemIndex] = { ...updatedItems[itemIndex], ...updates };\n    if (updatedItems[itemIndex].quantity === 0) updatedItems.splice(itemIndex, 1);\n\n    this.setState('cart.items', updatedItems);\n    this.#logger.info(`Cart item updated: ${itemId}`);\n    this.#app.triggerEvent('cart.updated', { cart: this.getState('cart') });\n    return this.getState('cart');\n  }\n\n  removeFromCart(itemId) {\n    const updatedItems = this.getState('cart').items.filter(item => item.id !== itemId);\n    this.setState('cart.items', updatedItems);\n    this.#logger.info(`Item removed from cart: ${itemId}`);\n    this.#app.triggerEvent('cart.updated', { cart: this.getState('cart') });\n    return this.getState('cart');\n  }\n\n  clearCart() {\n    this.setState('cart.items', []);\n    this.setState('cart.couponCode', null);\n    this.setState('cart.shippingMethod', null);\n    this.#logger.info('Cart cleared');\n    this.#app.triggerEvent('cart.updated', { cart: this.getState('cart') });\n    return this.getState('cart');\n  }\n\n  setShippingMethod(shippingMethod) {\n    this.setState('cart.shippingMethod', shippingMethod);\n    this.#logger.info(`Shipping method set: ${shippingMethod.code}`);\n    this.#app.triggerEvent('cart.updated', { cart: this.getState('cart') });\n    return this.getState('cart');\n  }\n\n  applyCoupon(couponCode) {\n    this.setState('cart.couponCode', couponCode);\n    this.#logger.info(`Coupon applied: ${couponCode}`);\n    this.#app.triggerEvent('cart.updated', { cart: this.getState('cart') });\n    return this.getState('cart');\n  }\n\n  removeCoupon() {\n    this.setState('cart.couponCode', null);\n    this.#logger.info('Coupon removed');\n    this.#app.triggerEvent('cart.updated', { cart: this.getState('cart') });\n    return this.getState('cart');\n  }\n\n  #calculateCartTotals() {\n    const { items, shippingMethod } = this.#state.cart;\n    const subtotal = items.reduce((acc, item) => acc + (item.price * (item.quantity || 1)), 0);\n    const retailSubtotal = items.reduce((acc, item) => \n      acc + ((item.retail_price ?? item.price) * (item.quantity || 1)), 0);\n    const savings = retailSubtotal - subtotal;\n    const savingsPercentage = retailSubtotal > 0 ? (savings / retailSubtotal) * 100 : 0;\n    const recurringTotal = items.reduce((acc, item) => \n      acc + (item.is_recurring && item.price_recurring ? item.price_recurring * (item.quantity || 1) : 0), 0);\n    const shipping = shippingMethod?.price ? Number.parseFloat(shippingMethod.price) : 0;\n    const tax = 0; // Placeholder for real tax logic\n    const total = subtotal + shipping + tax;\n\n    const currency = this.#app.campaignData?.currency ?? 'USD';\n    const currencySymbol = { USD: '$', EUR: '€', GBP: '£' }[currency] ?? '$';\n\n    return {\n      subtotal,\n      retail_subtotal: retailSubtotal,\n      savings,\n      savings_percentage: savingsPercentage,\n      shipping,\n      tax,\n      total,\n      recurring_total: recurringTotal,\n      currency,\n      currency_symbol: currencySymbol\n    };\n  }\n\n  #recalculateCart(notify = true) {\n    const totals = this.#calculateCartTotals();\n    this.#state.cart.totals = totals;\n    this.#logger.debug('Cart totals recalculated');\n    if (notify) {\n      this.#notifySubscribers('cart.totals', totals);\n      this.#notifySubscribers('cart', this.getState('cart'));\n    }\n    return totals;\n  }\n\n  isItemInCart(itemId) {\n    return this.#state.cart.items.some(item => item.id === itemId);\n  }\n\n  getCartForApi() {\n    const { items, shippingMethod, couponCode, attribution } = this.getState('cart');\n    const { email, firstName, lastName, phone } = this.getState('user');\n    return {\n      lines: items.map(item => ({ product_id: item.id, quantity: item.quantity || 1, price: item.price })),\n      shipping_method: shippingMethod?.code ?? null,\n      coupon_code: couponCode,\n      user: { email, first_name: firstName, last_name: lastName, phone },\n      attribution: attribution || {}\n    };\n  }\n\n  async syncCartWithApi() {\n    try {\n      this.setState('ui.loading', true);\n      const apiCart = this.getCartForApi();\n      const response = await this.#app.api.createCart(apiCart);\n      this.#logger.info('Cart synced with API');\n      this.#app.triggerEvent('cart.synced', { cart: response });\n      return response;\n    } catch (error) {\n      this.#logger.error('Error syncing cart with API:', error);\n      this.setState('ui.errors.cart', error.message);\n      throw error;\n    } finally {\n      this.setState('ui.loading', false);\n    }\n  }\n}", "/**\n * CartManager - Manages cart operations\n * \n * This class provides a simplified interface for cart operations,\n * using the StateManager for state management.\n */\n\nexport class CartManager {\n  #app;\n  #stateManager;\n  #logger;\n  #cartElements;\n\n  constructor(app) {\n    this.#app = app;\n    this.#stateManager = app.state;\n    this.#logger = app.logger.createModuleLogger('CART');\n    this.#initCartUI();\n    this.#logger.info('CartManager initialized');\n  }\n\n  #initCartUI() {\n    this.#cartElements = {\n      addToCartButtons: document.querySelectorAll('[data-os-add-to-cart]'),\n      cartCount: document.querySelectorAll('[data-os-cart-count]'),\n      cartTotal: document.querySelectorAll('[data-os-cart-total]'),\n      cartItems: document.querySelector('[data-os-cart-items]'),\n      cartEmpty: document.querySelector('[data-os-cart-empty]'),\n      cartContainer: document.querySelector('[data-os-cart-container]')\n    };\n\n    this.#cartElements.addToCartButtons.forEach(button => {\n      button.addEventListener('click', event => {\n        event.preventDefault();\n        const item = {\n          id: button.getAttribute('data-os-product-id'),\n          name: button.getAttribute('data-os-product-name'),\n          price: Number.parseFloat(button.getAttribute('data-os-product-price')),\n          quantity: Number.parseInt(button.getAttribute('data-os-product-quantity') ?? '1', 10)\n        };\n        if (item.id && item.name && item.price) this.#addToCart(item);\n        else this.#logger.error('Invalid product data for add to cart button');\n      });\n    });\n\n    this.#stateManager.subscribe('cart', () => this.#updateCartUI());\n    this.#updateCartUI();\n  }\n\n  #updateCartUI() {\n    const cart = this.#stateManager.getState('cart');\n\n    this.#cartElements.cartCount.forEach(element => {\n      const itemCount = cart.items.reduce((count, item) => count + (item.quantity || 1), 0);\n      element.textContent = itemCount.toString();\n      element.classList.toggle('hidden', itemCount === 0);\n    });\n\n    const formatPrice = price => this.#app.campaign?.formatPrice(price) ?? price.toFixed(2);\n    this.#cartElements.cartTotal.forEach(element => element.textContent = formatPrice(cart.totals.total));\n\n    const updateElement = (selector, value, hideIfZero = false) => {\n      const element = document.querySelector(selector);\n      if (element) {\n        element.textContent = hideIfZero ? `${Math.round(value)}%` : formatPrice(value);\n        if (hideIfZero && value === 0) element.parentElement?.classList.add('hidden');\n        else element.parentElement?.classList.remove('hidden');\n      }\n    };\n\n    updateElement('[data-os-cart-retail-subtotal]', cart.totals.retail_subtotal);\n    updateElement('[data-os-cart-savings]', cart.totals.savings, true);\n    updateElement('[data-os-cart-savings-percentage]', cart.totals.savings_percentage, true);\n    updateElement('[data-os-cart-recurring-total]', cart.totals.recurring_total, true);\n    updateElement('[data-os-cart-subtotal]', cart.totals.subtotal);\n    updateElement('[data-os-cart-shipping]', cart.totals.shipping);\n\n    if (this.#cartElements.cartItems) {\n      this.#cartElements.cartItems.innerHTML = '';\n      cart.items.forEach(item => this.#cartElements.cartItems.appendChild(this.#createCartItemElement(item)));\n    }\n\n    if (this.#cartElements.cartEmpty && this.#cartElements.cartContainer) {\n      const isEmpty = cart.items.length === 0;\n      this.#cartElements.cartEmpty.classList.toggle('hidden', !isEmpty);\n      this.#cartElements.cartContainer.classList.toggle('hidden', isEmpty);\n    }\n  }\n\n  #createCartItemElement(item) {\n    const formatPrice = price => this.#app.campaign?.formatPrice(price) ?? price.toFixed(2);\n    const itemElement = document.createElement('div');\n    itemElement.className = 'os-cart-item';\n    itemElement.setAttribute('data-os-cart-item-id', item.id);\n\n    const price = formatPrice(item.price);\n    const retailPrice = item.retail_price ? formatPrice(item.retail_price) : '';\n    const total = formatPrice(item.price * (item.quantity || 1));\n    const savings = item.retail_price ? (item.retail_price - item.price) * (item.quantity || 1) : 0;\n    const savingsHtml = savings ? `\n      <div class=\"os-cart-item-savings\">\n        <span class=\"os-cart-item-savings-label\">You save:</span>\n        <span class=\"os-cart-item-savings-value\">${formatPrice(savings)} (${Math.round(savings / (item.retail_price * (item.quantity || 1)) * 100)}%)</span>\n      </div>\n    ` : '';\n    const recurringHtml = item.is_recurring && item.price_recurring ? `\n      <div class=\"os-cart-item-recurring\">\n        <span class=\"os-cart-item-recurring-label\">Recurring:</span>\n        <span class=\"os-cart-item-recurring-value\">${formatPrice(item.price_recurring)} ${item.interval_count > 1 ? `every ${item.interval_count} ${item.interval}s` : `per ${item.interval}`}</span>\n      </div>\n    ` : '';\n    const imageHtml = item.image ? `\n      <div class=\"os-cart-item-image\">\n        <img src=\"${item.image}\" alt=\"${item.name}\" />\n      </div>\n    ` : '';\n\n    itemElement.innerHTML = `\n      ${imageHtml}\n      <div class=\"os-cart-item-details\">\n        <div class=\"os-cart-item-name\">${item.name}</div>\n        <div class=\"os-cart-item-price-container\">\n          <div class=\"os-cart-item-price\">${price}</div>\n          ${retailPrice ? `<div class=\"os-cart-item-retail-price\">${retailPrice}</div>` : ''}\n        </div>\n        ${savingsHtml}\n        ${recurringHtml}\n      </div>\n      <div class=\"os-cart-item-quantity\">\n        <button class=\"os-cart-item-decrease\" data-os-cart-decrease=\"${item.id}\">-</button>\n        <span class=\"os-cart-item-quantity-value\">${item.quantity || 1}</span>\n        <button class=\"os-cart-item-increase\" data-os-cart-increase=\"${item.id}\">+</button>\n      </div>\n      <div class=\"os-cart-item-total\">${total}</div>\n      <button class=\"os-cart-item-remove\" data-os-cart-remove=\"${item.id}\">×</button>\n    `;\n\n    itemElement.querySelector(`[data-os-cart-decrease=\"${item.id}\"]`)?.addEventListener('click', () => this.#updateCartItemQuantity(item.id, (item.quantity || 1) - 1));\n    itemElement.querySelector(`[data-os-cart-increase=\"${item.id}\"]`)?.addEventListener('click', () => this.#updateCartItemQuantity(item.id, (item.quantity || 1) + 1));\n    itemElement.querySelector(`[data-os-cart-remove=\"${item.id}\"]`)?.addEventListener('click', () => this.#removeFromCart(item.id));\n\n    return itemElement;\n  }\n\n  #addToCart(item) {\n    try {\n      const result = this.#stateManager.addToCart(item);\n      // this.#showMessage(`${item.name} added to cart`);\n      return result;\n    } catch (error) {\n      this.#logger.error('Error adding item to cart:', error);\n      // this.#showMessage('Error adding item to cart', 'error');\n      throw error;\n    }\n  }\n\n  #updateCartItemQuantity(itemId, quantity) {\n    try {\n      return quantity <= 0 ? this.#removeFromCart(itemId) : this.#stateManager.updateCartItem(itemId, { quantity });\n    } catch (error) {\n      this.#logger.error('Error updating cart item quantity:', error);\n      // this.#showMessage('Error updating cart', 'error');\n      throw error;\n    }\n  }\n\n  #removeFromCart(itemId) {\n    try {\n      return this.#stateManager.removeFromCart(itemId);\n    } catch (error) {\n      this.#logger.error('Error removing item from cart:', error);\n      // this.#showMessage('Error removing item from cart', 'error');\n      throw error;\n    }\n  }\n\n  clearCart() {\n    try {\n      return this.#stateManager.clearCart();\n    } catch (error) {\n      this.#logger.error('Error clearing cart:', error);\n      // this.#showMessage('Error clearing cart', 'error');\n      throw error;\n    }\n  }\n\n  addToCart(item) {\n    return this.#addToCart(item);\n  }\n\n  removeFromCart(itemId) {\n    return this.#removeFromCart(itemId);\n  }\n\n  setShippingMethod(shippingMethod) {\n    try {\n      return this.#stateManager.setShippingMethod(shippingMethod);\n    } catch (error) {\n      this.#logger.error('Error setting shipping method:', error);\n      // this.#showMessage('Error setting shipping method', 'error');\n      throw error;\n    }\n  }\n\n  applyCoupon(couponCode) {\n    try {\n      return this.#stateManager.applyCoupon(couponCode);\n    } catch (error) {\n      this.#logger.error('Error applying coupon:', error);\n      // this.#showMessage('Error applying coupon', 'error');\n      throw error;\n    }\n  }\n\n  removeCoupon() {\n    try {\n      return this.#stateManager.removeCoupon();\n    } catch (error) {\n      this.#logger.error('Error removing coupon:', error);\n      // this.#showMessage('Error removing coupon', 'error');\n      throw error;\n    }\n  }\n\n  async syncCartWithApi() {\n    try {\n      return await this.#stateManager.syncCartWithApi();\n    } catch (error) {\n      this.#logger.error('Error syncing cart with API:', error);\n      // this.#showMessage('Error syncing cart with server', 'error');\n      throw error;\n    }\n  }\n\n  isItemInCart(itemId) {\n    return this.#stateManager.isItemInCart?.(itemId) ?? this.#stateManager.getState('cart').items.some(item => item.id === itemId);\n  }\n\n  // #showMessage(message, type = 'success') {\n  //   const messageElement = document.createElement('div');\n  //   messageElement.className = `os-message os-message-${type}`;\n  //   messageElement.textContent = message;\n  //   document.body.appendChild(messageElement);\n  //   setTimeout(() => {\n  //     messageElement.classList.add('os-message-hide');\n  //     setTimeout(() => document.body.removeChild(messageElement), 300);\n  //   }, 3000);\n  // }\n}", "/**\n * DebugUtils - Utilities for debugging components\n */\n\nexport class DebugUtils {\n  static #debugStylesInjected = false;\n  static #isDebugMode = false;\n  static #xrayEnabled = false;\n  static #overlays = [];\n\n  /**\n   * Initialize debug mode by checking URL parameters\n   * @returns {boolean} Whether debug mode is enabled\n   */\n  static initDebugMode() {\n    const urlParams = new URLSearchParams(window.location.search);\n    this.#isDebugMode = urlParams.get('debugger') === 'true';\n    \n    if (this.#isDebugMode && !this.#debugStylesInjected) {\n      this.injectDebugStyles();\n      this.#xrayEnabled = localStorage.getItem('os_debug_xray_enabled') === 'true';\n    }\n    \n    return this.#isDebugMode;\n  }\n\n  /**\n   * Check if debug mode is enabled\n   * @returns {boolean} Whether debug mode is enabled\n   */\n  static isDebugMode() {\n    return this.#isDebugMode;\n  }\n\n  /**\n   * Check if X-ray mode is enabled\n   * @returns {boolean} Whether X-ray mode is enabled\n   */\n  static isXrayEnabled() {\n    return this.#xrayEnabled;\n  }\n\n  /**\n   * Toggle X-ray mode on or off\n   * @param {boolean} enabled - Whether to enable X-ray mode\n   * @returns {boolean} The new state of X-ray mode\n   */\n  static toggleXray(enabled = !this.#xrayEnabled) {\n    if (!this.#isDebugMode) return false;\n    \n    this.#xrayEnabled = enabled;\n    localStorage.setItem('os_debug_xray_enabled', this.#xrayEnabled.toString());\n    \n    // Toggle visibility of all overlays\n    this.#overlays.forEach(overlay => {\n      overlay.style.display = this.#xrayEnabled ? 'block' : 'none';\n    });\n    \n    return this.#xrayEnabled;\n  }\n\n  /**\n   * Inject debug styles into the document head\n   */\n  static injectDebugStyles() {\n    if (this.#debugStylesInjected) return;\n    \n    const styleElement = document.createElement('style');\n    styleElement.id = 'os-debug-styles';\n    styleElement.textContent = `\n      /* Common debug styles */\n      .os-debug-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        pointer-events: none;\n        z-index: 9999;\n        border: 2px dashed rgba(255, 0, 0, 0.7);\n        box-sizing: border-box;\n      }\n      .os-debug-label {\n        position: absolute;\n        top: 0;\n        right: 0;\n        background-color: rgba(0, 0, 0, 0.7);\n        color: white;\n        font-size: 12px;\n        padding: 2px 6px;\n        border-radius: 0 0 0 4px;\n        font-family: monospace;\n        z-index: 10000;\n      }\n      \n      /* Selector-specific styles */\n      .os-debug-card-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        pointer-events: none;\n        z-index: 9998;\n        border: 1px solid rgba(0, 255, 255, 0.7);\n        box-sizing: border-box;\n      }\n      .os-debug-card-label {\n        position: absolute;\n        top: 0;\n        right: 0;\n        background-color: rgba(0, 0, 0, 0.7);\n        color: white;\n        font-size: 10px;\n        padding: 1px 4px;\n        border-radius: 0 0 0 4px;\n        font-family: monospace;\n        z-index: 9999;\n      }\n      .os--selected .os-debug-card-overlay {\n        border: 2px solid rgba(0, 255, 0, 0.9);\n      }\n      .os--active .os-debug-card-overlay {\n        background-color: rgba(255, 255, 0, 0.2);\n      }\n      \n      /* Toggle-specific styles */\n      .os-debug-toggle-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        pointer-events: none;\n        z-index: 9998;\n        border: 1px solid rgba(255, 165, 0, 0.7);\n        box-sizing: border-box;\n      }\n      .os-debug-toggle-label {\n        position: absolute;\n        top: 0;\n        right: 0;\n        background-color: rgba(0, 0, 0, 0.7);\n        color: white;\n        font-size: 10px;\n        padding: 1px 4px;\n        border-radius: 0 0 0 4px;\n        font-family: monospace;\n        z-index: 9999;\n      }\n      [data-os-active=\"true\"] .os-debug-toggle-overlay {\n        background-color: rgba(255, 165, 0, 0.3);\n        border: 2px solid rgba(255, 165, 0, 0.9);\n      }\n      \n      /* Upsell styles */\n      .os-debug-upsell-overlay {\n        border: 2px dashed rgba(76, 175, 80, 0.9) !important;\n      }\n      .os-debug-upsell-label {\n        background-color: rgba(76, 175, 80, 0.9) !important;\n      }\n      .os-debug-upsell-badge {\n        display: inline-block;\n        background-color: rgba(76, 175, 80, 0.9);\n        color: white;\n        font-size: 9px;\n        padding: 1px 3px;\n        border-radius: 2px;\n        margin-left: 4px;\n        vertical-align: middle;\n      }\n      \n      /* Debug bar styles */\n      .os-debug-bar {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        background-color: rgba(33, 33, 33, 0.9);\n        color: white;\n        font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\n        font-size: 14px;\n        z-index: 10001;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 8px 16px;\n        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);\n      }\n      \n      .os-debug-bar-title {\n        font-weight: 600;\n        margin-right: 20px;\n      }\n      \n      .os-debug-bar-controls {\n        display: flex;\n        align-items: center;\n      }\n      \n      .os-debug-bar-control {\n        margin: 0 10px;\n        display: flex;\n        align-items: center;\n      }\n      \n      .os-debug-bar-toggle {\n        position: relative;\n        display: inline-block;\n        width: 40px;\n        height: 20px;\n        margin-left: 8px;\n      }\n      \n      .os-debug-bar-toggle input {\n        opacity: 0;\n        width: 0;\n        height: 0;\n      }\n      \n      .os-debug-bar-slider {\n        position: absolute;\n        cursor: pointer;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: #ccc;\n        transition: .4s;\n        border-radius: 20px;\n      }\n      \n      .os-debug-bar-slider:before {\n        position: absolute;\n        content: \"\";\n        height: 16px;\n        width: 16px;\n        left: 2px;\n        bottom: 2px;\n        background-color: white;\n        transition: .4s;\n        border-radius: 50%;\n      }\n      \n      input:checked + .os-debug-bar-slider {\n        background-color: #2196F3;\n      }\n      \n      input:checked + .os-debug-bar-slider:before {\n        transform: translateX(20px);\n      }\n      \n      .os-debug-bar-button {\n        background-color: #2196F3;\n        color: white;\n        border: none;\n        border-radius: 4px;\n        padding: 4px 10px;\n        font-size: 12px;\n        cursor: pointer;\n        margin-left: 10px;\n      }\n      \n      .os-debug-bar-button:hover {\n        background-color: #0b7dda;\n      }\n    `;\n    \n    document.head.appendChild(styleElement);\n    this.#debugStylesInjected = true;\n  }\n\n  /**\n   * Add a debug overlay to an element\n   * @param {HTMLElement} element - The element to add the overlay to\n   * @param {string} id - The ID to display\n   * @param {string} type - The type of element\n   * @param {Object} additionalInfo - Additional information to display\n   */\n  static addDebugOverlay(element, id, type, additionalInfo = {}) {\n    if (!this.#isDebugMode) return;\n    \n    // Make sure the element has position relative for absolute positioning of the overlay\n    const computedStyle = window.getComputedStyle(element);\n    if (computedStyle.position === 'static') {\n      element.style.position = 'relative';\n    }\n\n    const overlay = document.createElement('div');\n    overlay.className = `os-debug-${type}-overlay`;\n    \n    const label = document.createElement('div');\n    label.className = `os-debug-${type}-label`;\n    \n    // Check if this is an upsell element\n    const isUpsell = additionalInfo.Upsell === 'Yes';\n    if (isUpsell) {\n      overlay.classList.add('os-debug-upsell-overlay');\n      label.classList.add('os-debug-upsell-label');\n    }\n    \n    // Build label text\n    let labelText = `ID: ${id}`;\n    \n    // Add additional info\n    Object.entries(additionalInfo).forEach(([key, value]) => {\n      // Add upsell badge if this is the upsell property\n      if (key === 'Upsell' && value === 'Yes') {\n        labelText += ` | ${key}: <span class=\"os-debug-upsell-badge\">UPSELL</span>`;\n      } else {\n        labelText += ` | ${key}: ${value}`;\n      }\n    });\n    \n    label.innerHTML = labelText;\n    \n    // Set initial visibility based on X-ray mode\n    if (!this.#xrayEnabled) {\n      overlay.style.display = 'none';\n      label.style.display = 'none';\n    }\n    \n    element.appendChild(overlay);\n    element.appendChild(label);\n    \n    // Track overlays for toggling\n    this.#overlays.push(overlay);\n    this.#overlays.push(label);\n  }\n} ", "/**\n * SelectorManager - Manages selector components\n */\n\nimport { DebugUtils } from '../utils/DebugUtils.js';\n\nexport class SelectorManager {\n  #app;\n  #logger;\n  #selectors = {};\n  #selectedItems = {};\n  #isDebugMode = false;\n\n  constructor(app) {\n    this.#app = app;\n    this.#logger = app.logger.createModuleLogger('SELECTOR');\n    this.#isDebugMode = DebugUtils.initDebugMode();\n    this.#initSelectors();\n    this.#logger.info('SelectorManager initialized');\n    if (this.#isDebugMode) {\n      this.#logger.info('Debug mode enabled for selectors');\n    }\n  }\n\n  #initSelectors() {\n    document.querySelectorAll('[data-os-component=\"selector\"][data-os-selection-mode=\"swap\"]').forEach(selector => this.#initSelector(selector));\n    setTimeout(() => this.#syncWithCart(), 0);\n    this.#app.state?.subscribe('cart', () => this.#syncWithCart());\n  }\n\n  #initSelector(selectorElement) {\n    const selectorId = selectorElement.getAttribute('data-os-id');\n    if (!selectorId) {\n      this.#logger.warn('Selector missing data-os-id', selectorElement);\n      return;\n    }\n\n    const mode = selectorElement.getAttribute('data-os-selection-mode') || 'swap';\n    \n    this.#selectors[selectorId] = { \n      element: selectorElement, \n      items: [],\n      mode\n    };\n    \n    this.#selectedItems[selectorId] = null;\n    selectorElement.querySelectorAll('[data-os-element=\"card\"]').forEach(card => this.#initCard(selectorId, card));\n    \n    if (this.#isDebugMode) {\n      DebugUtils.addDebugOverlay(selectorElement, selectorId, 'overlay', { 'Mode': mode });\n    }\n  }\n\n  #initCard(selectorId, cardElement) {\n    const packageId = cardElement.getAttribute('data-os-package');\n    if (!packageId) {\n      this.#logger.warn('Card missing data-os-package', cardElement);\n      return;\n    }\n\n    const priceElement = cardElement.querySelector('.pb-quantity__price.pb--current');\n    const priceText = priceElement?.textContent.trim() ?? '$0.00 USD';\n    const price = Number.parseFloat(priceText.match(/\\$(\\d+\\.\\d+)/)?.[1] ?? '0');\n\n    const nameElement = cardElement.querySelector('.card-title');\n    const name = nameElement?.textContent.trim() ?? `Package ${packageId}`;\n\n    const quantity = Number.parseInt(cardElement.getAttribute('data-os-quantity') ?? '1', 10);\n    const isPreSelected = cardElement.getAttribute('data-os-selected') === 'true';\n\n    const item = {\n      element: cardElement,\n      packageId,\n      quantity,\n      price,\n      name,\n      isPreSelected\n    };\n\n    this.#selectors[selectorId].items.push(item);\n    cardElement.addEventListener('click', () => this.#handleClick(selectorId, item));\n    \n    if (this.#isDebugMode) {\n      DebugUtils.addDebugOverlay(cardElement, packageId, 'card', {\n        'Price': `$${price}`,\n        'Qty': quantity,\n        'PreSel': isPreSelected ? 'Yes' : 'No'\n      });\n    }\n  }\n\n  #handleClick(selectorId, item) {\n    const previous = this.#selectedItems[selectorId];\n    this.#selectItem(selectorId, item);\n    this.#updateCart(selectorId, previous);\n  }\n\n  #selectItem(selectorId, item) {\n    if (this.#selectedItems[selectorId] === item) return;\n\n    this.#selectors[selectorId].items.forEach(i => {\n      i.element.classList.remove('os--selected');\n      i.element.setAttribute('data-os-selected', 'false');\n      i.isSelected = false;\n    });\n\n    item.element.classList.add('os--selected');\n    item.element.setAttribute('data-os-selected', 'true');\n    item.isSelected = true;\n    this.#selectedItems[selectorId] = item;\n    this.#logger.debug(`Selected item ${item.packageId} in selector ${selectorId}`);\n  }\n\n  #updateCart(selectorId, previousItem) {\n    if (!this.#app.cart) {\n      this.#logger.error('Cart manager not available');\n      return;\n    }\n\n    const selected = this.#selectedItems[selectorId];\n    if (!selected) return;\n\n    if (previousItem && previousItem.packageId !== selected.packageId) {\n      this.#removeItemFromCart(previousItem);\n    }\n\n    if (!this.#app.cart.isItemInCart(selected.packageId)) {\n      this.#addItemToCart(selected);\n    }\n  }\n\n  #addItemToCart(item) {\n    if (!this.#app.cart) {\n      this.#logger.error('Cart manager not available in addItemToCart');\n      return;\n    }\n    if (typeof this.#app.cart.addToCart !== 'function') {\n      this.#logger.error('addToCart is not a function on this.#app.cart:', this.#app.cart);\n      return;\n    }\n\n    this.#logger.info(`Adding item ${item.packageId} to cart`);\n    this.#app.cart.addToCart({\n      id: item.packageId,\n      name: item.name,\n      price: item.price,\n      quantity: item.quantity,\n      type: 'package'\n    });\n\n    item.element.classList.add('os--active');\n    item.element.setAttribute('data-os-active', 'true');\n  }\n\n  #removeItemFromCart(item) {\n    if (!this.#app.cart) {\n      this.#logger.error('Cart manager not available in removeItemFromCart');\n      return;\n    }\n    if (typeof this.#app.cart.removeFromCart !== 'function') {\n      this.#logger.error('removeFromCart is not a function on this.#app.cart:', this.#app.cart);\n      return;\n    }\n\n    this.#logger.info(`Removing item ${item.packageId} from cart`);\n    this.#app.cart.removeFromCart(item.packageId);\n\n    item.element.classList.remove('os--active');\n    item.element.setAttribute('data-os-active', 'false');\n  }\n\n  #syncWithCart() {\n    if (!this.#app.cart) {\n      this.#logger.debug('Cart manager not available for sync');\n      return;\n    }\n\n    const cart = this.#app.state?.getState('cart');\n    if (!cart) {\n      this.#logger.debug('Cart state not available');\n      return;\n    }\n\n    this.#logger.debug('Syncing with cart, this.#app.cart:', this.#app.cart);\n\n    Object.keys(this.#selectors).forEach(selectorId => {\n      const items = this.#selectors[selectorId].items;\n      const cartItemsInSelector = items.filter(item => this.#app.cart.isItemInCart(item.packageId));\n\n      if (cartItemsInSelector.length > 0) {\n        const itemInCart = cartItemsInSelector[0];\n        this.#selectItem(selectorId, itemInCart);\n        cartItemsInSelector.forEach(item => {\n          if (item.packageId !== itemInCart.packageId) this.#removeItemFromCart(item);\n        });\n      } else if (!this.#selectedItems[selectorId]) {\n        const preSelected = items.find(item => item.isPreSelected);\n        if (preSelected) {\n          this.#selectItem(selectorId, preSelected);\n          this.#addItemToCart(preSelected);\n        }\n      }\n\n      items.forEach(item => {\n        const isInCart = this.#app.cart.isItemInCart(item.packageId);\n        item.element.classList.toggle('os--active', isInCart);\n        item.element.setAttribute('data-os-active', isInCart.toString());\n      });\n    });\n  }\n}", "/**\n * ToggleManager - Manages toggle item buttons in the DOM\n * \n * This class handles toggle item buttons that can add/remove items from the cart.\n */\n\nimport { DebugUtils } from '../utils/DebugUtils.js';\n\nexport class ToggleManager {\n  #toggleItems = {};\n  #app;\n  #logger;\n  #isDebugMode = false;\n\n  constructor(app) {\n    this.#app = app;\n    this.#logger = app.logger.createModuleLogger('TOGGLE');\n    this.#isDebugMode = DebugUtils.initDebugMode();\n    this.#initToggleItems();\n    this.#app.state.subscribe('cart', () => this.#updateAllToggleItemsUI());\n    this.#logger.info('ToggleManager initialized');\n    if (this.#isDebugMode) {\n      this.#logger.info('Debug mode enabled for toggle items');\n    }\n  }\n\n  #initToggleItems() {\n    const toggleElements = document.querySelectorAll('[data-os-action=\"toggle-item\"]');\n    \n    if (!toggleElements.length) {\n      this.#logger.debug('No toggle item buttons found in the DOM');\n      return;\n    }\n    \n    this.#logger.info(`Found ${toggleElements.length} toggle item buttons`);\n    toggleElements.forEach(element => this.#initToggleItem(element));\n  }\n\n  #initToggleItem(toggleElement) {\n    const packageId = toggleElement.getAttribute('data-os-package');\n    if (!packageId) {\n      this.#logger.warn('Toggle item missing data-os-package attribute', toggleElement);\n      return;\n    }\n\n    const quantity = Number.parseInt(toggleElement.getAttribute('data-os-quantity') ?? '1', 10);\n    const toggleId = toggleElement.getAttribute('data-os-id') ?? `toggle-${packageId}`;\n\n    this.#toggleItems[toggleId] = { element: toggleElement, packageId, quantity };\n    this.#updateToggleItemUI(toggleElement, packageId);\n\n    toggleElement.addEventListener('click', event => {\n      event.preventDefault();\n      this.#toggleItem(toggleId);\n    });\n\n    if (this.#isDebugMode) {\n      this.#addDebugOverlay(toggleElement, toggleId, packageId, quantity);\n    }\n\n    this.#logger.debug(`Initialized toggle item ${toggleId} for package ${packageId}`);\n  }\n\n  #addDebugOverlay(element, toggleId, packageId, quantity) {\n    const packageData = this.#getPackageDataFromCampaign(packageId);\n    const price = packageData ? packageData.price : 'N/A';\n    \n    // Check if this is an upsell toggle\n    const isUpsell = element.hasAttribute('data-os-upsell') ? \n      element.getAttribute('data-os-upsell') === 'true' : \n      (element.closest('[data-os-upsell-section]') !== null);\n    \n    DebugUtils.addDebugOverlay(element, toggleId, 'toggle', {\n      'Package': packageId,\n      'Qty': quantity,\n      'Price': price,\n      'Upsell': isUpsell ? 'Yes' : 'No'\n    });\n  }\n\n  #toggleItem(toggleId) {\n    const toggleItem = this.#toggleItems[toggleId];\n    if (!toggleItem) {\n      this.#logger.error(`Toggle item ${toggleId} not found`);\n      return;\n    }\n\n    const { packageId, quantity, element } = toggleItem;\n    const isInCart = this.#isItemInCart(packageId);\n\n    if (isInCart) {\n      this.#removeItemFromCart(packageId);\n      this.#logger.info(`Toggled OFF item ${packageId}`);\n    } else {\n      const packageData = this.#getPackageDataFromCampaign(packageId);\n      if (!packageData) {\n        this.#logger.error(`Package ${packageId} not found in campaign data`);\n        return;\n      }\n\n      // Check if this is an upsell toggle\n      const isUpsell = element.hasAttribute('data-os-upsell') ? \n        element.getAttribute('data-os-upsell') === 'true' : \n        (element.closest('[data-os-upsell-section]') !== null);\n\n      this.#addItemToCart({\n        id: packageId,\n        name: packageData.name,\n        price: Number.parseFloat(packageData.price),\n        quantity,\n        type: 'package',\n        is_upsell: isUpsell\n      });\n      \n      this.#logger.info(`Toggled ON item ${packageId}${isUpsell ? ' (upsell)' : ''}`);\n    }\n\n    this.#updateToggleItemUI(element, packageId);\n    this.#app.triggerEvent('toggle.changed', { toggleId, packageId, isActive: !isInCart });\n  }\n\n  #getPackageDataFromCampaign(packageId) {\n    if (!this.#app.campaignData?.packages) {\n      this.#logger.error('Campaign data not available');\n      return null;\n    }\n    \n    return this.#app.campaignData.packages.find(pkg => pkg.ref_id.toString() === packageId.toString()) ?? null;\n  }\n\n  #updateToggleItemUI(element, packageId) {\n    const isInCart = this.#isItemInCart(packageId);\n    element.classList.toggle('os--active', isInCart);\n    element.setAttribute('data-os-active', isInCart.toString());\n  }\n\n  #updateAllToggleItemsUI() {\n    Object.values(this.#toggleItems).forEach(({ element, packageId }) => \n      this.#updateToggleItemUI(element, packageId)\n    );\n  }\n\n  #isItemInCart(itemId) {\n    return this.#app.state.getState('cart').items.some(item => item.id === itemId);\n  }\n\n  #addItemToCart(item) {\n    if (!this.#app.cart) {\n      this.#logger.error('Cart manager not available');\n      return;\n    }\n    this.#app.cart.addToCart(item);\n  }\n\n  #removeItemFromCart(itemId) {\n    if (!this.#app.cart) {\n      this.#logger.error('Cart manager not available');\n      return;\n    }\n    this.#app.cart.removeFromCart(itemId);\n  }\n}", "/**\n * DebugManager - Provides debugging tools for developers\n * \n * This class provides debugging tools for developers, including a mini-cart widget\n * that can be toggled via console commands.\n */\n\nimport { DebugUtils } from '../utils/DebugUtils.js';\n\nexport class DebugManager {\n  #app;\n  #logger;\n  #miniCartVisible = false;\n  #miniCartElement = null;\n  #debugBarElement = null;\n  #isDebugMode = false;\n\n  constructor(app) {\n    this.#app = app;\n    this.#logger = app.logger.createModuleLogger('DEBUG');\n    this.#isDebugMode = DebugUtils.initDebugMode();\n    this.#init();\n    this.#logger.info('DebugManager initialized');\n  }\n\n  #init() {\n    // Expose debug methods to window object\n    window.showMiniCart = () => this.#showMiniCart();\n    window.hideMiniCart = () => this.#hideMiniCart();\n    window.toggleMiniCart = () => this.#toggleMiniCart();\n    window.toggleXray = (enabled) => this.#toggleXray(enabled);\n\n    // Check for URL parameter ?debugger=true\n    if (this.#isDebugMode) {\n      this.#logger.info('Debug mode activated via URL parameter');\n      this.#createDebugBar();\n      \n      // Show mini-cart if it was previously visible\n      if (localStorage.getItem('os_debug_mini_cart_visible') === 'true') {\n        this.#showMiniCart();\n      }\n    }\n\n    this.#app.state?.subscribe('cart', () => {\n      if (this.#miniCartVisible) this.#updateMiniCart();\n    });\n\n    this.#logger.debug('Debug methods exposed to window object');\n  }\n\n  #createDebugBar() {\n    if (this.#debugBarElement) return;\n\n    const debugBar = document.createElement('div');\n    debugBar.className = 'os-debug-bar';\n\n    // Left section with title\n    const leftSection = document.createElement('div');\n    leftSection.className = 'os-debug-bar-left';\n    \n    const title = document.createElement('span');\n    title.className = 'os-debug-bar-title';\n    title.textContent = '29next Debug Tools';\n    \n    leftSection.appendChild(title);\n\n    // Right section with controls\n    const rightSection = document.createElement('div');\n    rightSection.className = 'os-debug-bar-controls';\n\n    // X-ray toggle\n    const xrayControl = document.createElement('div');\n    xrayControl.className = 'os-debug-bar-control';\n    \n    const xrayLabel = document.createElement('span');\n    xrayLabel.textContent = 'X-ray View';\n    \n    const xrayToggle = document.createElement('label');\n    xrayToggle.className = 'os-debug-bar-toggle';\n    \n    const xrayCheckbox = document.createElement('input');\n    xrayCheckbox.type = 'checkbox';\n    xrayCheckbox.checked = DebugUtils.isXrayEnabled();\n    xrayCheckbox.addEventListener('change', () => this.#toggleXray(xrayCheckbox.checked));\n    \n    const xraySlider = document.createElement('span');\n    xraySlider.className = 'os-debug-bar-slider';\n    \n    xrayToggle.append(xrayCheckbox, xraySlider);\n    xrayControl.append(xrayLabel, xrayToggle);\n\n    // Mini-cart toggle\n    const cartControl = document.createElement('div');\n    cartControl.className = 'os-debug-bar-control';\n    \n    const cartButton = document.createElement('button');\n    cartButton.className = 'os-debug-bar-button';\n    cartButton.textContent = 'Toggle Mini-Cart';\n    cartButton.addEventListener('click', () => this.#toggleMiniCart());\n    \n    cartControl.appendChild(cartButton);\n\n    // Add controls to right section\n    rightSection.append(xrayControl, cartControl);\n\n    // Add sections to debug bar\n    debugBar.append(leftSection, rightSection);\n\n    // Add debug bar to document\n    document.body.appendChild(debugBar);\n    this.#debugBarElement = debugBar;\n  }\n\n  #toggleXray(enabled) {\n    const isEnabled = DebugUtils.toggleXray(enabled);\n    \n    // Update checkbox if it exists\n    if (this.#debugBarElement) {\n      const checkbox = this.#debugBarElement.querySelector('input[type=\"checkbox\"]');\n      if (checkbox) checkbox.checked = isEnabled;\n    }\n    \n    this.#logger.info(`X-ray view ${isEnabled ? 'enabled' : 'disabled'}`);\n    return isEnabled;\n  }\n\n  #showMiniCart() {\n    if (this.#miniCartVisible) {\n      this.#logger.debug('Mini-cart already visible');\n      return;\n    }\n\n    this.#logger.info('Showing mini-cart widget');\n    this.#miniCartElement ??= this.#createMiniCartElement();\n    this.#miniCartElement.style.display = 'block';\n    this.#miniCartVisible = true;\n    localStorage.setItem('os_debug_mini_cart_visible', 'true');\n    this.#updateMiniCart();\n  }\n\n  #hideMiniCart() {\n    if (!this.#miniCartVisible) {\n      this.#logger.debug('Mini-cart already hidden');\n      return;\n    }\n\n    this.#logger.info('Hiding mini-cart widget');\n    if (this.#miniCartElement) {\n      this.#miniCartElement.style.display = 'none';\n    }\n    this.#miniCartVisible = false;\n    localStorage.setItem('os_debug_mini_cart_visible', 'false');\n  }\n\n  #toggleMiniCart() {\n    this.#miniCartVisible ? this.#hideMiniCart() : this.#showMiniCart();\n  }\n\n  #createMiniCartElement() {\n    const miniCart = document.createElement('div');\n    miniCart.className = 'os-debug-mini-cart';\n    miniCart.style.cssText = `\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      width: 300px;\n      max-height: 400px;\n      overflow-y: auto;\n      background-color: white;\n      border: 1px solid #ccc;\n      border-radius: 4px;\n      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n      z-index: 9999;\n      font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\n      font-size: 14px;\n      display: none;\n    `;\n\n    const header = document.createElement('div');\n    header.className = 'os-debug-mini-cart-header';\n    header.style.cssText = `\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 10px 15px;\n      background-color: #f5f5f5;\n      border-bottom: 1px solid #eee;\n    `;\n\n    const title = document.createElement('div');\n    title.className = 'os-debug-mini-cart-title';\n    title.textContent = 'Debug Mini-Cart';\n    title.style.fontWeight = '600';\n\n    const buttonContainer = document.createElement('div');\n    buttonContainer.style.display = 'flex';\n    buttonContainer.style.alignItems = 'center';\n\n    const refreshButton = document.createElement('button');\n    refreshButton.className = 'os-debug-mini-cart-refresh';\n    refreshButton.textContent = '↻';\n    refreshButton.title = 'Refresh cart data';\n    refreshButton.style.cssText = `\n      background: none;\n      border: none;\n      font-size: 16px;\n      cursor: pointer;\n      padding: 0 8px;\n      line-height: 1;\n      color: #666;\n    `;\n    refreshButton.addEventListener('click', () => {\n      this.#updateMiniCart();\n      this.#logger.info('Mini-cart data refreshed manually');\n    });\n\n    const closeButton = document.createElement('button');\n    closeButton.className = 'os-debug-mini-cart-close';\n    closeButton.textContent = '×';\n    closeButton.style.cssText = `\n      background: none;\n      border: none;\n      font-size: 20px;\n      cursor: pointer;\n      padding: 0;\n      line-height: 1;\n    `;\n    closeButton.addEventListener('click', () => this.#hideMiniCart());\n\n    buttonContainer.append(refreshButton, closeButton);\n    header.append(title, buttonContainer);\n\n    const content = document.createElement('div');\n    content.className = 'os-debug-mini-cart-content';\n    content.style.padding = '15px';\n\n    const footer = document.createElement('div');\n    footer.className = 'os-debug-mini-cart-footer';\n    footer.style.cssText = `\n      padding: 10px 15px;\n      background-color: #f5f5f5;\n      border-top: 1px solid #eee;\n      font-size: 12px;\n      color: #666;\n      text-align: center;\n    `;\n    footer.textContent = 'Use window.hideMiniCart() to hide this widget';\n\n    miniCart.append(header, content, footer);\n    document.body.appendChild(miniCart);\n\n    return miniCart;\n  }\n\n  #updateMiniCart() {\n    if (!this.#miniCartElement) return;\n\n    const content = this.#miniCartElement.querySelector('.os-debug-mini-cart-content');\n    if (!content) return;\n\n    const cart = this.#app.state?.getState('cart');\n    if (!cart) {\n      content.innerHTML = '<div style=\"color: #999; text-align: center;\">Cart data not available</div>';\n      return;\n    }\n\n    this.#logger.debug('Updating mini-cart with cart data:', cart);\n\n    const formatPrice = price => this.#app.campaign?.formatPrice(price) ?? `$${price.toFixed(2)}`;\n    let html = '';\n\n    if (!cart.items?.length) {\n      html += '<div style=\"color: #999; text-align: center; margin-bottom: 15px;\">Cart is empty</div>';\n    } else {\n      html += '<div style=\"margin-bottom: 15px;\">';\n      html += '<div style=\"font-weight: 600; margin-bottom: 10px;\">Items:</div>';\n      html += '<ul style=\"list-style: none; padding: 0; margin: 0;\">';\n      cart.items.forEach(item => {\n        // Check if item is marked as an upsell\n        const isUpsell = !!item.is_upsell;\n        \n        // Create upsell badge if needed\n        const upsellBadge = isUpsell ? \n          `<span style=\"display: inline-block; background-color: #4CAF50; color: white; font-size: 10px; padding: 2px 5px; border-radius: 3px; margin-left: 5px;\">UPSELL</span>` : \n          '';\n        \n        html += `\n          <li style=\"padding: 5px 0; border-bottom: 1px solid #eee; ${isUpsell ? 'background-color: rgba(76, 175, 80, 0.1);' : ''}\">\n            <div style=\"display: flex; justify-content: space-between;\">\n              <div style=\"font-weight: 500;\">${item.name}${upsellBadge}</div>\n              <div>${item.quantity} × ${formatPrice(item.price)}</div>\n            </div>\n            <div style=\"display: flex; justify-content: space-between; margin-top: 5px;\">\n              <div style=\"color: #666; font-size: 12px;\">\n                ID: ${item.id}\n                ${isUpsell ? '<span style=\"color: #4CAF50; margin-left: 5px;\">✓ is_upsell=true</span>' : ''}\n              </div>\n              <div style=\"font-weight: 500;\">${formatPrice(item.price * item.quantity)}</div>\n            </div>\n          </li>\n        `;\n      });\n      html += '</ul></div>';\n    }\n\n    if (cart.totals) {\n      html += '<div>';\n      html += '<div style=\"font-weight: 600; margin-bottom: 10px;\">Totals:</div>';\n      html += '<ul style=\"list-style: none; padding: 0; margin: 0;\">';\n      html += `\n        <li style=\"display: flex; justify-content: space-between; padding: 3px 0;\">\n          <div>Subtotal:</div>\n          <div>${formatPrice(cart.totals.subtotal)}</div>\n        </li>\n      `;\n      if (cart.totals.retail_subtotal > cart.totals.subtotal) {\n        html += `\n          <li style=\"display: flex; justify-content: space-between; padding: 3px 0;\">\n            <div>Retail Subtotal:</div>\n            <div>${formatPrice(cart.totals.retail_subtotal)}</div>\n          </li>\n        `;\n        if (cart.totals.savings) {\n          html += `\n            <li style=\"display: flex; justify-content: space-between; padding: 3px 0; color: #e53935;\">\n              <div>Savings:</div>\n              <div>${formatPrice(cart.totals.savings)} (${Math.round(cart.totals.savings_percentage)}%)</div>\n            </li>\n          `;\n        }\n      }\n      if (cart.totals.shipping > 0) {\n        html += `\n          <li style=\"display: flex; justify-content: space-between; padding: 3px 0;\">\n            <div>Shipping:</div>\n            <div>${formatPrice(cart.totals.shipping)}</div>\n          </li>\n        `;\n      }\n      if (cart.totals.recurring_total > 0) {\n        html += `\n          <li style=\"display: flex; justify-content: space-between; padding: 3px 0; color: #2196f3;\">\n            <div>Recurring Total:</div>\n            <div>${formatPrice(cart.totals.recurring_total)}</div>\n          </li>\n        `;\n      }\n      html += `\n        <li style=\"display: flex; justify-content: space-between; padding: 3px 0; font-weight: 600; margin-top: 5px; border-top: 1px solid #eee;\">\n          <div>Total:</div>\n          <div>${formatPrice(cart.totals.total)}</div>\n        </li>\n      `;\n      html += '</ul></div>';\n    } else {\n      html += '<div style=\"color: #999; text-align: center; margin-bottom: 15px;\">Cart totals not available</div>';\n    }\n\n    content.innerHTML = html;\n  }\n}", "/**\n * TimerManager - Manages countdown timers\n * \n * This class handles countdown timers that can be added to the page\n * using data-os-element=\"timer\" attributes.\n */\n\nexport class TimerManager {\n  #app;\n  #logger;\n  #timers = new Map();\n  #storagePrefix = 'os-timer-';\n\n  constructor(app) {\n    this.#app = app;\n    this.#logger = app.logger.createModuleLogger('TIMER');\n    this.#initTimers();\n    this.#logger.infoWithTime('TimerManager initialized');\n  }\n\n  /**\n   * Initialize all timers on the page\n   */\n  #initTimers() {\n    this.#logger.infoWithTime('Initializing timers');\n    const timerElements = document.querySelectorAll('[data-os-element=\"timer\"]');\n    \n    if (timerElements.length === 0) {\n      this.#logger.debugWithTime('No timer elements found on page');\n      return;\n    }\n    \n    this.#logger.debugWithTime(`Found ${timerElements.length} timer elements`);\n    \n    timerElements.forEach((timerElement) => {\n      this.#setupTimer(timerElement);\n    });\n  }\n\n  /**\n   * Set up a single timer element\n   * @param {HTMLElement} timerElement - The timer element to set up\n   */\n  #setupTimer(timerElement) {\n    // Get the parent element that may contain timer configuration\n    const parentElement = timerElement.closest('[data-os-element=\"timer-text\"]');\n    \n    if (!parentElement) {\n      this.#logger.warnWithTime(`Timer element has no parent with data-os-element=\"timer-text\", using default configuration`);\n    }\n    \n    // Get timer configuration\n    const timerConfig = this.#getTimerConfig(timerElement, parentElement);\n    \n    if (!timerConfig.duration) {\n      this.#logger.warnWithTime(`Timer element is missing duration, skipping: ${timerElement.outerHTML}`);\n      return;\n    }\n    \n    // Store the original content of the parent element for potential restoration\n    const originalParentContent = parentElement ? parentElement.innerHTML : null;\n    \n    // Set up the timer\n    let startTime = +new Date();\n    const timerPersistenceId = timerConfig.persistenceId;\n    \n    // If we have a persistence ID, try to load the start time from localStorage\n    if (timerPersistenceId) {\n      const storageKey = this.#storagePrefix + timerPersistenceId;\n      const cachedStartTime = parseInt(localStorage.getItem(storageKey) || \"\");\n      \n      if (cachedStartTime > 0) {\n        startTime = cachedStartTime;\n        this.#logger.debugWithTime(`Loaded persisted timer start time for ${timerPersistenceId}: ${new Date(startTime).toISOString()}`);\n      } else {\n        localStorage.setItem(storageKey, String(startTime));\n        this.#logger.debugWithTime(`Saved new timer start time for ${timerPersistenceId}: ${new Date(startTime).toISOString()}`);\n      }\n    } else {\n      this.#logger.debugWithTime(`Timer has no persistence ID, it will reset with every page load: ${timerElement.outerHTML}`);\n    }\n    \n    // Create a timer object to store the interval ID\n    const timer = {\n      element: timerElement,\n      parentElement,\n      config: timerConfig,\n      startTime,\n      intervalId: null,\n      originalParentContent\n    };\n    \n    // Store the timer information\n    this.#timers.set(timerElement, timer);\n    \n    // Create the timer update handler with access to the timer object\n    const updateHandler = () => {\n      const now = +new Date();\n      const elapsed = (now - startTime) / 1000;\n      let seconds = Math.round(timerConfig.duration - elapsed);\n      \n      if (seconds <= 0) {\n        seconds = 0;\n        \n        // Handle timer expiry\n        if (timerConfig.expiryText) {\n          // Check if we should replace the entire parent content or just the timer\n          if (parentElement && timerConfig.replaceEntireContent) {\n            parentElement.innerHTML = timerConfig.expiryText;\n          } else {\n            timerElement.innerText = timerConfig.expiryText;\n          }\n        } else {\n          timerElement.innerText = \"00:00\";\n        }\n        \n        // Clear the interval - now we can safely access the intervalId from the timer object\n        if (timer.intervalId) {\n          clearInterval(timer.intervalId);\n          timer.intervalId = null;\n        }\n        \n        this.#timers.delete(timerElement);\n        \n        // Trigger expiry event\n        this.#triggerTimerEvent('expired', timerElement, { \n          timerElement, \n          parentElement, \n          config: timerConfig \n        });\n        \n        return;\n      }\n      \n      // Format the time\n      const hours = Math.floor(seconds / 3600);\n      seconds -= hours * 3600;\n      const minutes = Math.floor(seconds / 60);\n      seconds -= minutes * 60;\n      \n      // Update the timer text\n      const formattedTime = this.#formatTime(hours, minutes, seconds, timerConfig.format);\n      timerElement.innerText = formattedTime;\n      \n      // Trigger update event\n      this.#triggerTimerEvent('updated', timerElement, { \n        timerElement, \n        parentElement, \n        config: timerConfig,\n        remaining: { hours, minutes, seconds },\n        formattedTime\n      });\n    };\n    \n    // Run the handler immediately to set the initial value\n    updateHandler();\n    \n    // Set up the interval and store the ID in the timer object\n    timer.intervalId = setInterval(updateHandler, 1000);\n    \n    this.#logger.debugWithTime(`Timer initialized: ${timerConfig.duration} seconds, persistence ID: ${timerConfig.persistenceId || 'none'}`);\n  }\n\n  /**\n   * Get timer configuration from element attributes\n   * @param {HTMLElement} timerElement - The timer element\n   * @param {HTMLElement|null} parentElement - The parent element with timer configuration\n   * @returns {Object} Timer configuration\n   */\n  #getTimerConfig(timerElement, parentElement) {\n    const config = {\n      duration: 0,\n      persistenceId: null,\n      expiryText: null,\n      format: 'auto', // 'auto', 'hh:mm:ss', 'mm:ss', 'ss'\n      replaceEntireContent: false // Whether to replace the entire parent content on expiry\n    };\n    \n    // Try to get duration from data attributes\n    if (timerElement.dataset.osDuration) {\n      config.duration = parseInt(timerElement.dataset.osDuration);\n    } else if (parentElement?.dataset.osTimerDuration) {\n      config.duration = parseInt(parentElement.dataset.osTimerDuration);\n    }\n    \n    // Try to get persistence ID from data attributes\n    if (timerElement.dataset.osPersistenceId) {\n      config.persistenceId = timerElement.dataset.osPersistenceId;\n    } else if (parentElement?.dataset.osTimerPersistenceId) {\n      config.persistenceId = parentElement.dataset.osTimerPersistenceId;\n    }\n    \n    // Try to get expiry text from data attributes\n    if (timerElement.dataset.osExpiryText) {\n      config.expiryText = timerElement.dataset.osExpiryText;\n    } else if (parentElement?.dataset.osTimerExpiryText) {\n      config.expiryText = parentElement.dataset.osTimerExpiryText;\n    }\n    \n    // Try to get format from data attributes\n    if (timerElement.dataset.osFormat) {\n      config.format = timerElement.dataset.osFormat;\n    } else if (parentElement?.dataset.osTimerFormat) {\n      config.format = parentElement.dataset.osTimerFormat;\n    }\n    \n    // Check if we should replace the entire content\n    if (timerElement.dataset.osReplaceEntireContent === 'true') {\n      config.replaceEntireContent = true;\n    } else if (parentElement?.dataset.osTimerReplaceEntireContent === 'true') {\n      config.replaceEntireContent = true;\n    }\n    \n    // If the expiry text contains HTML tags, we should replace the entire content\n    if (config.expiryText && (config.expiryText.includes('<') || config.expiryText.includes('>'))) {\n      config.replaceEntireContent = true;\n    }\n    \n    return config;\n  }\n\n  /**\n   * Format time according to the specified format\n   * @param {number} hours - Hours\n   * @param {number} minutes - Minutes\n   * @param {number} seconds - Seconds\n   * @param {string} format - Format string ('auto', 'hh:mm:ss', 'mm:ss', 'ss')\n   * @returns {string} Formatted time\n   */\n  #formatTime(hours, minutes, seconds, format) {\n    const padded = (num) => num.toString().padStart(2, '0');\n    \n    if (format === 'hh:mm:ss' || (format === 'auto' && hours > 0)) {\n      return `${padded(hours)}:${padded(minutes)}:${padded(seconds)}`;\n    } else if (format === 'mm:ss' || (format === 'auto' && minutes > 0)) {\n      return `${padded(minutes)}:${padded(seconds)}`;\n    } else if (format === 'ss') {\n      return padded(seconds);\n    }\n    \n    // Default format (auto with no significant time)\n    return `${padded(minutes)}:${padded(seconds)}`;\n  }\n\n  /**\n   * Trigger a timer event\n   * @param {string} eventName - Name of the event\n   * @param {HTMLElement} element - Element that triggered the event\n   * @param {Object} detail - Event details\n   */\n  #triggerTimerEvent(eventName, element, detail = {}) {\n    const event = new CustomEvent(`os:timer.${eventName}`, {\n      bubbles: true,\n      cancelable: true,\n      detail: { ...detail, manager: this }\n    });\n    \n    element.dispatchEvent(event);\n    document.dispatchEvent(event);\n    this.#logger.debugWithTime(`Timer event triggered: ${eventName}`);\n  }\n\n  /**\n   * Refresh all timers on the page\n   * This can be called after dynamic content is loaded\n   */\n  refreshTimers() {\n    this.#logger.infoWithTime('Refreshing timers');\n    \n    // Clear existing timers\n    this.#timers.forEach((timer) => {\n      if (timer.intervalId) {\n        clearInterval(timer.intervalId);\n        timer.intervalId = null;\n      }\n    });\n    \n    this.#timers.clear();\n    \n    // Re-initialize timers\n    this.#initTimers();\n  }\n\n  /**\n   * Get all active timers\n   * @returns {Map} Map of active timers\n   */\n  getTimers() {\n    return this.#timers;\n  }\n} ", "/**\n * DisplayManager - Manages conditional display of elements based on cart contents\n * \n * This class handles showing/hiding elements based on what's in the cart,\n * using data-os-in-cart attributes.\n */\n\nexport class DisplayManager {\n  #app;\n  #logger;\n  #displayElements = new Map();\n\n  constructor(app) {\n    this.#app = app;\n    this.#logger = app.logger.createModuleLogger('DISPLAY');\n    this.#initDisplayElements();\n    \n    // Subscribe to cart updates to refresh display elements\n    this.#app.state.subscribe('cart', () => this.refreshDisplayElements());\n    \n    this.#logger.infoWithTime('DisplayManager initialized');\n  }\n\n  /**\n   * Initialize all display elements on the page\n   */\n  #initDisplayElements() {\n    this.#logger.infoWithTime('Initializing display elements');\n    \n    // Find all swap display containers\n    const swapContainers = document.querySelectorAll('[data-os-cart=\"swap-display\"]');\n    \n    if (swapContainers.length === 0) {\n      this.#logger.debugWithTime('No swap display containers found on page');\n      return;\n    }\n    \n    this.#logger.debugWithTime(`Found ${swapContainers.length} swap display containers`);\n    \n    // Process each container\n    swapContainers.forEach((container, index) => {\n      const containerId = container.dataset.osId || `auto-container-${index}`;\n      \n      // Find all display elements within this container\n      const displayElements = container.querySelectorAll('[data-os-in-cart=\"display\"]');\n      \n      if (displayElements.length === 0) {\n        this.#logger.warnWithTime(`Container ${containerId} has no display elements`);\n        return;\n      }\n      \n      // Store the container and its display elements\n      this.#displayElements.set(container, {\n        id: containerId,\n        elements: Array.from(displayElements).map(element => ({\n          element,\n          packageId: element.dataset.osPackage\n        }))\n      });\n      \n      this.#logger.debugWithTime(`Initialized container ${containerId} with ${displayElements.length} display elements`);\n    });\n    \n    // Initial update of all display elements\n    this.refreshDisplayElements();\n  }\n\n  /**\n   * Refresh all display elements based on current cart contents\n   */\n  refreshDisplayElements() {\n    this.#logger.debugWithTime('Refreshing display elements');\n    \n    // Get current cart items\n    const cart = this.#app.state.getState('cart');\n    const cartItemIds = cart.items.map(item => item.id.toString());\n    \n    // Update each container\n    this.#displayElements.forEach((containerData, container) => {\n      this.#updateContainerDisplay(container, containerData, cartItemIds);\n    });\n  }\n\n  /**\n   * Update the display of elements within a container based on cart contents\n   * @param {HTMLElement} container - The container element\n   * @param {Object} containerData - Data about the container and its elements\n   * @param {Array<string>} cartItemIds - IDs of items currently in the cart\n   */\n  #updateContainerDisplay(container, containerData, cartItemIds) {\n    const { id, elements } = containerData;\n    let hasVisibleElement = false;\n    \n    // First pass: check if any element should be visible\n    for (const { element, packageId } of elements) {\n      if (packageId && cartItemIds.includes(packageId)) {\n        // Show this element\n        element.style.display = 'block';\n        hasVisibleElement = true;\n        this.#logger.debugWithTime(`Showing element for package ${packageId} in container ${id}`);\n      } else {\n        // Hide this element\n        element.style.display = 'none';\n      }\n    }\n    \n    // If no elements are visible, show the first one as fallback (optional)\n    if (!hasVisibleElement && elements.length > 0) {\n      // Option 1: Show nothing (current behavior)\n      // Option 2: Show the first element as fallback\n      // elements[0].element.style.display = 'block';\n      // this.#logger.debugWithTime(`No matching packages in cart, showing first element as fallback in container ${id}`);\n    }\n    \n    // Trigger a custom event\n    this.#triggerDisplayEvent('updated', container, {\n      containerId: id,\n      hasVisibleElement,\n      visiblePackageIds: elements\n        .filter(({ element }) => element.style.display === 'block')\n        .map(({ packageId }) => packageId)\n    });\n  }\n\n  /**\n   * Trigger a display event\n   * @param {string} eventName - Name of the event\n   * @param {HTMLElement} element - Element that triggered the event\n   * @param {Object} detail - Event details\n   */\n  #triggerDisplayEvent(eventName, element, detail = {}) {\n    const event = new CustomEvent(`os:display.${eventName}`, {\n      bubbles: true,\n      cancelable: true,\n      detail: { ...detail, manager: this }\n    });\n    \n    element.dispatchEvent(event);\n    document.dispatchEvent(event);\n    this.#logger.debugWithTime(`Display event triggered: ${eventName}`);\n  }\n\n  /**\n   * Manually refresh display elements\n   * This can be called after dynamic content is loaded\n   */\n  refresh() {\n    this.#logger.infoWithTime('Manually refreshing display elements');\n    this.#displayElements.clear();\n    this.#initDisplayElements();\n  }\n} ", "/**\n * CartDisplayManager - Manages cart display in the checkout page\n * \n * This class handles updating the cart summary display based on cart contents,\n * including line items, totals, savings, and shipping information.\n */\n\nexport class CartDisplayManager {\n  #app;\n  #logger;\n  #elements = {\n    lineDisplays: [], // Changed to array to support multiple displays\n    summaryContainers: [], // Changed to array to support multiple containers\n    savingsBars: [], // Changed to array\n    shippingBars: [], // Changed to array\n    grandTotals: [], // Changed to array\n    // Summary toggle elements\n    summaryBars: [], // Changed to array\n    summaryPanels: [], // Changed to array\n    summaryTexts: [], // Changed to array\n    summaryIcons: [], // Changed to array\n    // Compare total elements\n    compareTotalElements: []\n  };\n  #config = {\n    currencySymbol: '$',\n    showComparePricing: true,\n    showProductImages: true,\n    showTaxPendingMessage: true\n  };\n  #lineItemTemplate = null;\n\n  constructor(app) {\n    this.#app = app;\n    this.#logger = app.logger.createModuleLogger('CART_DISPLAY');\n    this.#initCartDisplay();\n    \n    // Subscribe to cart updates\n    this.#app.state.subscribe('cart', () => this.updateCartDisplay());\n    \n    this.#logger.infoWithTime('CartDisplayManager initialized');\n  }\n\n  /**\n   * Initialize the cart display elements\n   */\n  #initCartDisplay() {\n    this.#logger.infoWithTime('Initializing cart display');\n    \n    // Find all cart display elements using querySelectorAll for everything\n    this.#elements.lineDisplays = document.querySelectorAll('[data-os-cart-summary=\"line-display\"]');\n    this.#elements.summaryContainers = document.querySelectorAll('[data-os-cart=\"summary\"]');\n    this.#elements.savingsBars = document.querySelectorAll('[data-os-cart-summary=\"savings\"]');\n    this.#elements.shippingBars = document.querySelectorAll('[data-os-cart-summary=\"shipping-bar\"]');\n    this.#elements.grandTotals = document.querySelectorAll('[data-os-cart-summary=\"grand-total\"]');\n    \n    // Find all summary toggle elements\n    this.#elements.summaryBars = document.querySelectorAll('[os-checkout-element=\"summary-bar\"]');\n    this.#elements.summaryPanels = document.querySelectorAll('[os-checkout-element=\"summary-mobile\"]');\n    this.#elements.summaryTexts = document.querySelectorAll('[os-checkout-element=\"summary-text\"]');\n    this.#elements.summaryIcons = document.querySelectorAll('[os-summary-icon]');\n    \n    // Find all compare-total elements across all containers\n    this.#elements.compareTotalElements = document.querySelectorAll('[data-os-cart-summary=\"compare-total\"]');\n    \n    // Log what elements were found for debugging\n    this.#logger.debugWithTime(`Line displays found: ${this.#elements.lineDisplays.length}`);\n    this.#logger.debugWithTime(`Summary containers found: ${this.#elements.summaryContainers.length}`);\n    this.#logger.debugWithTime(`Savings bars found: ${this.#elements.savingsBars.length}`);\n    this.#logger.debugWithTime(`Shipping bars found: ${this.#elements.shippingBars.length}`);\n    this.#logger.debugWithTime(`Grand total elements found: ${this.#elements.grandTotals.length}`);\n    this.#logger.debugWithTime(`Summary bars found: ${this.#elements.summaryBars.length}`);\n    this.#logger.debugWithTime(`Summary panels found: ${this.#elements.summaryPanels.length}`);\n    this.#logger.debugWithTime(`Summary texts found: ${this.#elements.summaryTexts.length}`);\n    this.#logger.debugWithTime(`Summary icons found: ${this.#elements.summaryIcons.length}`);\n    this.#logger.debugWithTime(`Compare total elements found: ${this.#elements.compareTotalElements.length}`);\n    \n    // Get configuration from attributes if available\n    // Use the first summary container for configuration, but apply to all\n    if (this.#elements.summaryContainers.length > 0) {\n      const firstContainer = this.#elements.summaryContainers[0];\n      this.#config.showComparePricing = firstContainer.dataset.showComparePricing !== 'false';\n      this.#config.showProductImages = firstContainer.dataset.showProductImages !== 'false';\n      this.#config.showTaxPendingMessage = firstContainer.dataset.showTaxPendingMessage !== 'false';\n      this.#config.currencySymbol = firstContainer.dataset.currencySymbol || '$';\n    }\n    \n    // Store a template of the line item if available\n    const existingLineItem = document.querySelector('[data-os-cart-summary=\"line-item\"]');\n    if (existingLineItem) {\n      this.#lineItemTemplate = existingLineItem.cloneNode(true);\n    }\n    \n    // Initialize summary toggle functionality\n    this.#initSummaryToggle();\n    \n    this.#logger.debugWithTime('Cart display elements initialized');\n    \n    // Initial update\n    this.updateCartDisplay();\n  }\n\n  /**\n   * Initialize the summary toggle functionality\n   */\n  #initSummaryToggle() {\n    const { summaryBars, summaryPanels, summaryTexts, summaryIcons } = this.#elements;\n    \n    if (!summaryBars.length || !summaryPanels.length) {\n      this.#logger.debugWithTime('Summary toggle elements not found, skipping initialization');\n      return;\n    }\n    \n    this.#logger.debugWithTime('Initializing summary toggle');\n    \n    // Initialize each summary panel\n    summaryPanels.forEach((panel, index) => {\n      // Add a class to prevent transitions during initialization\n      panel.classList.add('no-transition');\n      \n      // Set initial styles if not already expanded\n      if (!panel.classList.contains('cc-expanded')) {\n        panel.style.height = '0';\n        panel.style.opacity = '0';\n        panel.style.overflow = 'hidden';\n        \n        // Set initial text content for corresponding text element\n        const textElement = summaryTexts[index];\n        if (textElement) {\n          textElement.textContent = 'Show Order Summary';\n        }\n      }\n      \n      // Force reflow and remove no-transition class\n      requestAnimationFrame(() => {\n        panel.classList.remove('no-transition');\n        panel.style.transition = 'height 0.3s ease-out, opacity 0.25s ease-out';\n      });\n    });\n    \n    // Add click event listener to each summary bar\n    summaryBars.forEach((bar, index) => {\n      bar.addEventListener('click', (e) => {\n        e.preventDefault();\n        this.#toggleSummary(index);\n      });\n    });\n    \n    // Add resize listener to handle window size changes\n    window.addEventListener('resize', this.#debounce(() => {\n      summaryPanels.forEach(panel => {\n        if (panel.classList.contains('cc-expanded')) {\n          panel.style.height = 'auto';\n        }\n      });\n    }, 250));\n    \n    this.#logger.debugWithTime('Summary toggle initialized');\n  }\n\n  /**\n   * Toggle the summary panel between expanded and collapsed states\n   * @param {number} index - Index of the summary panel to toggle\n   */\n  #toggleSummary(index = 0) {\n    const { summaryPanels, summaryTexts, summaryIcons } = this.#elements;\n    \n    const panel = summaryPanels[index];\n    const text = summaryTexts[index];\n    const icon = summaryIcons[index];\n    \n    if (!panel) return;\n    \n    const isExpanded = panel.classList.contains('cc-expanded');\n    \n    if (!isExpanded) {\n      // Expanding\n      panel.classList.add('cc-expanded');\n      panel.style.height = `${panel.scrollHeight}px`;\n      panel.style.opacity = '1';\n      \n      if (text) {\n        text.textContent = 'Hide Order Summary';\n      }\n      \n      if (icon) {\n        icon.style.transform = 'rotate(180deg)';\n      }\n      \n      panel.addEventListener('transitionend', () => {\n        if (panel.classList.contains('cc-expanded')) {\n          panel.style.height = 'auto';\n        }\n      }, { once: true });\n      \n      this.#logger.debugWithTime('Summary panel expanded');\n    } else {\n      // Collapsing\n      const currentHeight = panel.scrollHeight;\n      panel.style.height = `${currentHeight}px`;\n      panel.offsetHeight; // Force reflow\n      \n      panel.style.height = '0';\n      panel.style.opacity = '0';\n      \n      if (text) {\n        text.textContent = 'Show Order Summary';\n      }\n      \n      if (icon) {\n        icon.style.transform = 'rotate(0deg)';\n      }\n      \n      panel.addEventListener('transitionend', () => {\n        if (panel.style.height === '0px') {\n          panel.classList.remove('cc-expanded');\n        }\n      }, { once: true });\n      \n      this.#logger.debugWithTime('Summary panel collapsed');\n    }\n  }\n\n  /**\n   * Update the cart display with current cart data\n   */\n  updateCartDisplay() {\n    this.#logger.debugWithTime('Updating cart display');\n    \n    const cart = this.#app.state.getState('cart');\n    if (!cart) {\n      this.#logger.warnWithTime('Cart data not available');\n      return;\n    }\n    \n    this.#logger.debugWithTime(`Cart data: ${JSON.stringify(cart)}`);\n    \n    // Update line items\n    this.#updateLineItems(cart.items);\n    \n    // Update summary\n    this.#updateSummary(cart.totals);\n    \n    // Update shipping\n    this.#updateShipping(cart.totals.shipping, cart.shippingMethod);\n    \n    // Update savings\n    this.#updateSavings(cart.totals);\n    \n    // Update grand total\n    this.#updateGrandTotal(cart.totals.total);\n    \n    // Update compare total elements\n    this.#updateCompareTotals(cart.totals);\n    \n    this.#logger.debugWithTime('Cart display updated');\n  }\n\n  /**\n   * Update the line items display\n   * @param {Array} items - Cart items\n   */\n  #updateLineItems(items) {\n    if (!this.#elements.lineDisplays.length || !this.#lineItemTemplate) {\n      this.#logger.warnWithTime('Line displays or template not found');\n      return;\n    }\n    \n    if (!items || items.length === 0) {\n      this.#logger.debugWithTime('No items in cart');\n      return;\n    }\n    \n    // Update each line display container\n    this.#elements.lineDisplays.forEach(lineDisplay => {\n      // Clear existing line items\n      lineDisplay.innerHTML = '';\n      \n      // Add each item to the display\n      items.forEach(item => {\n        const lineItemElement = this.#createLineItemElement(item);\n        lineDisplay.appendChild(lineItemElement);\n      });\n    });\n    \n    // Check if we need to show the scroll indicator\n    const scrollIndicators = document.querySelectorAll('[data-os-cart-summary=\"summary-scroll\"]');\n    if (scrollIndicators.length) {\n      const shouldShowScroll = items.length > 2;\n      scrollIndicators.forEach(indicator => {\n        indicator.classList.toggle('hide', !shouldShowScroll);\n      });\n    }\n  }\n\n  /**\n   * Create a line item element\n   * @param {Object} item - Cart item\n   * @returns {HTMLElement} Line item element\n   */\n  #createLineItemElement(item) {\n    const lineItem = this.#lineItemTemplate.cloneNode(true);\n    \n    // Set item title\n    const titleElement = lineItem.querySelector('[data-os-cart-summary=\"line-title\"]');\n    if (titleElement) {\n      titleElement.textContent = item.name;\n    }\n    \n    // Set item image if available\n    if (this.#config.showProductImages) {\n      const imageElement = lineItem.querySelector('[data-os-cart-summary=\"line-image\"]');\n      if (imageElement && item.image) {\n        imageElement.src = item.image;\n        imageElement.alt = item.name;\n      }\n    }\n    \n    // Set item quantity\n    const qtyElement = lineItem.querySelector('[os-cart=\"line_item-qty\"]');\n    if (qtyElement) {\n      qtyElement.textContent = item.quantity || 1;\n    }\n    \n    // Set item prices\n    const comparePrice = lineItem.querySelector('[data-os-cart-summary=\"line-compare\"]');\n    const salePrice = lineItem.querySelector('[data-os-cart-summary=\"line-sale\"]');\n    \n    if (comparePrice && item.retail_price && this.#config.showComparePricing) {\n      comparePrice.textContent = this.#formatPrice(item.retail_price * (item.quantity || 1));\n      comparePrice.classList.remove('hide');\n    } else if (comparePrice) {\n      comparePrice.classList.add('hide');\n    }\n    \n    if (salePrice) {\n      salePrice.textContent = this.#formatPrice(item.price * (item.quantity || 1));\n    }\n    \n    // Set savings percentage\n    const savingsPercentElement = lineItem.querySelector('[data-os-cart-summary=\"line-saving-percent\"]');\n    if (savingsPercentElement && item.retail_price) {\n      const savingsPercent = Math.round((1 - (item.price / item.retail_price)) * 100);\n      if (savingsPercent > 0) {\n        const format = savingsPercentElement.dataset.osFormat || 'default';\n        let savingsText = `${savingsPercent}% OFF`;\n        \n        if (format === 'parenthesis') {\n          savingsText = `(${savingsPercent}% OFF)`;\n        }\n        \n        savingsPercentElement.textContent = savingsText;\n        savingsPercentElement.classList.remove('hide');\n      } else {\n        savingsPercentElement.classList.add('hide');\n      }\n    } else if (savingsPercentElement) {\n      savingsPercentElement.classList.add('hide');\n    }\n    \n    return lineItem;\n  }\n\n  /**\n   * Update the summary section\n   * @param {Object} totals - Cart totals\n   */\n  #updateSummary(totals) {\n    if (!totals) return;\n    \n    // Update subtotal, tax, etc. if needed\n    // This would depend on your specific HTML structure\n  }\n\n  /**\n   * Update the shipping information\n   * @param {number} shippingCost - Shipping cost\n   * @param {Object} shippingMethod - Selected shipping method\n   */\n  #updateShipping(shippingCost, shippingMethod) {\n    if (!this.#elements.shippingBars.length) {\n      this.#logger.warnWithTime('Shipping bars not found');\n      return;\n    }\n    \n    // Update all shipping bars\n    this.#elements.shippingBars.forEach(shippingBar => {\n      const shippingCompare = shippingBar.querySelector('[data-os-cart-summary=\"shipping-compare\"]');\n      const shippingCurrent = shippingBar.querySelector('[data-os-cart-summary=\"shipping-current\"]');\n      \n      if (shippingCompare && shippingCurrent) {\n        // If shipping is free but there was a standard shipping cost\n        if (shippingCost === 0 && shippingMethod?.standard_cost > 0) {\n          shippingCompare.textContent = this.#formatPrice(shippingMethod.standard_cost);\n          shippingCurrent.textContent = 'FREE';\n          shippingCompare.classList.remove('hide');\n        } \n        // If shipping has a cost\n        else if (shippingCost > 0) {\n          shippingCurrent.textContent = this.#formatPrice(shippingCost);\n          shippingCompare.classList.add('hide');\n        } \n        // If shipping is just free\n        else {\n          shippingCurrent.textContent = 'FREE';\n          shippingCompare.classList.add('hide');\n        }\n      }\n    });\n  }\n\n  /**\n   * Update the savings information\n   * @param {Object} totals - Cart totals\n   */\n  #updateSavings(totals) {\n    if (!this.#elements.savingsBars.length) {\n      this.#logger.warnWithTime('Savings bars not found');\n      return;\n    }\n    \n    // Update all savings bars\n    this.#elements.savingsBars.forEach(savingsBar => {\n      // Find elements within this specific savings bar\n      const savingsAmount = savingsBar.querySelector('[data-os-cart-summary=\"savings-amount\"]');\n      const savingsPercentage = savingsBar.querySelector('[data-os-cart-summary=\"savings-percentage\"]');\n      \n      if (totals.savings > 0 && totals.savings_percentage > 0) {\n        if (savingsAmount) {\n          savingsAmount.textContent = this.#formatPrice(totals.savings);\n          this.#logger.debugWithTime(`Updated savings amount to: ${this.#formatPrice(totals.savings)}`);\n        }\n        \n        if (savingsPercentage) {\n          savingsPercentage.textContent = `${Math.round(totals.savings_percentage)}% OFF`;\n          this.#logger.debugWithTime(`Updated savings percentage to: ${Math.round(totals.savings_percentage)}% OFF`);\n        }\n        \n        savingsBar.classList.remove('hide');\n      } else {\n        savingsBar.classList.add('hide');\n      }\n    });\n    \n    // Also update any standalone savings elements that might be outside the savings bars\n    const allSavingsAmounts = document.querySelectorAll('[data-os-cart-summary=\"savings-amount\"]');\n    const allSavingsPercentages = document.querySelectorAll('[data-os-cart-summary=\"savings-percentage\"]');\n    \n    if (totals.savings > 0 && totals.savings_percentage > 0) {\n      allSavingsAmounts.forEach(element => {\n        element.textContent = this.#formatPrice(totals.savings);\n      });\n      \n      allSavingsPercentages.forEach(element => {\n        element.textContent = `${Math.round(totals.savings_percentage)}% OFF`;\n      });\n    }\n  }\n\n  /**\n   * Update the grand total\n   * @param {number} total - Cart total\n   */\n  #updateGrandTotal(total) {\n    if (!this.#elements.grandTotals.length) {\n      this.#logger.warnWithTime('Grand total elements not found');\n      return;\n    }\n    \n    // Update all grand total elements\n    this.#elements.grandTotals.forEach(element => {\n      element.textContent = this.#formatPrice(total);\n    });\n    \n    this.#logger.debugWithTime(`Updated grand total to: ${this.#formatPrice(total)}`);\n  }\n\n  /**\n   * Format a price with currency symbol\n   * @param {number} price - Price to format\n   * @returns {string} Formatted price\n   */\n  #formatPrice(price) {\n    // Use the campaign's formatPrice method if available\n    if (this.#app.campaign?.formatPrice) {\n      return this.#app.campaign.formatPrice(price);\n    }\n    \n    // Otherwise, use a simple formatter\n    return `${this.#config.currencySymbol}${price.toFixed(2)} USD`;\n  }\n\n  /**\n   * Simple debounce function for resize events\n   * @param {Function} func - Function to debounce\n   * @param {number} wait - Wait time in milliseconds\n   * @returns {Function} Debounced function\n   */\n  #debounce(func, wait) {\n    let timeout;\n    return function executedFunction(...args) {\n      const later = () => {\n        clearTimeout(timeout);\n        func(...args);\n      };\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n    };\n  }\n\n  /**\n   * Update the compare total elements\n   * @param {Object} totals - Cart totals\n   */\n  #updateCompareTotals(totals) {\n    if (!this.#elements.compareTotalElements.length) {\n      this.#logger.debugWithTime('No compare-total elements found');\n      return;\n    }\n    \n    this.#logger.debugWithTime('Updating compare-total elements');\n    this.#logger.debugWithTime(`Cart totals: ${JSON.stringify(totals)}`);\n    \n    this.#elements.compareTotalElements.forEach(element => {\n      // Get the data attribute that specifies which total to use\n      const totalType = element.dataset.totalType || 'retail';\n      let compareValue = null;\n      \n      // Determine which value to use based on the totalType\n      switch (totalType) {\n        case 'retail':\n          compareValue = totals.retail_subtotal;\n          break;\n        case 'recurring':\n          compareValue = totals.recurring_total;\n          break;\n        // Keep these as fallbacks in case they're added in the future\n        case 'subtotal_compare':\n        case 'original':\n        case 'msrp':\n          compareValue = totals[totalType] || null;\n          break;\n        default:\n          compareValue = totals.retail_subtotal;\n      }\n      \n      // If we have a valid compare value and it's different from the current total\n      if (compareValue && compareValue > totals.total) {\n        element.textContent = this.#formatPrice(compareValue);\n        element.classList.remove('hide');\n        this.#logger.debugWithTime(`Updated compare-total (${totalType}) to: ${this.#formatPrice(compareValue)}`);\n      } else {\n        // Hide the element if there's no compare value or it's not greater than the current total\n        element.classList.add('hide');\n        this.#logger.debugWithTime(`Hiding compare-total element (${totalType}): compareValue=${compareValue}, total=${totals.total}`);\n      }\n    });\n  }\n\n  /**\n   * Find all elements with a specific data attribute across all summary containers\n   * @param {string} attribute - The data attribute to search for\n   * @returns {NodeList} - All matching elements\n   */\n  #findAllSummaryElements(attribute) {\n    return document.querySelectorAll(`[${attribute}]`);\n  }\n\n  /**\n   * Refresh the cart display and re-find all elements\n   * This can be called after dynamic content is loaded or when the viewport changes\n   */\n  refresh() {\n    this.#logger.infoWithTime('Manually refreshing cart display');\n    this.#initCartDisplay();\n  }\n} ", "/**\n * AttributionManager - Manages attribution data for analytics and tracking\n * \n * This class is responsible for collecting, storing, and retrieving attribution data\n * from various sources (URL parameters, cookies, localStorage, etc.) and making it\n * available to the application through the state manager.\n */\n\nexport class AttributionManager {\n  #app;\n  #logger;\n  #attributionData = {};\n  #initialized = false;\n\n  /**\n   * Initialize the AttributionManager\n   * @param {Object} app - The main application instance\n   */\n  constructor(app) {\n    this.#app = app;\n    this.#logger = app.logger.createModuleLogger('ATTRIBUTION');\n    this.#init();\n  }\n\n  /**\n   * Initialize the AttributionManager\n   */\n  #init() {\n    this.#logger.info('Initializing AttributionManager');\n    this.#collectAttributionData();\n    this.#storeAttributionData();\n    this.#setupEventListeners();\n    this.#initialized = true;\n    this.#logger.info('AttributionManager initialized successfully');\n  }\n\n  /**\n   * Collect attribution data from various sources\n   */\n  #collectAttributionData() {\n    // Get campaign name for funnel ID from meta tag\n    const funnelMetaTag = document.querySelector('meta[name=\"os-tracking-tag\"][data-tag-name=\"funnel_name\"]');\n    const funnelIdFromTag = funnelMetaTag ? funnelMetaTag.getAttribute('data-tag-value') : '';\n    \n    // Get campaign name if available - preferred method\n    const campaignName = this.#app.campaign?.getCampaignName() || this.#app.campaignData?.name || '';\n    \n    // Use funnel ID from tag if available, otherwise use campaign name\n    const funnelId = funnelIdFromTag || campaignName;\n    this.#logger.debug(`Using funnel value: ${funnelId} (from ${funnelIdFromTag ? 'meta tag' : 'campaign name'})`);\n    \n    // Get the affiliate value from affid or aff parameters (in order of priority)\n    const affiliate = this.#getStoredValue('affid') || this.#getStoredValue('aff') || '';\n    \n    // Get Facebook tracking data\n    const fbcValue = this.#getCookie('_fbc') || '';\n    const fbpValue = this.#getCookie('_fbp') || '';\n    \n    // Try to get Facebook pixel ID from meta tag or script\n    const fbPixelId = this.#getFacebookPixelId();\n    \n    // Build metadata object for additional tracking data\n    const metadata = {\n      landing_page: window.location.href || '',\n      referrer: document.referrer || '',\n      device: navigator.userAgent || '',\n      device_type: this.#getDeviceType(),\n      timestamp: Date.now(),\n      domain: window.location.hostname,\n      \n      // Facebook tracking data - using the exact variable names from the example\n      fb_fbp: fbpValue,\n      fb_fbc: fbcValue,\n      fb_pixel_id: fbPixelId\n    };\n    \n    // Add fbclid to metadata if it exists\n    const fbclid = this.#getStoredValue('fbclid') || '';\n    if (fbclid) {\n      metadata.fbclid = fbclid;\n    }\n    \n    // Collect all meta tracking tags and add them to metadata\n    this.#collectTrackingTags(metadata);\n\n    // Collect UTM parameters and other tracking data\n    this.#attributionData = {\n      // Attribution API compatible fields\n      affiliate: affiliate,\n      funnel: funnelId,  // Using funnelId which is either from the meta tag or campaign name\n      gclid: this.#getStoredValue('gclid') || '',\n      metadata: metadata,\n      \n      // Standard UTM parameters\n      utm_source: this.#getStoredValue('utm_source') || '',\n      utm_medium: this.#getStoredValue('utm_medium') || '',\n      utm_campaign: this.#getStoredValue('utm_campaign') || '',\n      utm_content: this.#getStoredValue('utm_content') || '',\n      utm_term: this.#getStoredValue('utm_term') || '',\n      \n      // Other tracking parameters\n      fbclid: fbclid,\n      \n      // Sub-affiliate parameters (renamed from sub1, sub2, etc.)\n      subaffiliate1: this.#getStoredValue('subaffiliate1') || this.#getStoredValue('sub1') || '',\n      subaffiliate2: this.#getStoredValue('subaffiliate2') || this.#getStoredValue('sub2') || '',\n      subaffiliate3: this.#getStoredValue('subaffiliate3') || this.#getStoredValue('sub3') || '',\n      subaffiliate4: this.#getStoredValue('subaffiliate4') || this.#getStoredValue('sub4') || '',\n      subaffiliate5: this.#getStoredValue('subaffiliate5') || this.#getStoredValue('sub5') || '',\n      \n      // Time data\n      first_visit_timestamp: this.#getFirstVisitTimestamp(),\n      current_visit_timestamp: Date.now()\n    };\n\n    this.#logger.debug('Attribution data collected', this.#attributionData);\n    \n    // Check if we need to update when campaign data becomes available\n    if (!campaignName && this.#app.events) {\n      this.#logger.debug('Campaign data not available yet, will update when loaded');\n    }\n  }\n\n  /**\n   * Collect all meta tracking tags and add them to metadata object\n   * @param {Object} metadata - The metadata object to update\n   */\n  #collectTrackingTags(metadata) {\n    const trackingTags = document.querySelectorAll('meta[name=\"os-tracking-tag\"]');\n    this.#logger.debug(`Found ${trackingTags.length} tracking tags`);\n    \n    trackingTags.forEach(tag => {\n      const tagName = tag.getAttribute('data-tag-name');\n      const tagValue = tag.getAttribute('data-tag-value');\n      const shouldPersist = tag.getAttribute('data-persist') === 'true';\n      \n      if (tagName && tagValue) {\n        metadata[tagName] = tagValue;\n        this.#logger.debug(`Added tracking tag: ${tagName} = ${tagValue}`);\n        \n        // Store in sessionStorage if it should persist\n        if (shouldPersist) {\n          try {\n            sessionStorage.setItem(`os_tag_${tagName}`, tagValue);\n            this.#logger.debug(`Persisted tracking tag: ${tagName} = ${tagValue}`);\n          } catch (error) {\n            this.#logger.error(`Error persisting tracking tag ${tagName}:`, error);\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * Store attribution data in the state\n   */\n  #storeAttributionData() {\n    if (!this.#app.state) {\n      this.#logger.warn('State manager not available, attribution data will not be stored');\n      return;\n    }\n\n    // Store the complete attribution data\n    this.#app.state.setState('cart.attribution', this.#attributionData);\n    \n    // Also store specific API-compatible attribution object for checkout\n    this.#app.state.setState('attribution', this.getAttributionForApi());\n    \n    this.#logger.info('Attribution data stored in state');\n    \n    // Also store in localStorage for persistence across sessions\n    this.#persistAttributionData();\n  }\n\n  /**\n   * Persist attribution data to localStorage\n   */\n  #persistAttributionData() {\n    try {\n      localStorage.setItem('os_attribution', JSON.stringify(this.#attributionData));\n      this.#logger.debug('Attribution data persisted to localStorage');\n    } catch (error) {\n      this.#logger.error('Error persisting attribution data to localStorage:', error);\n    }\n  }\n\n  /**\n   * Load persisted attribution data from localStorage\n   * @returns {Object} The loaded attribution data\n   */\n  #loadPersistedAttributionData() {\n    try {\n      const persistedData = localStorage.getItem('os_attribution');\n      if (persistedData) {\n        return JSON.parse(persistedData);\n      }\n    } catch (error) {\n      this.#logger.error('Error loading attribution data from localStorage:', error);\n    }\n    return {};\n  }\n\n  /**\n   * Get the first visit timestamp\n   * @returns {number} The timestamp of the first visit\n   */\n  #getFirstVisitTimestamp() {\n    // Try to get from localStorage first\n    const persistedData = this.#loadPersistedAttributionData();\n    if (persistedData.first_visit_timestamp) {\n      return persistedData.first_visit_timestamp;\n    }\n    \n    // Otherwise, use the current timestamp\n    return Date.now();\n  }\n\n  /**\n   * Set up event listeners for page navigation\n   */\n  #setupEventListeners() {\n    // Listen for page changes to update landing page\n    window.addEventListener('popstate', () => {\n      const metadata = this.#attributionData.metadata || {};\n      metadata.landing_page = window.location.href;\n      \n      this.updateAttributionData({\n        metadata: metadata\n      });\n    });\n    \n    // Listen for campaign data loading\n    if (this.#app.events) {\n      this.#app.events.on('campaign.loaded', (data) => {\n        if (data && data.campaign) {\n          // Get the campaign name using the helper or directly from data\n          const campaignName = this.#app.campaign?.getCampaignName() || data.campaign.name || '';\n          if (!campaignName) {\n            this.#logger.warn('Campaign loaded but name is not available');\n            return;\n          }\n          \n          this.#logger.info(`Campaign loaded: ${campaignName}`);\n          \n          // Get the current funnel from meta tag (if any)\n          const funnelMetaTag = document.querySelector('meta[name=\"os-tracking-tag\"][data-tag-name=\"funnel_name\"]');\n          const funnelIdFromTag = funnelMetaTag ? funnelMetaTag.getAttribute('data-tag-value') : '';\n          \n          // Use the funnel ID from meta tag if available, otherwise use campaign name\n          const funnel = funnelIdFromTag || campaignName;\n          \n          // Update the funnel field\n          this.updateAttributionData({\n            funnel: funnel\n          });\n          \n          // Also reinitialize the attribution data to ensure it includes latest campaign information\n          this.#reinitializeAttributionData();\n          \n          this.#logger.debug(`Updated funnel to: ${funnel} (from ${funnelIdFromTag ? 'meta tag' : 'campaign name'})`);\n        }\n      });\n      \n      // Listen for cart creation events\n      this.#app.events.on('prospect.cartCreated', () => {\n        const metadata = this.#attributionData.metadata || {};\n        metadata.conversion_timestamp = Date.now();\n        \n        this.updateAttributionData({\n          metadata: metadata\n        });\n        \n        this.#logger.debug('Cart created, updated metadata with conversion timestamp');\n      });\n    }\n  }\n\n  /**\n   * Reinitialize attribution data after campaign data is loaded\n   * This ensures we have the latest campaign information\n   */\n  #reinitializeAttributionData() {\n    this.#logger.info('Reinitializing attribution data with campaign information');\n    \n    // Get campaign name for funnel ID\n    const campaignName = this.#app.campaign?.getCampaignName() || this.#app.campaignData?.name || '';\n    \n    if (!campaignName) {\n      this.#logger.warn('Cannot reinitialize attribution data: Campaign name not available');\n      return;\n    }\n    \n    // Get funnel ID from meta tag first\n    const funnelMetaTag = document.querySelector('meta[name=\"os-tracking-tag\"][data-tag-name=\"funnel_name\"]');\n    const funnelIdFromTag = funnelMetaTag ? funnelMetaTag.getAttribute('data-tag-value') : '';\n    \n    // Use funnel ID from tag if available, otherwise use campaign name\n    const funnelId = funnelIdFromTag || campaignName;\n    \n    this.#logger.debug(`Using funnel value: ${funnelId} (from ${funnelIdFromTag ? 'meta tag' : 'campaign name'})`);\n    \n    // Update funnel in attribution data\n    this.#attributionData.funnel = funnelId;\n    \n    // Update the state with this attribution data\n    this.#storeAttributionData();\n    \n    // Log debugging information\n    this.#logger.info(`Attribution data reinitialized with funnel: ${funnelId}`);\n    \n    // Trigger event to notify other components\n    if (this.#app.events) {\n      this.#app.events.trigger('attribution.updated', {\n        attribution: this.#attributionData\n      });\n    }\n  }\n\n  /**\n   * Update attribution data with new values\n   * @param {Object} newData - New attribution data to merge\n   */\n  updateAttributionData(newData) {\n    // Handle metadata updates specially to merge them instead of replacing\n    if (newData.metadata && this.#attributionData.metadata) {\n      newData.metadata = {\n        ...this.#attributionData.metadata,\n        ...newData.metadata\n      };\n    }\n    \n    // Special case for funnel - use the new value and log it\n    if (newData.funnel) {\n      this.#logger.debug(`Updating funnel value to: ${newData.funnel}`);\n    }\n    \n    this.#attributionData = {\n      ...this.#attributionData,\n      ...newData\n    };\n    \n    this.#storeAttributionData();\n    this.#logger.debug('Attribution data updated', newData);\n    \n    // Trigger event\n    if (this.#app.events) {\n      this.#app.events.trigger('attribution.updated', {\n        attribution: this.#attributionData\n      });\n    }\n  }\n\n  /**\n   * Get attribution data\n   * @returns {Object} The current attribution data\n   */\n  getAttributionData() {\n    return { ...this.#attributionData };\n  }\n  \n  /**\n   * Get attribution data formatted for API\n   * @returns {Object} Attribution data formatted for API\n   */\n  getAttributionForApi() {\n    return {\n      // Core attribution fields\n      affiliate: this.#attributionData.affiliate,\n      funnel: this.#attributionData.funnel,\n      gclid: this.#attributionData.gclid,\n      metadata: this.#attributionData.metadata,\n      \n      // UTM parameters at root level as required by API\n      utm_source: this.#attributionData.utm_source,\n      utm_medium: this.#attributionData.utm_medium,\n      utm_campaign: this.#attributionData.utm_campaign,\n      utm_content: this.#attributionData.utm_content,\n      utm_term: this.#attributionData.utm_term,\n      \n      // Subaffiliate parameters at root level as required by API\n      subaffiliate1: this.#attributionData.subaffiliate1,\n      subaffiliate2: this.#attributionData.subaffiliate2,\n      subaffiliate3: this.#attributionData.subaffiliate3,\n      subaffiliate4: this.#attributionData.subaffiliate4,\n      subaffiliate5: this.#attributionData.subaffiliate5\n    };\n  }\n\n  /**\n   * Debug method to log attribution data to console\n   * Useful for troubleshooting attribution issues\n   */\n  debug() {\n    console.group('AttributionManager Debug Info');\n    \n    // Check sources for funnel value\n    const funnelMetaTag = document.querySelector('meta[name=\"os-tracking-tag\"][data-tag-name=\"funnel_name\"]');\n    const funnelFromTag = funnelMetaTag ? funnelMetaTag.getAttribute('data-tag-value') : '';\n    const campaignName = this.#app.campaign?.getCampaignName() || this.#app.campaignData?.name || '';\n    \n    // Show key attribution values first for quick reference\n    console.log('Key Attribution Values:');\n    console.log('- Affiliate:', this.#attributionData.affiliate);\n    console.log('- Funnel:', this.#attributionData.funnel);\n    console.log('  • Funnel from meta tag:', funnelFromTag || '(not set)');\n    console.log('  • Campaign name:', campaignName || '(not set)');\n    console.log('  • Source used:', funnelFromTag ? 'meta tag' : (campaignName ? 'campaign name' : 'none'));\n    \n    // API formatted data\n    console.group('API Formatted Attribution Data (What gets sent to API)');\n    const apiData = this.getAttributionForApi();\n    \n    // Core fields\n    console.log('Core Fields:');\n    console.log('- affiliate:', apiData.affiliate);\n    console.log('- funnel:', apiData.funnel);\n    console.log('- gclid:', apiData.gclid);\n    \n    // UTM parameters\n    console.log('UTM Parameters:');\n    console.log('- utm_source:', apiData.utm_source);\n    console.log('- utm_medium:', apiData.utm_medium);\n    console.log('- utm_campaign:', apiData.utm_campaign);\n    console.log('- utm_content:', apiData.utm_content);\n    console.log('- utm_term:', apiData.utm_term);\n    \n    // Subaffiliate parameters\n    console.log('Subaffiliate Parameters:');\n    console.log('- subaffiliate1:', apiData.subaffiliate1);\n    console.log('- subaffiliate2:', apiData.subaffiliate2);\n    console.log('- subaffiliate3:', apiData.subaffiliate3);\n    console.log('- subaffiliate4:', apiData.subaffiliate4);\n    console.log('- subaffiliate5:', apiData.subaffiliate5);\n    \n    // Metadata\n    console.group('Metadata Object:');\n    console.log('- Domain:', apiData.metadata.domain);\n    console.log('- Device (User Agent):', apiData.metadata.device);\n    console.log('- Device Type:', apiData.metadata.device_type);\n    \n    // Facebook data in metadata\n    console.log('- Facebook Data:');\n    console.log('  - fb_fbp:', apiData.metadata.fb_fbp);\n    console.log('  - fb_fbc:', apiData.metadata.fb_fbc);\n    console.log('  - fb_pixel_id:', apiData.metadata.fb_pixel_id);\n    \n    console.log('- Full Metadata:', apiData.metadata);\n    console.groupEnd();\n    \n    console.groupEnd();\n    \n    // Raw attribution data\n    console.log('Raw Attribution Data:', this.#attributionData);\n    console.log('URL Parameters:', new URLSearchParams(window.location.search).toString());\n    \n    // Display tracking tags\n    console.group('Tracking Tags');\n    const trackingTags = document.querySelectorAll('meta[name=\"os-tracking-tag\"]');\n    if (trackingTags.length > 0) {\n      trackingTags.forEach(tag => {\n        console.log(`${tag.getAttribute('data-tag-name')}: ${tag.getAttribute('data-tag-value')}${tag.getAttribute('data-persist') === 'true' ? ' (persisted)' : ''}`);\n      });\n    } else {\n      console.log('No tracking tags found');\n    }\n    console.groupEnd();\n    \n    // Check for the funnel meta tag\n    console.log('Funnel Meta Tag:', funnelMetaTag ? {\n      exists: true,\n      value: funnelMetaTag.getAttribute('data-tag-value')\n    } : {\n      exists: false\n    });\n    \n    // Campaign data\n    console.log('Campaign Name:', this.#app.campaignData?.name || 'Not available');\n    \n    // Check state data\n    if (this.#app.state) {\n      console.log('API-formatted State Attribution:', this.#app.state.getState('attribution'));\n    }\n    \n    console.groupEnd();\n    \n    return 'Attribution debug info logged to console.';\n  }\n\n  /**\n   * Get a value from URL parameters, sessionStorage, or localStorage\n   * @param {string} key - The key to get\n   * @returns {string} The value\n   */\n  #getStoredValue(key) {\n    // Try to get from URL parameters first (highest priority)\n    const urlParams = new URLSearchParams(window.location.search);\n    if (urlParams.has(key)) {\n      const value = urlParams.get(key);\n      \n      // Store in sessionStorage for persistence during the session\n      try {\n        sessionStorage.setItem(key, value);\n      } catch (error) {\n        this.#logger.error(`Error storing ${key} in sessionStorage:`, error);\n      }\n      \n      return value;\n    }\n    \n    // Try to get from sessionStorage (second priority)\n    try {\n      if (sessionStorage.getItem(key)) {\n        return sessionStorage.getItem(key);\n      }\n    } catch (error) {\n      this.#logger.error(`Error reading ${key} from sessionStorage:`, error);\n    }\n    \n    // Try to get from localStorage (third priority)\n    try {\n      if (localStorage.getItem(key)) {\n        return localStorage.getItem(key);\n      }\n    } catch (error) {\n      this.#logger.error(`Error reading ${key} from localStorage:`, error);\n    }\n    \n    // Try to get from persisted attribution data (lowest priority)\n    const persistedData = this.#loadPersistedAttributionData();\n    if (persistedData[key]) {\n      return persistedData[key];\n    }\n    \n    return '';\n  }\n\n  /**\n   * Get a cookie value\n   * @param {string} name - The cookie name\n   * @returns {string} The cookie value\n   */\n  #getCookie(name) {\n    const value = `; ${document.cookie}`;\n    const parts = value.split(`; ${name}=`);\n    if (parts.length === 2) return parts.pop().split(';').shift();\n    return '';\n  }\n\n  /**\n   * Get the device type based on user agent\n   * @returns {string} The device type\n   */\n  #getDeviceType() {\n    const userAgent = navigator.userAgent;\n    \n    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent)) {\n      return 'mobile';\n    }\n    \n    return 'desktop';\n  }\n\n  /**\n   * Try to detect Facebook Pixel ID from the page\n   * @returns {string} The Facebook Pixel ID or empty string if not found\n   */\n  #getFacebookPixelId() {\n    // Try to find FB Pixel ID from meta tag\n    const metaPixelId = document.querySelector('meta[name=\"facebook-domain-verification\"]');\n    if (metaPixelId) {\n      const content = metaPixelId.getAttribute('content');\n      if (content && content.includes('=')) {\n        const parts = content.split('=');\n        if (parts.length > 1) {\n          return parts[1];\n        }\n      }\n    }\n    \n    // Try to find FB Pixel ID from script tags\n    const scripts = document.querySelectorAll('script');\n    for (const script of scripts) {\n      const content = script.textContent || '';\n      if (content.includes('fbq(') && content.includes('init')) {\n        const match = content.match(/fbq\\s*\\(\\s*['\"]init['\"],\\s*['\"](\\d+)['\"]/);\n        if (match && match[1]) {\n          return match[1];\n        }\n      }\n    }\n    \n    return '';\n  }\n} ", "/**\n * EventManager - Manages platform-specific events\n * \n * This class provides a centralized system for firing events to different platforms\n * such as Google Tag Manager, Facebook Pixel, etc. It handles ecommerce events\n * like view_item_list, add_to_cart, purchase, etc.\n */\n\nexport class EventManager {\n  #app;\n  #logger;\n  #isInitialized = false;\n  #platforms = {\n    gtm: { enabled: false, initialized: false },\n    fbPixel: { enabled: false, initialized: false },\n    ga4: { enabled: false, initialized: false }\n  };\n  #debugMode = false;\n  #processedOrderIds = new Set(); // Track processed order IDs to prevent duplicates\n\n  constructor(app) {\n    this.#app = app;\n    this.#logger = app.logger.createModuleLogger('EVENT');\n    this.#debugMode = app.options?.debug || false;\n    \n    // Initialize the event manager\n    this.init();\n  }\n\n  /**\n   * Initialize the event manager\n   */\n  init() {\n    this.#logger.info('Initializing EventManager');\n    \n    // Detect available platforms\n    this.#detectPlatforms();\n    \n    // Subscribe to relevant app events\n    this.#setupEventListeners();\n    \n    // Load processed order IDs from sessionStorage to prevent duplicates across page loads\n    this.#loadProcessedOrderIds();\n    \n    this.#isInitialized = true;\n    this.#logger.info('EventManager initialized');\n  }\n\n  /**\n   * Load processed order IDs from sessionStorage\n   */\n  #loadProcessedOrderIds() {\n    try {\n      const storedIds = sessionStorage.getItem('os_processed_order_ids');\n      if (storedIds) {\n        const parsedIds = JSON.parse(storedIds);\n        if (Array.isArray(parsedIds)) {\n          parsedIds.forEach(id => this.#processedOrderIds.add(id));\n          this.#logger.debug(`Loaded ${parsedIds.length} processed order IDs from sessionStorage`);\n        }\n      }\n    } catch (error) {\n      this.#logger.error('Error loading processed order IDs from sessionStorage:', error);\n    }\n  }\n\n  /**\n   * Save processed order IDs to sessionStorage\n   */\n  #saveProcessedOrderIds() {\n    try {\n      const idsArray = Array.from(this.#processedOrderIds);\n      sessionStorage.setItem('os_processed_order_ids', JSON.stringify(idsArray));\n      this.#logger.debug(`Saved ${idsArray.length} processed order IDs to sessionStorage`);\n    } catch (error) {\n      this.#logger.error('Error saving processed order IDs to sessionStorage:', error);\n    }\n  }\n\n  /**\n   * Detect which platforms are available\n   */\n  #detectPlatforms() {\n    // Check for Google Tag Manager\n    if (typeof window.dataLayer !== 'undefined') {\n      this.#platforms.gtm.enabled = true;\n      this.#platforms.gtm.initialized = true;\n      this.#logger.info('Google Tag Manager detected');\n    } else {\n      this.#logger.info('Google Tag Manager not detected');\n    }\n\n    // Check for Facebook Pixel\n    if (typeof window.fbq !== 'undefined') {\n      this.#platforms.fbPixel.enabled = true;\n      this.#platforms.fbPixel.initialized = true;\n      this.#logger.info('Facebook Pixel detected');\n    } else {\n      this.#logger.info('Facebook Pixel not detected');\n    }\n\n    // Check for Google Analytics 4\n    if (typeof window.gtag !== 'undefined') {\n      this.#platforms.ga4.enabled = true;\n      this.#platforms.ga4.initialized = true;\n      this.#logger.info('Google Analytics 4 detected');\n    } else {\n      this.#logger.info('Google Analytics 4 not detected');\n    }\n  }\n\n  /**\n   * Setup event listeners for app events\n   */\n  #setupEventListeners() {\n    // Listen for campaign loaded event\n    this.#app.on('campaign.loaded', (data) => {\n      this.#logger.debug('Campaign loaded event received, firing view_item_list');\n      if (data && data.campaign) {\n        this.viewItemList(data.campaign);\n      } else {\n        this.#logger.warn('Campaign loaded event received but no campaign data found');\n      }\n    });\n\n    // Listen for cart updated event\n    this.#app.on('cart.updated', (data) => {\n      if (data.cart && data.cart.items && data.cart.items.length > 0) {\n        this.addToCart(data.cart);\n      }\n    });\n\n    // Listen for order created event\n    this.#app.on('order.created', (data) => {\n      this.purchase(data);\n    });\n    \n    // Listen for order loaded event (for receipt page)\n    this.#app.on('order.loaded', (data) => {\n      if (data.order) {\n        this.#logger.info('Order loaded on receipt page, checking if purchase event needed');\n        this.purchase(data.order);\n      }\n    });\n  }\n\n  /**\n   * Fire a view_item_list event\n   * @param {Object} campaignData - The campaign data\n   */\n  viewItemList(campaignData) {\n    this.#logger.debug('viewItemList called with campaign data:', campaignData ? 'present' : 'missing');\n    \n    if (!campaignData || !campaignData.packages || campaignData.packages.length === 0) {\n      this.#logger.warn('Cannot fire view_item_list event: No packages found in campaign data');\n      return;\n    }\n\n    this.#logger.debug(`Found ${campaignData.packages.length} packages in campaign data`);\n    \n    const items = campaignData.packages.map(pkg => ({\n      item_id: pkg.external_id || pkg.ref_id,\n      item_name: pkg.name,\n      price: parseFloat(pkg.price) || 0,\n      currency: campaignData.currency || 'USD',\n      quantity: 1\n    }));\n\n    const eventData = {\n      event: 'view_item_list',\n      ecommerce: {\n        currency: campaignData.currency || 'USD',\n        items: items\n      }\n    };\n\n    this.#logger.debug('Firing view_item_list event with data:', eventData);\n    this.#fireEvent('view_item_list', eventData);\n  }\n\n  /**\n   * Fire an add_to_cart event\n   * @param {Object} cartData - The cart data or a single package object\n   */\n  addToCart(cartData) {\n    // Check if this is a single package object rather than a cart\n    const isSinglePackage = !cartData.items && !cartData.totals;\n    \n    let items = [];\n    let currency = 'USD';\n    let value = 0;\n    \n    if (isSinglePackage) {\n      // Convert single package to cart format\n      this.#logger.debug('addToCart called with single package, converting to cart format');\n      \n      if (!cartData) {\n        this.#logger.warn('Cannot fire add_to_cart event: No package data provided');\n        return;\n      }\n      \n      // Extract package data\n      const pkg = cartData;\n      const item = {\n        item_id: pkg.external_id || pkg.ref_id || pkg.id,\n        item_name: pkg.name,\n        price: parseFloat(pkg.price) || 0,\n        currency: pkg.currency || this.#app.getCampaignData()?.currency || 'USD',\n        quantity: pkg.quantity || 1\n      };\n      \n      items = [item];\n      currency = item.currency;\n      value = item.price * item.quantity;\n    } else {\n      // Standard cart format\n      if (!cartData || !cartData.items || cartData.items.length === 0) {\n        this.#logger.warn('Cannot fire add_to_cart event: No items in cart');\n        return;\n      }\n      \n      items = cartData.items.map(item => ({\n        item_id: item.external_id || item.id,\n        item_name: item.name,\n        price: parseFloat(item.price) || 0,\n        currency: cartData.totals?.currency || 'USD',\n        quantity: item.quantity || 1\n      }));\n      \n      currency = cartData.totals?.currency || 'USD';\n      value = cartData.totals?.total || 0;\n    }\n\n    const eventData = {\n      event: 'add_to_cart',\n      ecommerce: {\n        currency: currency,\n        value: value,\n        items: items\n      }\n    };\n\n    this.#fireEvent('add_to_cart', eventData);\n  }\n\n  /**\n   * Fire a purchase event\n   * @param {Object} orderData - The order data\n   * @param {boolean} force - Whether to force firing the event even if the order ID has been processed\n   */\n  purchase(orderData, force = false) {\n    if (!orderData || !orderData.lines || orderData.lines.length === 0) {\n      this.#logger.warn('Cannot fire purchase event: No items in order');\n      return;\n    }\n\n    // Check if this order has already been processed\n    const orderId = orderData.number || orderData.ref_id;\n    if (!force && orderId && this.#processedOrderIds.has(orderId)) {\n      this.#logger.info(`Purchase event for order ${orderId} already fired, skipping`);\n      return;\n    }\n\n    const items = orderData.lines.map(line => ({\n      item_id: line.product_id || line.id,\n      item_name: line.product_title || line.name,\n      price: parseFloat(line.price_incl_tax || line.price) || 0,\n      currency: orderData.currency || 'USD',\n      quantity: line.quantity || 1\n    }));\n\n    // Get user data with privacy considerations\n    const userData = this.#getUserDataForTracking(orderData);\n\n    const eventData = {\n      event: 'purchase',\n      ecommerce: {\n        transaction_id: orderId,\n        value: parseFloat(orderData.total_incl_tax || orderData.total) || 0,\n        tax: parseFloat(orderData.total_tax) || 0,\n        shipping: parseFloat(orderData.shipping_incl_tax || orderData.shipping) || 0,\n        currency: orderData.currency || 'USD',\n        coupon: orderData.vouchers?.length > 0 ? orderData.vouchers[0].code : '',\n        ...userData,\n        items: items\n      }\n    };\n\n    this.#fireEvent('purchase', eventData);\n\n    // Mark this order as processed\n    if (orderId) {\n      this.#processedOrderIds.add(orderId);\n      this.#saveProcessedOrderIds();\n      this.#logger.debug(`Marked order ${orderId} as processed`);\n    }\n  }\n\n  /**\n   * Get user data for tracking with privacy considerations\n   * @param {Object} orderData - The order data\n   * @returns {Object} - User data for tracking\n   */\n  #getUserDataForTracking(orderData) {\n    const userData = {};\n    \n    if (orderData.user) {\n      // Only include non-PII data or hashed values\n      if (orderData.user.first_name) userData.firstname = orderData.user.first_name;\n      if (orderData.user.last_name) userData.lastname = orderData.user.last_name;\n      \n      // Hash email for privacy\n      if (orderData.user.email) {\n        userData.email_hash = this.#hashString(orderData.user.email);\n      }\n    }\n    \n    if (orderData.shipping_address) {\n      userData.city = orderData.shipping_address.line4 || '';\n      userData.state = orderData.shipping_address.state || '';\n      userData.zipcode = orderData.shipping_address.postcode || '';\n      userData.country = orderData.shipping_address.country || '';\n    }\n    \n    return userData;\n  }\n\n  /**\n   * Hash a string for privacy\n   * @param {string} str - The string to hash\n   * @returns {string} - The hashed string\n   */\n  #hashString(str) {\n    let hash = 0;\n    if (str.length === 0) return hash.toString();\n    \n    for (let i = 0; i < str.length; i++) {\n      const char = str.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash; // Convert to 32bit integer\n    }\n    \n    return hash.toString();\n  }\n\n  /**\n   * Fire an event to all enabled platforms\n   * @param {string} eventName - The name of the event\n   * @param {Object} eventData - The event data\n   */\n  #fireEvent(eventName, eventData) {\n    this.#logger.debug(`Firing ${eventName} event`, eventData);\n\n    // Clear previous ecommerce data for GTM\n    if (this.#platforms.gtm.enabled) {\n      window.dataLayer = window.dataLayer || [];\n      this.#logger.debug('Clearing previous ecommerce data in dataLayer');\n      window.dataLayer.push({ ecommerce: null });\n      \n      // Add a console log that's easy to spot\n      console.log(`🔥 Firing ${eventName} event to dataLayer`);\n      \n      // this.#logger.debug('Pushing event data to dataLayer');\n      window.dataLayer.push(eventData);\n      \n\n      this.#logger.debug(`${eventName} event fired to Google Tag Manager`);\n    } else {\n      this.#logger.warn(`Cannot fire ${eventName} event to GTM: GTM not enabled`);\n      \n      // Try to initialize dataLayer anyway\n      console.log('GTM not detected, initializing dataLayer and pushing event');\n      window.dataLayer = window.dataLayer || [];\n      window.dataLayer.push({ ecommerce: null });\n      window.dataLayer.push(eventData);\n    }\n\n    // Fire event to Facebook Pixel\n    if (this.#platforms.fbPixel.enabled) {\n      switch (eventName) {\n        case 'view_item_list':\n          window.fbq('track', 'ViewContent', {\n            content_type: 'product_group',\n            content_ids: eventData.ecommerce.items.map(item => item.item_id),\n            currency: eventData.ecommerce.currency\n          });\n          break;\n        case 'add_to_cart':\n          window.fbq('track', 'AddToCart', {\n            content_type: 'product_group',\n            content_ids: eventData.ecommerce.items.map(item => item.item_id),\n            currency: eventData.ecommerce.currency,\n            value: eventData.ecommerce.value\n          });\n          break;\n        case 'purchase':\n          window.fbq('track', 'Purchase', {\n            content_type: 'product_group',\n            content_ids: eventData.ecommerce.items.map(item => item.item_id),\n            currency: eventData.ecommerce.currency,\n            value: eventData.ecommerce.value\n          });\n          break;\n      }\n      this.#logger.debug(`${eventName} event fired to Facebook Pixel`);\n    }\n\n    // Fire event to Google Analytics 4\n    if (this.#platforms.ga4.enabled) {\n      window.gtag('event', eventName, {\n        currency: eventData.ecommerce.currency,\n        value: eventData.ecommerce.value,\n        items: eventData.ecommerce.items\n      });\n      this.#logger.debug(`${eventName} event fired to Google Analytics 4`);\n    }\n\n    // Dispatch a DOM event for custom handlers\n    const customEvent = new CustomEvent(`os:${eventName}`, {\n      bubbles: true,\n      detail: eventData\n    });\n    document.dispatchEvent(customEvent);\n  }\n\n  /**\n   * Manually fire a view_item event\n   * @param {Object} packageData - The package data\n   */\n  viewItem(packageData) {\n    if (!packageData) {\n      this.#logger.warn('Cannot fire view_item event: No package data provided');\n      return;\n    }\n\n    const item = {\n      item_id: packageData.ref_id || packageData.external_id || packageData.id,\n      item_name: packageData.name,\n      price: parseFloat(packageData.price) || 0,\n      currency: packageData.currency || this.#app.getCampaignData()?.currency || 'USD',\n      quantity: 1\n    };\n\n    const eventData = {\n      event: 'view_item',\n      ecommerce: {\n        currency: item.currency,\n        value: item.price,\n        items: [item]\n      }\n    };\n\n    this.#fireEvent('view_item', eventData);\n  }\n\n  /**\n   * Manually fire a begin_checkout event\n   */\n  beginCheckout() {\n    const cart = this.#app.state.getState('cart');\n    \n    if (!cart || !cart.items || cart.items.length === 0) {\n      this.#logger.warn('Cannot fire begin_checkout event: No items in cart');\n      return;\n    }\n\n    const items = cart.items.map(item => ({\n      item_id: item.external_id || item.id,\n      item_name: item.name,\n      price: parseFloat(item.price) || 0,\n      currency: cart.totals?.currency || 'USD',\n      quantity: item.quantity || 1\n    }));\n\n    const eventData = {\n      event: 'begin_checkout',\n      ecommerce: {\n        currency: cart.totals?.currency || 'USD',\n        value: cart.totals?.total || 0,\n        items: items\n      }\n    };\n\n    this.#fireEvent('begin_checkout', eventData);\n  }\n\n  /**\n   * Manually fire a custom event\n   * @param {string} eventName - The name of the event\n   * @param {Object} eventData - The event data\n   */\n  fireCustomEvent(eventName, eventData = {}) {\n    if (!eventName) {\n      this.#logger.warn('Cannot fire custom event: No event name provided');\n      return;\n    }\n\n    const formattedEventData = {\n      event: eventName,\n      ...eventData\n    };\n\n    this.#logger.debug(`Firing custom event: ${eventName}`, formattedEventData);\n\n    // Fire to Google Tag Manager\n    if (this.#platforms.gtm.enabled) {\n      window.dataLayer = window.dataLayer || [];\n      window.dataLayer.push(formattedEventData);\n      this.#logger.debug(`Custom event ${eventName} fired to Google Tag Manager`);\n    }\n\n    // Fire to Facebook Pixel\n    if (this.#platforms.fbPixel.enabled && typeof window.fbq === 'function') {\n      window.fbq('trackCustom', eventName, eventData);\n      this.#logger.debug(`Custom event ${eventName} fired to Facebook Pixel`);\n    }\n\n    // Fire to Google Analytics 4\n    if (this.#platforms.ga4.enabled && typeof window.gtag === 'function') {\n      window.gtag('event', eventName, eventData);\n      this.#logger.debug(`Custom event ${eventName} fired to Google Analytics 4`);\n    }\n\n    // Dispatch a DOM event for custom handlers\n    const customEvent = new CustomEvent(`os:${eventName}`, {\n      bubbles: true,\n      detail: formattedEventData\n    });\n    document.dispatchEvent(customEvent);\n  }\n\n  /**\n   * Enable or disable a platform\n   * @param {string} platform - The platform to enable/disable (gtm, fbPixel, ga4)\n   * @param {boolean} enabled - Whether to enable or disable the platform\n   */\n  setPlatformEnabled(platform, enabled) {\n    if (this.#platforms[platform]) {\n      this.#platforms[platform].enabled = enabled;\n      this.#logger.info(`${platform} ${enabled ? 'enabled' : 'disabled'}`);\n    } else {\n      this.#logger.warn(`Unknown platform: ${platform}`);\n    }\n  }\n\n  /**\n   * Get the status of all platforms\n   * @returns {Object} - The status of all platforms\n   */\n  getPlatformStatus() {\n    return { ...this.#platforms };\n  }\n} ", "/**\n * Custom positioning reference element.\n * @see https://floating-ui.com/docs/virtual-elements\n */\n\nconst sides = ['top', 'right', 'bottom', 'left'];\nconst alignments = ['start', 'end'];\nconst placements = /*#__PURE__*/sides.reduce((acc, side) => acc.concat(side, side + \"-\" + alignments[0], side + \"-\" + alignments[1]), []);\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\nconst floor = Math.floor;\nconst createCoords = v => ({\n  x: v,\n  y: v\n});\nconst oppositeSideMap = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nconst oppositeAlignmentMap = {\n  start: 'end',\n  end: 'start'\n};\nfunction clamp(start, value, end) {\n  return max(start, min(value, end));\n}\nfunction evaluate(value, param) {\n  return typeof value === 'function' ? value(param) : value;\n}\nfunction getSide(placement) {\n  return placement.split('-')[0];\n}\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\nfunction getOppositeAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\nfunction getAxisLength(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\nfunction getSideAxis(placement) {\n  return ['top', 'bottom'].includes(getSide(placement)) ? 'y' : 'x';\n}\nfunction getAlignmentAxis(placement) {\n  return getOppositeAxis(getSideAxis(placement));\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const length = getAxisLength(alignmentAxis);\n  let mainAlignmentSide = alignmentAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return [mainAlignmentSide, getOppositePlacement(mainAlignmentSide)];\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, alignment => oppositeAlignmentMap[alignment]);\n}\nfunction getSideList(side, isStart, rtl) {\n  const lr = ['left', 'right'];\n  const rl = ['right', 'left'];\n  const tb = ['top', 'bottom'];\n  const bt = ['bottom', 'top'];\n  switch (side) {\n    case 'top':\n    case 'bottom':\n      if (rtl) return isStart ? rl : lr;\n      return isStart ? lr : rl;\n    case 'left':\n    case 'right':\n      return isStart ? tb : bt;\n    default:\n      return [];\n  }\n}\nfunction getOppositeAxisPlacements(placement, flipAlignment, direction, rtl) {\n  const alignment = getAlignment(placement);\n  let list = getSideList(getSide(placement), direction === 'start', rtl);\n  if (alignment) {\n    list = list.map(side => side + \"-\" + alignment);\n    if (flipAlignment) {\n      list = list.concat(list.map(getOppositeAlignmentPlacement));\n    }\n  }\n  return list;\n}\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, side => oppositeSideMap[side]);\n}\nfunction expandPaddingObject(padding) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...padding\n  };\n}\nfunction getPaddingObject(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = rect;\n  return {\n    width,\n    height,\n    top: y,\n    left: x,\n    right: x + width,\n    bottom: y + height,\n    x,\n    y\n  };\n}\n\nexport { alignments, clamp, createCoords, evaluate, expandPaddingObject, floor, getAlignment, getAlignmentAxis, getAlignmentSides, getAxisLength, getExpandedPlacements, getOppositeAlignmentPlacement, getOppositeAxis, getOppositeAxisPlacements, getOppositePlacement, getPaddingObject, getSide, getSideAxis, max, min, placements, rectToClientRect, round, sides };\n", "import { getSideAxis, getAlignmentAxis, getAxisLength, getSide, getAlignment, evaluate, getPaddingObject, rectToClientRect, min, clamp, placements, getAlignmentSides, getOppositeAlignmentPlacement, getOppositePlacement, getExpandedPlacements, getOppositeAxisPlacements, sides, max, getOppositeAxis } from '@floating-ui/utils';\nexport { rectToClientRect } from '@floating-ui/utils';\n\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const sideAxis = getSideAxis(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const alignLength = getAxisLength(alignmentAxis);\n  const side = getSide(placement);\n  const isVertical = sideAxis === 'y';\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const commonAlign = reference[alignLength] / 2 - floating[alignLength] / 2;\n  let coords;\n  switch (side) {\n    case 'top':\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case 'bottom':\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case 'right':\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case 'left':\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case 'start':\n      coords[alignmentAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case 'end':\n      coords[alignmentAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n *\n * This export does not have any `platform` interface logic. You will need to\n * write one for the platform you are using Floating UI with.\n */\nconst computePosition = async (reference, floating, config) => {\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform\n  } = config;\n  const validMiddleware = middleware.filter(Boolean);\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(floating));\n  let rects = await platform.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  let resetCount = 0;\n  for (let i = 0; i < validMiddleware.length; i++) {\n    const {\n      name,\n      fn\n    } = validMiddleware[i];\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = {\n      ...middlewareData,\n      [name]: {\n        ...middlewareData[name],\n        ...data\n      }\n    };\n    if (reset && resetCount <= 50) {\n      resetCount++;\n      if (typeof reset === 'object') {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n      }\n      i = -1;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nasync function detectOverflow(state, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform,\n    rects,\n    elements,\n    strategy\n  } = state;\n  const {\n    boundary = 'clippingAncestors',\n    rootBoundary = 'viewport',\n    elementContext = 'floating',\n    altBoundary = false,\n    padding = 0\n  } = evaluate(options, state);\n  const paddingObject = getPaddingObject(padding);\n  const altContext = elementContext === 'floating' ? 'reference' : 'floating';\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform.getClippingRect({\n    element: ((_await$platform$isEle = await (platform.isElement == null ? void 0 : platform.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || (await (platform.getDocumentElement == null ? void 0 : platform.getDocumentElement(elements.floating))),\n    boundary,\n    rootBoundary,\n    strategy\n  }));\n  const rect = elementContext === 'floating' ? {\n    x,\n    y,\n    width: rects.floating.width,\n    height: rects.floating.height\n  } : rects.reference;\n  const offsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating));\n  const offsetScale = (await (platform.isElement == null ? void 0 : platform.isElement(offsetParent))) ? (await (platform.getScale == null ? void 0 : platform.getScale(offsetParent))) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  };\n  const elementClientRect = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  }) : rect);\n  return {\n    top: (clippingClientRect.top - elementClientRect.top + paddingObject.top) / offsetScale.y,\n    bottom: (elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom) / offsetScale.y,\n    left: (clippingClientRect.left - elementClientRect.left + paddingObject.left) / offsetScale.x,\n    right: (elementClientRect.right - clippingClientRect.right + paddingObject.right) / offsetScale.x\n  };\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = options => ({\n  name: 'arrow',\n  options,\n  async fn(state) {\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform,\n      elements,\n      middlewareData\n    } = state;\n    // Since `element` is required, we don't Partial<> the type.\n    const {\n      element,\n      padding = 0\n    } = evaluate(options, state) || {};\n    if (element == null) {\n      return {};\n    }\n    const paddingObject = getPaddingObject(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getAlignmentAxis(placement);\n    const length = getAxisLength(axis);\n    const arrowDimensions = await platform.getDimensions(element);\n    const isYAxis = axis === 'y';\n    const minProp = isYAxis ? 'top' : 'left';\n    const maxProp = isYAxis ? 'bottom' : 'right';\n    const clientProp = isYAxis ? 'clientHeight' : 'clientWidth';\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(element));\n    let clientSize = arrowOffsetParent ? arrowOffsetParent[clientProp] : 0;\n\n    // DOM platform can return `window` as the `offsetParent`.\n    if (!clientSize || !(await (platform.isElement == null ? void 0 : platform.isElement(arrowOffsetParent)))) {\n      clientSize = elements.floating[clientProp] || rects.floating[length];\n    }\n    const centerToReference = endDiff / 2 - startDiff / 2;\n\n    // If the padding is large enough that it causes the arrow to no longer be\n    // centered, modify the padding so that it is centered.\n    const largestPossiblePadding = clientSize / 2 - arrowDimensions[length] / 2 - 1;\n    const minPadding = min(paddingObject[minProp], largestPossiblePadding);\n    const maxPadding = min(paddingObject[maxProp], largestPossiblePadding);\n\n    // Make sure the arrow doesn't overflow the floating element if the center\n    // point is outside the floating element's bounds.\n    const min$1 = minPadding;\n    const max = clientSize - arrowDimensions[length] - maxPadding;\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset = clamp(min$1, center, max);\n\n    // If the reference is small enough that the arrow's padding causes it to\n    // to point to nothing for an aligned placement, adjust the offset of the\n    // floating element itself. To ensure `shift()` continues to take action,\n    // a single reset is performed when this is true.\n    const shouldAddOffset = !middlewareData.arrow && getAlignment(placement) != null && center !== offset && rects.reference[length] / 2 - (center < min$1 ? minPadding : maxPadding) - arrowDimensions[length] / 2 < 0;\n    const alignmentOffset = shouldAddOffset ? center < min$1 ? center - min$1 : center - max : 0;\n    return {\n      [axis]: coords[axis] + alignmentOffset,\n      data: {\n        [axis]: offset,\n        centerOffset: center - offset - alignmentOffset,\n        ...(shouldAddOffset && {\n          alignmentOffset\n        })\n      },\n      reset: shouldAddOffset\n    };\n  }\n});\n\nfunction getPlacementList(alignment, autoAlignment, allowedPlacements) {\n  const allowedPlacementsSortedByAlignment = alignment ? [...allowedPlacements.filter(placement => getAlignment(placement) === alignment), ...allowedPlacements.filter(placement => getAlignment(placement) !== alignment)] : allowedPlacements.filter(placement => getSide(placement) === placement);\n  return allowedPlacementsSortedByAlignment.filter(placement => {\n    if (alignment) {\n      return getAlignment(placement) === alignment || (autoAlignment ? getOppositeAlignmentPlacement(placement) !== placement : false);\n    }\n    return true;\n  });\n}\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'autoPlacement',\n    options,\n    async fn(state) {\n      var _middlewareData$autoP, _middlewareData$autoP2, _placementsThatFitOnE;\n      const {\n        rects,\n        middlewareData,\n        placement,\n        platform,\n        elements\n      } = state;\n      const {\n        crossAxis = false,\n        alignment,\n        allowedPlacements = placements,\n        autoAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const placements$1 = alignment !== undefined || allowedPlacements === placements ? getPlacementList(alignment || null, autoAlignment, allowedPlacements) : allowedPlacements;\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const currentIndex = ((_middlewareData$autoP = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP.index) || 0;\n      const currentPlacement = placements$1[currentIndex];\n      if (currentPlacement == null) {\n        return {};\n      }\n      const alignmentSides = getAlignmentSides(currentPlacement, rects, await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating)));\n\n      // Make `computeCoords` start from the right place.\n      if (placement !== currentPlacement) {\n        return {\n          reset: {\n            placement: placements$1[0]\n          }\n        };\n      }\n      const currentOverflows = [overflow[getSide(currentPlacement)], overflow[alignmentSides[0]], overflow[alignmentSides[1]]];\n      const allOverflows = [...(((_middlewareData$autoP2 = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP2.overflows) || []), {\n        placement: currentPlacement,\n        overflows: currentOverflows\n      }];\n      const nextPlacement = placements$1[currentIndex + 1];\n\n      // There are more placements to check.\n      if (nextPlacement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: nextPlacement\n          }\n        };\n      }\n      const placementsSortedByMostSpace = allOverflows.map(d => {\n        const alignment = getAlignment(d.placement);\n        return [d.placement, alignment && crossAxis ?\n        // Check along the mainAxis and main crossAxis side.\n        d.overflows.slice(0, 2).reduce((acc, v) => acc + v, 0) :\n        // Check only the mainAxis.\n        d.overflows[0], d.overflows];\n      }).sort((a, b) => a[1] - b[1]);\n      const placementsThatFitOnEachSide = placementsSortedByMostSpace.filter(d => d[2].slice(0,\n      // Aligned placements should not check their opposite crossAxis\n      // side.\n      getAlignment(d[0]) ? 2 : 3).every(v => v <= 0));\n      const resetPlacement = ((_placementsThatFitOnE = placementsThatFitOnEachSide[0]) == null ? void 0 : _placementsThatFitOnE[0]) || placementsSortedByMostSpace[0][0];\n      if (resetPlacement !== placement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'flip',\n    options,\n    async fn(state) {\n      var _middlewareData$arrow, _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform,\n        elements\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = 'bestFit',\n        fallbackAxisSideDirection = 'none',\n        flipAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n\n      // If a reset by the arrow was caused due to an alignment offset being\n      // added, we should skip any logic now since `flip()` has already done its\n      // work.\n      // https://github.com/floating-ui/floating-ui/issues/2549#issuecomment-1719601643\n      if ((_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      const side = getSide(placement);\n      const initialSideAxis = getSideAxis(initialPlacement);\n      const isBasePlacement = getSide(initialPlacement) === initialPlacement;\n      const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      const hasFallbackAxisSideDirection = fallbackAxisSideDirection !== 'none';\n      if (!specifiedFallbackPlacements && hasFallbackAxisSideDirection) {\n        fallbackPlacements.push(...getOppositeAxisPlacements(initialPlacement, flipAlignment, fallbackAxisSideDirection, rtl));\n      }\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const sides = getAlignmentSides(placement, rects, rtl);\n        overflows.push(overflow[sides[0]], overflow[sides[1]]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n\n      // One or more sides is overflowing.\n      if (!overflows.every(side => side <= 0)) {\n        var _middlewareData$flip2, _overflowsData$filter;\n        const nextIndex = (((_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) || 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          // Try next placement and re-run the lifecycle.\n          return {\n            data: {\n              index: nextIndex,\n              overflows: overflowsData\n            },\n            reset: {\n              placement: nextPlacement\n            }\n          };\n        }\n\n        // First, find the candidates that fit on the mainAxis side of overflow,\n        // then find the placement that fits the best on the main crossAxis side.\n        let resetPlacement = (_overflowsData$filter = overflowsData.filter(d => d.overflows[0] <= 0).sort((a, b) => a.overflows[1] - b.overflows[1])[0]) == null ? void 0 : _overflowsData$filter.placement;\n\n        // Otherwise fallback.\n        if (!resetPlacement) {\n          switch (fallbackStrategy) {\n            case 'bestFit':\n              {\n                var _overflowsData$filter2;\n                const placement = (_overflowsData$filter2 = overflowsData.filter(d => {\n                  if (hasFallbackAxisSideDirection) {\n                    const currentSideAxis = getSideAxis(d.placement);\n                    return currentSideAxis === initialSideAxis ||\n                    // Create a bias to the `y` side axis due to horizontal\n                    // reading directions favoring greater width.\n                    currentSideAxis === 'y';\n                  }\n                  return true;\n                }).map(d => [d.placement, d.overflows.filter(overflow => overflow > 0).reduce((acc, overflow) => acc + overflow, 0)]).sort((a, b) => a[1] - b[1])[0]) == null ? void 0 : _overflowsData$filter2[0];\n                if (placement) {\n                  resetPlacement = placement;\n                }\n                break;\n              }\n            case 'initialPlacement':\n              resetPlacement = initialPlacement;\n              break;\n          }\n        }\n        if (placement !== resetPlacement) {\n          return {\n            reset: {\n              placement: resetPlacement\n            }\n          };\n        }\n      }\n      return {};\n    }\n  };\n};\n\nfunction getSideOffsets(overflow, rect) {\n  return {\n    top: overflow.top - rect.height,\n    right: overflow.right - rect.width,\n    bottom: overflow.bottom - rect.height,\n    left: overflow.left - rect.width\n  };\n}\nfunction isAnySideFullyClipped(overflow) {\n  return sides.some(side => overflow[side] >= 0);\n}\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'hide',\n    options,\n    async fn(state) {\n      const {\n        rects\n      } = state;\n      const {\n        strategy = 'referenceHidden',\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      switch (strategy) {\n        case 'referenceHidden':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              elementContext: 'reference'\n            });\n            const offsets = getSideOffsets(overflow, rects.reference);\n            return {\n              data: {\n                referenceHiddenOffsets: offsets,\n                referenceHidden: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        case 'escaped':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              altBoundary: true\n            });\n            const offsets = getSideOffsets(overflow, rects.floating);\n            return {\n              data: {\n                escapedOffsets: offsets,\n                escaped: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        default:\n          {\n            return {};\n          }\n      }\n    }\n  };\n};\n\nfunction getBoundingRect(rects) {\n  const minX = min(...rects.map(rect => rect.left));\n  const minY = min(...rects.map(rect => rect.top));\n  const maxX = max(...rects.map(rect => rect.right));\n  const maxY = max(...rects.map(rect => rect.bottom));\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getRectsByLine(rects) {\n  const sortedRects = rects.slice().sort((a, b) => a.y - b.y);\n  const groups = [];\n  let prevRect = null;\n  for (let i = 0; i < sortedRects.length; i++) {\n    const rect = sortedRects[i];\n    if (!prevRect || rect.y - prevRect.y > prevRect.height / 2) {\n      groups.push([rect]);\n    } else {\n      groups[groups.length - 1].push(rect);\n    }\n    prevRect = rect;\n  }\n  return groups.map(rect => rectToClientRect(getBoundingRect(rect)));\n}\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'inline',\n    options,\n    async fn(state) {\n      const {\n        placement,\n        elements,\n        rects,\n        platform,\n        strategy\n      } = state;\n      // A MouseEvent's client{X,Y} coords can be up to 2 pixels off a\n      // ClientRect's bounds, despite the event listener being triggered. A\n      // padding of 2 seems to handle this issue.\n      const {\n        padding = 2,\n        x,\n        y\n      } = evaluate(options, state);\n      const nativeClientRects = Array.from((await (platform.getClientRects == null ? void 0 : platform.getClientRects(elements.reference))) || []);\n      const clientRects = getRectsByLine(nativeClientRects);\n      const fallback = rectToClientRect(getBoundingRect(nativeClientRects));\n      const paddingObject = getPaddingObject(padding);\n      function getBoundingClientRect() {\n        // There are two rects and they are disjoined.\n        if (clientRects.length === 2 && clientRects[0].left > clientRects[1].right && x != null && y != null) {\n          // Find the first rect in which the point is fully inside.\n          return clientRects.find(rect => x > rect.left - paddingObject.left && x < rect.right + paddingObject.right && y > rect.top - paddingObject.top && y < rect.bottom + paddingObject.bottom) || fallback;\n        }\n\n        // There are 2 or more connected rects.\n        if (clientRects.length >= 2) {\n          if (getSideAxis(placement) === 'y') {\n            const firstRect = clientRects[0];\n            const lastRect = clientRects[clientRects.length - 1];\n            const isTop = getSide(placement) === 'top';\n            const top = firstRect.top;\n            const bottom = lastRect.bottom;\n            const left = isTop ? firstRect.left : lastRect.left;\n            const right = isTop ? firstRect.right : lastRect.right;\n            const width = right - left;\n            const height = bottom - top;\n            return {\n              top,\n              bottom,\n              left,\n              right,\n              width,\n              height,\n              x: left,\n              y: top\n            };\n          }\n          const isLeftSide = getSide(placement) === 'left';\n          const maxRight = max(...clientRects.map(rect => rect.right));\n          const minLeft = min(...clientRects.map(rect => rect.left));\n          const measureRects = clientRects.filter(rect => isLeftSide ? rect.left === minLeft : rect.right === maxRight);\n          const top = measureRects[0].top;\n          const bottom = measureRects[measureRects.length - 1].bottom;\n          const left = minLeft;\n          const right = maxRight;\n          const width = right - left;\n          const height = bottom - top;\n          return {\n            top,\n            bottom,\n            left,\n            right,\n            width,\n            height,\n            x: left,\n            y: top\n          };\n        }\n        return fallback;\n      }\n      const resetRects = await platform.getElementRects({\n        reference: {\n          getBoundingClientRect\n        },\n        floating: elements.floating,\n        strategy\n      });\n      if (rects.reference.x !== resetRects.reference.x || rects.reference.y !== resetRects.reference.y || rects.reference.width !== resetRects.reference.width || rects.reference.height !== resetRects.reference.height) {\n        return {\n          reset: {\n            rects: resetRects\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n// For type backwards-compatibility, the `OffsetOptions` type was also\n// Derivable.\n\nasync function convertValueToCoords(state, options) {\n  const {\n    placement,\n    platform,\n    elements\n  } = state;\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getSideAxis(placement) === 'y';\n  const mainAxisMulti = ['left', 'top'].includes(side) ? -1 : 1;\n  const crossAxisMulti = rtl && isVertical ? -1 : 1;\n  const rawValue = evaluate(options, state);\n\n  // eslint-disable-next-line prefer-const\n  let {\n    mainAxis,\n    crossAxis,\n    alignmentAxis\n  } = typeof rawValue === 'number' ? {\n    mainAxis: rawValue,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: rawValue.mainAxis || 0,\n    crossAxis: rawValue.crossAxis || 0,\n    alignmentAxis: rawValue.alignmentAxis\n  };\n  if (alignment && typeof alignmentAxis === 'number') {\n    crossAxis = alignment === 'end' ? alignmentAxis * -1 : alignmentAxis;\n  }\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = function (options) {\n  if (options === void 0) {\n    options = 0;\n  }\n  return {\n    name: 'offset',\n    options,\n    async fn(state) {\n      var _middlewareData$offse, _middlewareData$arrow;\n      const {\n        x,\n        y,\n        placement,\n        middlewareData\n      } = state;\n      const diffCoords = await convertValueToCoords(state, options);\n\n      // If the placement is the same and the arrow caused an alignment offset\n      // then we don't need to change the positioning coordinates.\n      if (placement === ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse.placement) && (_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: {\n          ...diffCoords,\n          placement\n        }\n      };\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'shift',\n    options,\n    async fn(state) {\n      const {\n        x,\n        y,\n        placement\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: _ref => {\n            let {\n              x,\n              y\n            } = _ref;\n            return {\n              x,\n              y\n            };\n          }\n        },\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const crossAxis = getSideAxis(getSide(placement));\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === 'y' ? 'top' : 'left';\n        const maxSide = mainAxis === 'y' ? 'bottom' : 'right';\n        const min = mainAxisCoord + overflow[minSide];\n        const max = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = clamp(min, mainAxisCoord, max);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === 'y' ? 'top' : 'left';\n        const maxSide = crossAxis === 'y' ? 'bottom' : 'right';\n        const min = crossAxisCoord + overflow[minSide];\n        const max = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = clamp(min, crossAxisCoord, max);\n      }\n      const limitedCoords = limiter.fn({\n        ...state,\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      });\n      return {\n        ...limitedCoords,\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y,\n          enabled: {\n            [mainAxis]: checkMainAxis,\n            [crossAxis]: checkCrossAxis\n          }\n        }\n      };\n    }\n  };\n};\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    options,\n    fn(state) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        middlewareData\n      } = state;\n      const {\n        offset = 0,\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const crossAxis = getSideAxis(placement);\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      const rawOffset = evaluate(offset, state);\n      const computedOffset = typeof rawOffset === 'number' ? {\n        mainAxis: rawOffset,\n        crossAxis: 0\n      } : {\n        mainAxis: 0,\n        crossAxis: 0,\n        ...rawOffset\n      };\n      if (checkMainAxis) {\n        const len = mainAxis === 'y' ? 'height' : 'width';\n        const limitMin = rects.reference[mainAxis] - rects.floating[len] + computedOffset.mainAxis;\n        const limitMax = rects.reference[mainAxis] + rects.reference[len] - computedOffset.mainAxis;\n        if (mainAxisCoord < limitMin) {\n          mainAxisCoord = limitMin;\n        } else if (mainAxisCoord > limitMax) {\n          mainAxisCoord = limitMax;\n        }\n      }\n      if (checkCrossAxis) {\n        var _middlewareData$offse, _middlewareData$offse2;\n        const len = mainAxis === 'y' ? 'width' : 'height';\n        const isOriginSide = ['top', 'left'].includes(getSide(placement));\n        const limitMin = rects.reference[crossAxis] - rects.floating[len] + (isOriginSide ? ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse[crossAxis]) || 0 : 0) + (isOriginSide ? 0 : computedOffset.crossAxis);\n        const limitMax = rects.reference[crossAxis] + rects.reference[len] + (isOriginSide ? 0 : ((_middlewareData$offse2 = middlewareData.offset) == null ? void 0 : _middlewareData$offse2[crossAxis]) || 0) - (isOriginSide ? computedOffset.crossAxis : 0);\n        if (crossAxisCoord < limitMin) {\n          crossAxisCoord = limitMin;\n        } else if (crossAxisCoord > limitMax) {\n          crossAxisCoord = limitMax;\n        }\n      }\n      return {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      };\n    }\n  };\n};\n\n/**\n * Provides data that allows you to change the size of the floating element —\n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'size',\n    options,\n    async fn(state) {\n      var _state$middlewareData, _state$middlewareData2;\n      const {\n        placement,\n        rects,\n        platform,\n        elements\n      } = state;\n      const {\n        apply = () => {},\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      const isYAxis = getSideAxis(placement) === 'y';\n      const {\n        width,\n        height\n      } = rects.floating;\n      let heightSide;\n      let widthSide;\n      if (side === 'top' || side === 'bottom') {\n        heightSide = side;\n        widthSide = alignment === ((await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating))) ? 'start' : 'end') ? 'left' : 'right';\n      } else {\n        widthSide = side;\n        heightSide = alignment === 'end' ? 'top' : 'bottom';\n      }\n      const maximumClippingHeight = height - overflow.top - overflow.bottom;\n      const maximumClippingWidth = width - overflow.left - overflow.right;\n      const overflowAvailableHeight = min(height - overflow[heightSide], maximumClippingHeight);\n      const overflowAvailableWidth = min(width - overflow[widthSide], maximumClippingWidth);\n      const noShift = !state.middlewareData.shift;\n      let availableHeight = overflowAvailableHeight;\n      let availableWidth = overflowAvailableWidth;\n      if ((_state$middlewareData = state.middlewareData.shift) != null && _state$middlewareData.enabled.x) {\n        availableWidth = maximumClippingWidth;\n      }\n      if ((_state$middlewareData2 = state.middlewareData.shift) != null && _state$middlewareData2.enabled.y) {\n        availableHeight = maximumClippingHeight;\n      }\n      if (noShift && !alignment) {\n        const xMin = max(overflow.left, 0);\n        const xMax = max(overflow.right, 0);\n        const yMin = max(overflow.top, 0);\n        const yMax = max(overflow.bottom, 0);\n        if (isYAxis) {\n          availableWidth = width - 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right));\n        } else {\n          availableHeight = height - 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom));\n        }\n      }\n      await apply({\n        ...state,\n        availableWidth,\n        availableHeight\n      });\n      const nextDimensions = await platform.getDimensions(elements.floating);\n      if (width !== nextDimensions.width || height !== nextDimensions.height) {\n        return {\n          reset: {\n            rects: true\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nexport { arrow, autoPlacement, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, shift, size };\n", "function hasWindow() {\n  return typeof window !== 'undefined';\n}\nfunction getNodeName(node) {\n  if (isNode(node)) {\n    return (node.nodeName || '').toLowerCase();\n  }\n  // Mocked nodes in testing environments may not be instances of Node. By\n  // returning `#document` an infinite loop won't occur.\n  // https://github.com/floating-ui/floating-ui/issues/2317\n  return '#document';\n}\nfunction getWindow(node) {\n  var _node$ownerDocument;\n  return (node == null || (_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.defaultView) || window;\n}\nfunction getDocumentElement(node) {\n  var _ref;\n  return (_ref = (isNode(node) ? node.ownerDocument : node.document) || window.document) == null ? void 0 : _ref.documentElement;\n}\nfunction isNode(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Node || value instanceof getWindow(value).Node;\n}\nfunction isElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Element || value instanceof getWindow(value).Element;\n}\nfunction isHTMLElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof HTMLElement || value instanceof getWindow(value).HTMLElement;\n}\nfunction isShadowRoot(value) {\n  if (!hasWindow() || typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n  return value instanceof ShadowRoot || value instanceof getWindow(value).ShadowRoot;\n}\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY,\n    display\n  } = getComputedStyle(element);\n  return /auto|scroll|overlay|hidden|clip/.test(overflow + overflowY + overflowX) && !['inline', 'contents'].includes(display);\n}\nfunction isTableElement(element) {\n  return ['table', 'td', 'th'].includes(getNodeName(element));\n}\nfunction isTopLayer(element) {\n  return [':popover-open', ':modal'].some(selector => {\n    try {\n      return element.matches(selector);\n    } catch (e) {\n      return false;\n    }\n  });\n}\nfunction isContainingBlock(elementOrCss) {\n  const webkit = isWebKit();\n  const css = isElement(elementOrCss) ? getComputedStyle(elementOrCss) : elementOrCss;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  // https://drafts.csswg.org/css-transforms-2/#individual-transforms\n  return ['transform', 'translate', 'scale', 'rotate', 'perspective'].some(value => css[value] ? css[value] !== 'none' : false) || (css.containerType ? css.containerType !== 'normal' : false) || !webkit && (css.backdropFilter ? css.backdropFilter !== 'none' : false) || !webkit && (css.filter ? css.filter !== 'none' : false) || ['transform', 'translate', 'scale', 'rotate', 'perspective', 'filter'].some(value => (css.willChange || '').includes(value)) || ['paint', 'layout', 'strict', 'content'].some(value => (css.contain || '').includes(value));\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  while (isHTMLElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else if (isTopLayer(currentNode)) {\n      return null;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  return null;\n}\nfunction isWebKit() {\n  if (typeof CSS === 'undefined' || !CSS.supports) return false;\n  return CSS.supports('-webkit-backdrop-filter', 'none');\n}\nfunction isLastTraversableNode(node) {\n  return ['html', 'body', '#document'].includes(getNodeName(node));\n}\nfunction getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeScroll(element) {\n  if (isElement(element)) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n  return {\n    scrollLeft: element.scrollX,\n    scrollTop: element.scrollY\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === 'html') {\n    return node;\n  }\n  const result =\n  // Step into the shadow DOM of the parent of a slotted node.\n  node.assignedSlot ||\n  // DOM Element detected.\n  node.parentNode ||\n  // ShadowRoot detected.\n  isShadowRoot(node) && node.host ||\n  // Fallback.\n  getDocumentElement(node);\n  return isShadowRoot(result) ? result.host : result;\n}\nfunction getNearestOverflowAncestor(node) {\n  const parentNode = getParentNode(node);\n  if (isLastTraversableNode(parentNode)) {\n    return node.ownerDocument ? node.ownerDocument.body : node.body;\n  }\n  if (isHTMLElement(parentNode) && isOverflowElement(parentNode)) {\n    return parentNode;\n  }\n  return getNearestOverflowAncestor(parentNode);\n}\nfunction getOverflowAncestors(node, list, traverseIframes) {\n  var _node$ownerDocument2;\n  if (list === void 0) {\n    list = [];\n  }\n  if (traverseIframes === void 0) {\n    traverseIframes = true;\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument2 = node.ownerDocument) == null ? void 0 : _node$ownerDocument2.body);\n  const win = getWindow(scrollableAncestor);\n  if (isBody) {\n    const frameElement = getFrameElement(win);\n    return list.concat(win, win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : [], frameElement && traverseIframes ? getOverflowAncestors(frameElement) : []);\n  }\n  return list.concat(scrollableAncestor, getOverflowAncestors(scrollableAncestor, [], traverseIframes));\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\n\nexport { getComputedStyle, getContainingBlock, getDocumentElement, getFrameElement, getNearestOverflowAncestor, getNodeName, getNodeScroll, getOverflowAncestors, getParentNode, getWindow, isContainingBlock, isElement, isHTMLElement, isLastTraversableNode, isNode, isOverflowElement, isShadowRoot, isTableElement, isTopLayer, isWebKit };\n", "import { rectToClientRect, detectOverflow as detectOverflow$1, offset as offset$1, autoPlacement as autoPlacement$1, shift as shift$1, flip as flip$1, size as size$1, hide as hide$1, arrow as arrow$1, inline as inline$1, limitShift as limitShift$1, computePosition as computePosition$1 } from '@floating-ui/core';\nimport { round, createCoords, max, min, floor } from '@floating-ui/utils';\nimport { getComputedStyle, isHTMLElement, isElement, getWindow, isWebKit, getFrameElement, getNodeScroll, getDocumentElement, isTopLayer, getNodeName, isOverflowElement, getOverflowAncestors, getParentNode, isLastTraversableNode, isContainingBlock, isTableElement, getContainingBlock } from '@floating-ui/utils/dom';\nexport { getOverflowAncestors } from '@floating-ui/utils/dom';\n\nfunction getCssDimensions(element) {\n  const css = getComputedStyle(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = isHTMLElement(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = round(width) !== offsetWidth || round(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\n\nfunction unwrapElement(element) {\n  return !isElement(element) ? element.contextElement : element;\n}\n\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!isHTMLElement(domElement)) {\n    return createCoords(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? round(rect.width) : rect.width) / width;\n  let y = ($ ? round(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\n\nconst noOffsets = /*#__PURE__*/createCoords(0);\nfunction getVisualOffsets(element) {\n  const win = getWindow(element);\n  if (!isWebKit() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== getWindow(element)) {\n    return false;\n  }\n  return isFixed;\n}\n\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = createCoords(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if (isElement(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : createCoords(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = getWindow(domElement);\n    const offsetWin = offsetParent && isElement(offsetParent) ? getWindow(offsetParent) : offsetParent;\n    let currentWin = win;\n    let currentIFrame = getFrameElement(currentWin);\n    while (currentIFrame && offsetParent && offsetWin !== currentWin) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = getComputedStyle(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentWin = getWindow(currentIFrame);\n      currentIFrame = getFrameElement(currentWin);\n    }\n  }\n  return rectToClientRect({\n    width,\n    height,\n    x,\n    y\n  });\n}\n\n// If <html> has a CSS width greater than the viewport, then this will be\n// incorrect for RTL.\nfunction getWindowScrollBarX(element, rect) {\n  const leftScroll = getNodeScroll(element).scrollLeft;\n  if (!rect) {\n    return getBoundingClientRect(getDocumentElement(element)).left + leftScroll;\n  }\n  return rect.left + leftScroll;\n}\n\nfunction getHTMLOffset(documentElement, scroll, ignoreScrollbarX) {\n  if (ignoreScrollbarX === void 0) {\n    ignoreScrollbarX = false;\n  }\n  const htmlRect = documentElement.getBoundingClientRect();\n  const x = htmlRect.left + scroll.scrollLeft - (ignoreScrollbarX ? 0 :\n  // RTL <body> scrollbar.\n  getWindowScrollBarX(documentElement, htmlRect));\n  const y = htmlRect.top + scroll.scrollTop;\n  return {\n    x,\n    y\n  };\n}\n\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isFixed = strategy === 'fixed';\n  const documentElement = getDocumentElement(offsetParent);\n  const topLayer = elements ? isTopLayer(elements.floating) : false;\n  if (offsetParent === documentElement || topLayer && isFixed) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = createCoords(1);\n  const offsets = createCoords(0);\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll, true) : createCoords(0);\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x + htmlOffset.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y + htmlOffset.y\n  };\n}\n\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = element.ownerDocument.body;\n  const width = max(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = max(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle(body).direction === 'rtl') {\n    x += max(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = isWebKit();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = isHTMLElement(element) ? getScale(element) : createCoords(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect(getDocumentElement(element));\n  } else if (isElement(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = {\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y,\n      width: clippingAncestor.width,\n      height: clippingAncestor.height\n    };\n  }\n  return rectToClientRect(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = getParentNode(element);\n  if (parentNode === stopNode || !isElement(parentNode) || isLastTraversableNode(parentNode)) {\n    return false;\n  }\n  return getComputedStyle(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = getOverflowAncestors(element, [], false).filter(el => isElement(el) && getNodeName(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = getComputedStyle(element).position === 'fixed';\n  let currentNode = elementIsFixed ? getParentNode(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while (isElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    const computedStyle = getComputedStyle(currentNode);\n    const currentNodeIsContaining = isContainingBlock(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && ['absolute', 'fixed'].includes(currentContainingBlockComputedStyle.position) || isOverflowElement(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? isTopLayer(element) ? [] : getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\n\nfunction getDimensions(element) {\n  const {\n    width,\n    height\n  } = getCssDimensions(element);\n  return {\n    width,\n    height\n  };\n}\n\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = createCoords(0);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      // If the <body> scrollbar appears on the left (e.g. RTL systems). Use\n      // Firefox with layout.scrollbar.side = 3 in about:config to test this.\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll) : createCoords(0);\n  const x = rect.left + scroll.scrollLeft - offsets.x - htmlOffset.x;\n  const y = rect.top + scroll.scrollTop - offsets.y - htmlOffset.y;\n  return {\n    x,\n    y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction isStaticPositioned(element) {\n  return getComputedStyle(element).position === 'static';\n}\n\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!isHTMLElement(element) || getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  let rawOffsetParent = element.offsetParent;\n\n  // Firefox returns the <html> element as the offsetParent if it's non-static,\n  // while Chrome and Safari return the <body> element. The <body> element must\n  // be used to perform the correct calculations even if the <html> element is\n  // non-static.\n  if (getDocumentElement(element) === rawOffsetParent) {\n    rawOffsetParent = rawOffsetParent.ownerDocument.body;\n  }\n  return rawOffsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const win = getWindow(element);\n  if (isTopLayer(element)) {\n    return win;\n  }\n  if (!isHTMLElement(element)) {\n    let svgOffsetParent = getParentNode(element);\n    while (svgOffsetParent && !isLastTraversableNode(svgOffsetParent)) {\n      if (isElement(svgOffsetParent) && !isStaticPositioned(svgOffsetParent)) {\n        return svgOffsetParent;\n      }\n      svgOffsetParent = getParentNode(svgOffsetParent);\n    }\n    return win;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && isTableElement(offsetParent) && isStaticPositioned(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && isLastTraversableNode(offsetParent) && isStaticPositioned(offsetParent) && !isContainingBlock(offsetParent)) {\n    return win;\n  }\n  return offsetParent || getContainingBlock(element) || win;\n}\n\nconst getElementRects = async function (data) {\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  const floatingDimensions = await getDimensionsFn(data.floating);\n  return {\n    reference: getRectRelativeToOffsetParent(data.reference, await getOffsetParentFn(data.floating), data.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: floatingDimensions.width,\n      height: floatingDimensions.height\n    }\n  };\n};\n\nfunction isRTL(element) {\n  return getComputedStyle(element).direction === 'rtl';\n}\n\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement,\n  isRTL\n};\n\nfunction rectsAreEqual(a, b) {\n  return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height;\n}\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = getDocumentElement(element);\n  function cleanup() {\n    var _io;\n    clearTimeout(timeoutId);\n    (_io = io) == null || _io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const elementRectForRootMargin = element.getBoundingClientRect();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = elementRectForRootMargin;\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = floor(top);\n    const insetRight = floor(root.clientWidth - (left + width));\n    const insetBottom = floor(root.clientHeight - (top + height));\n    const insetLeft = floor(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: max(0, min(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          // If the reference is clipped, the ratio is 0. Throttle the refresh\n          // to prevent an infinite loop of updates.\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 1000);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      if (ratio === 1 && !rectsAreEqual(elementRectForRootMargin, element.getBoundingClientRect())) {\n        // It's possible that even though the ratio is reported as 1, the\n        // element is not actually fully within the IntersectionObserver's root\n        // area anymore. This can happen under performance constraints. This may\n        // be a bug in the browser's IntersectionObserver implementation. To\n        // work around this, we compare the element's bounding rect now with\n        // what it was at the time we created the IntersectionObserver. If they\n        // are not equal then the element moved, so we refresh.\n        refresh();\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, {\n        ...options,\n        // Handle <iframe>s\n        root: root.ownerDocument\n      });\n    } catch (e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? getOverflowAncestors(referenceEl) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          var _resizeObserver;\n          (_resizeObserver = resizeObserver) == null || _resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && !rectsAreEqual(prevRefRect, nextRefRect)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    var _resizeObserver2;\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo == null || cleanupIo();\n    (_resizeObserver2 = resizeObserver) == null || _resizeObserver2.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nconst detectOverflow = detectOverflow$1;\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = offset$1;\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = autoPlacement$1;\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = shift$1;\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = flip$1;\n\n/**\n * Provides data that allows you to change the size of the floating element —\n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = size$1;\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = hide$1;\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = arrow$1;\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = inline$1;\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = limitShift$1;\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = {\n    platform,\n    ...options\n  };\n  const platformWithCache = {\n    ...mergedOptions.platform,\n    _c: cache\n  };\n  return computePosition$1(reference, floating, {\n    ...mergedOptions,\n    platform: platformWithCache\n  });\n};\n\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, platform, shift, size };\n", "/**\n * TooltipManager - Manages tooltips for checkout elements\n * \n * This class provides a tooltip system using the floating-ui library.\n * It dynamically loads required dependencies and handles tooltip positioning and display.\n */\n\nimport { computePosition, flip, shift, offset, arrow } from '@floating-ui/dom';\n\nexport class TooltipManager {\n  #app;\n  #logger;\n  #tooltip;\n  #arrowElement;\n  #textContainer;\n  #currentElement = null;\n  #showTimeout = null;\n  #hideTimeout = null;\n  #initialized = false;\n\n  constructor(app) {\n    this.#app = app;\n    this.#logger = app.logger.createModuleLogger('TOOLTIP');\n    \n    this.#init();\n    this.#logger.info('TooltipManager initialized');\n  }\n\n  /**\n   * Initialize the tooltip system\n   */\n  #init() {\n    if (this.#initialized) return;\n    \n    this.#tooltip = this.#createTooltip();\n    this.#arrowElement = this.#tooltip.querySelector('#checkout-tooltip-arrow');\n    this.#textContainer = this.#tooltip.querySelector('#checkout-tooltip-text');\n    \n    this.#setupEventListeners();\n    this.#initialized = true;\n    this.#logger.info('Tooltip system initialized with floating-ui');\n  }\n\n  /**\n   * Create the tooltip element\n   */\n  #createTooltip() {\n    // Check if tooltip already exists\n    const existingTooltip = document.getElementById('checkout-tooltip');\n    if (existingTooltip) return existingTooltip;\n    \n    const tooltip = document.createElement('div');\n    tooltip.setAttribute('role', 'tooltip');\n    tooltip.id = 'checkout-tooltip';\n    tooltip.style.display = 'none';\n    \n    // Create text container\n    const textContainer = document.createElement('div');\n    textContainer.id = 'checkout-tooltip-text';\n    tooltip.appendChild(textContainer);\n    \n    // Create arrow element\n    const arrowElement = document.createElement('div');\n    arrowElement.id = 'checkout-tooltip-arrow';\n    tooltip.appendChild(arrowElement);\n    \n    document.body.appendChild(tooltip);\n    return tooltip;\n  }\n\n  /**\n   * Set up event listeners for tooltips\n   */\n  #setupEventListeners() {\n    // Event delegation for better performance\n    document.addEventListener('mouseover', (e) => {\n      const element = e.target.closest('[data-os-tooltip]');\n      if (!element) return;\n\n      clearTimeout(this.#showTimeout);\n      this.#showTimeout = setTimeout(() => {\n        this.#showTooltip(element);\n      }, 200);\n    });\n\n    document.addEventListener('mouseout', (e) => {\n      const element = e.target.closest('[data-os-tooltip]');\n      if (!element) return;\n\n      clearTimeout(this.#showTimeout);\n      this.#hideTooltip();\n    });\n\n    // Handle focus events for accessibility\n    document.addEventListener('focus', (e) => {\n      const element = e.target.closest('[data-os-tooltip]');\n      if (!element) return;\n      this.#showTooltip(element);\n    }, true);\n\n    document.addEventListener('blur', (e) => {\n      const element = e.target.closest('[data-os-tooltip]');\n      if (!element) return;\n      this.#hideTooltip();\n    }, true);\n\n    // Handle escape key\n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape' && this.#currentElement) {\n        this.#hideTooltip();\n      }\n    });\n  }\n\n  /**\n   * Show the tooltip for a specific element\n   */\n  #showTooltip(element) {\n    if (!this.#initialized) {\n      this.#logger.warn('Cannot show tooltip: system not initialized');\n      return;\n    }\n    \n    clearTimeout(this.#hideTimeout);\n    this.#currentElement = element;\n    \n    const text = element.getAttribute('data-os-tooltip');\n    const position = element.getAttribute('data-os-tooltip-position') || 'top';\n    \n    this.#textContainer.textContent = text;\n    this.#tooltip.style.display = 'block';\n\n    computePosition(element, this.#tooltip, {\n      placement: position,\n      middleware: [\n        offset(8),\n        flip({\n          fallbackPlacements: ['top', 'right', 'bottom', 'left'],\n        }),\n        shift({ padding: 5 }),\n        arrow({ element: this.#arrowElement }),\n      ],\n    }).then(({ x, y, placement, middlewareData }) => {\n      Object.assign(this.#tooltip.style, {\n        left: `${x}px`,\n        top: `${y}px`,\n      });\n\n      // Arrow positioning\n      const { x: arrowX, y: arrowY } = middlewareData.arrow;\n      const staticSide = {\n        top: 'bottom',\n        right: 'left',\n        bottom: 'top',\n        left: 'right',\n      }[placement.split('-')[0]];\n\n      Object.assign(this.#arrowElement.style, {\n        left: arrowX != null ? `${arrowX}px` : '',\n        top: arrowY != null ? `${arrowY}px` : '',\n        right: '',\n        bottom: '',\n        [staticSide]: '-4px',\n      });\n\n      requestAnimationFrame(() => {\n        this.#tooltip.classList.add('checkout-tooltip-visible');\n      });\n    });\n  }\n\n  /**\n   * Hide the tooltip\n   */\n  #hideTooltip() {\n    if (!this.#tooltip) return;\n    \n    this.#tooltip.classList.remove('checkout-tooltip-visible');\n    this.#hideTimeout = setTimeout(() => {\n      if (!this.#tooltip.classList.contains('checkout-tooltip-visible')) {\n        this.#tooltip.style.display = 'none';\n      }\n      this.#currentElement = null;\n    }, 200);\n  }\n} ", "/**\n * UpsellManager - Manages post-purchase upsell operations\n * \n * This class provides functionality for handling post-purchase upsells,\n * allowing customers to add additional products to their order.\n */\n\nexport class UpsellManager {\n  #app;\n  #logger;\n  #stateManager;\n  #api;\n  #upsellElements = {};\n  #orderRef = null;\n\n  constructor(app) {\n    this.#app = app;\n    this.#logger = app.logger.createModuleLogger('UPSELL');\n    this.#stateManager = app.state;\n    this.#api = app.api;\n    \n    this.#init();\n    this.#logger.info('UpsellManager initialized');\n  }\n\n  #init() {\n    // Check for order reference in URL or sessionStorage\n    this.#orderRef = this.#getOrderReferenceId();\n    \n    if (this.#orderRef) {\n      this.#logger.info(`Order reference ID found: ${this.#orderRef}`);\n      this.#stateManager.setState('order.ref_id', this.#orderRef);\n    } else {\n      this.#logger.warn('No order reference ID found, upsell functionality will be limited');\n    }\n    \n    this.#initUpsellElements();\n    this.#bindEvents();\n  }\n  \n  /**\n   * Get the order reference ID from URL parameters or sessionStorage\n   * @returns {string|null} The order reference ID or null if not found\n   */\n  #getOrderReferenceId() {\n    // Try to get from URL parameters first\n    const urlParams = new URLSearchParams(window.location.search);\n    let refId = urlParams.get('ref_id');\n    \n    // If not in URL, try sessionStorage\n    if (!refId) {\n      refId = sessionStorage.getItem('order_ref_id');\n      this.#logger.debug('Getting order ref_id from sessionStorage:', refId);\n    } else {\n      this.#logger.debug('Getting order ref_id from URL parameters:', refId);\n      // Save to sessionStorage for future use\n      sessionStorage.setItem('order_ref_id', refId);\n    }\n    \n    return refId;\n  }\n  \n  /**\n   * Initialize upsell UI elements\n   */\n  #initUpsellElements() {\n    this.#upsellElements = {\n      acceptButtons: document.querySelectorAll('[data-os-upsell=\"accept\"]'),\n      declineButtons: document.querySelectorAll('[data-os-upsell=\"decline\"]'),\n    };\n    \n    this.#logger.debug(`Found ${this.#upsellElements.acceptButtons.length} accept buttons and ${this.#upsellElements.declineButtons.length} decline buttons`);\n  }\n  \n  /**\n   * Bind events to upsell elements\n   */\n  #bindEvents() {\n    // Bind click events to accept buttons\n    this.#upsellElements.acceptButtons.forEach(button => {\n      button.addEventListener('click', event => {\n        event.preventDefault();\n        \n        const packageId = button.getAttribute('data-os-package-id');\n        const quantity = parseInt(button.getAttribute('data-os-quantity') || '1', 10);\n        const nextUrl = button.getAttribute('data-os-next-url');\n        \n        if (!packageId) {\n          this.#logger.error('No package ID specified for upsell accept button');\n          return;\n        }\n        \n        this.acceptUpsell(packageId, quantity, nextUrl);\n      });\n    });\n    \n    // Bind click events to decline buttons\n    this.#upsellElements.declineButtons.forEach(button => {\n      button.addEventListener('click', event => {\n        event.preventDefault();\n        \n        const nextUrl = button.getAttribute('data-os-next-url');\n        if (nextUrl) {\n          this.declineUpsell(nextUrl);\n        } else {\n          this.#logger.error('No next URL specified for upsell decline button');\n        }\n      });\n    });\n  }\n  \n  /**\n   * Accept an upsell offer by adding the product to the order\n   * @param {string|number} packageId - The package ID to add to the order\n   * @param {number} quantity - The quantity to add (default: 1)\n   * @param {string} nextUrl - The URL to redirect to after adding the upsell\n   */\n  async acceptUpsell(packageId, quantity = 1, nextUrl) {\n    if (!this.#orderRef) {\n      this.#logger.error('Cannot accept upsell: No order reference ID found');\n      return;\n    }\n    \n    this.#logger.info(`Accepting upsell: Package ${packageId}, Quantity ${quantity}`);\n    \n    // Disable all upsell buttons to prevent multiple clicks\n    this.#disableUpsellButtons();\n    \n    try {\n      // Show loading state\n      document.body.classList.add('os-loading');\n      \n      // Create the upsell data\n      const upsellData = {\n        lines: [{\n          package_id: Number(packageId),\n          quantity: Number(quantity),\n          is_upsell: true\n        }]\n      };\n      \n      // Call the API to add the upsell\n      const response = await this.#api.createOrderUpsell(this.#orderRef, upsellData);\n      this.#logger.info('Upsell successfully added to order', response);\n      \n      // Redirect to the next page\n      this.#redirect(nextUrl);\n    } catch (error) {\n      this.#logger.error('Error accepting upsell:', error);\n      document.body.classList.remove('os-loading');\n      \n      // Re-enable buttons in case of error\n      this.#enableUpsellButtons();\n      \n      // Display error to user\n      this.#displayError('There was an error processing your upsell. Please try again.');\n    }\n  }\n  \n  /**\n   * Decline an upsell offer and redirect to the next URL\n   * @param {string} nextUrl - The URL to redirect to\n   */\n  declineUpsell(nextUrl) {\n    this.#logger.info('Declining upsell offer');\n    \n    // Disable all upsell buttons to prevent multiple clicks\n    this.#disableUpsellButtons();\n    \n    this.#redirect(nextUrl);\n  }\n  \n  /**\n   * Disable all upsell buttons to prevent multiple clicks\n   */\n  #disableUpsellButtons() {\n    this.#logger.debug('Disabling upsell buttons');\n    \n    // Disable all accept buttons\n    this.#upsellElements.acceptButtons.forEach(button => {\n      button.style.pointerEvents = 'none';\n      button.classList.add('os-button-disabled');\n    });\n    \n    // Disable all decline buttons\n    this.#upsellElements.declineButtons.forEach(button => {\n      button.style.pointerEvents = 'none';\n      button.classList.add('os-button-disabled');\n    });\n  }\n  \n  /**\n   * Re-enable all upsell buttons (used in case of error)\n   */\n  #enableUpsellButtons() {\n    this.#logger.debug('Re-enabling upsell buttons');\n    \n    // Re-enable all accept buttons\n    this.#upsellElements.acceptButtons.forEach(button => {\n      button.style.pointerEvents = '';\n      button.classList.remove('os-button-disabled');\n    });\n    \n    // Re-enable all decline buttons\n    this.#upsellElements.declineButtons.forEach(button => {\n      button.style.pointerEvents = '';\n      button.classList.remove('os-button-disabled');\n    });\n  }\n  \n  /**\n   * Redirect to a URL, appending the order reference ID if needed\n   * @param {string} url - The URL to redirect to\n   */\n  #redirect(url) {\n    if (!url) {\n      this.#logger.warn('No URL provided for redirect');\n      return;\n    }\n    \n    const redirectUrl = new URL(url, window.location.origin);\n    \n    // Append the order reference ID if not already in the URL\n    if (this.#orderRef && !redirectUrl.searchParams.has('ref_id')) {\n      redirectUrl.searchParams.append('ref_id', this.#orderRef);\n    }\n    \n    this.#logger.info(`Redirecting to ${redirectUrl.href}`);\n    window.location.href = redirectUrl.href;\n  }\n  \n  /**\n   * Display an error message to the user\n   * @param {string} message - The error message to display\n   */\n  #displayError(message) {\n    const errorContainer = document.querySelector('[data-os-error-container]');\n    if (errorContainer) {\n      errorContainer.textContent = message;\n      errorContainer.style.display = 'block';\n    } else {\n      alert(message);\n    }\n  }\n} ", "/**\n * PBAccordion utility\n * \n * Handles accordion UI components marked with pb-component=\"accordion\"\n */\n\nexport class PBAccordion {\n  constructor() {\n    this.cleanupInitialState();\n    this.init();\n  }\n\n  cleanupInitialState() {\n    document.querySelectorAll('[pb-component=\"accordion\"]').forEach(accordion => {\n      const group = accordion.querySelector('[pb-accordion-element=\"group\"]');\n      if (!group) return;\n\n      const items = group.querySelectorAll('[pb-accordion-element=\"accordion\"]');\n      items.forEach(item => {\n        const content = item.querySelector('[pb-accordion-element=\"content\"]');\n        const trigger = item.querySelector('[pb-accordion-element=\"trigger\"]');\n        const arrow = item.querySelector('[pb-accordion-element=\"arrow\"]');\n        const plus = item.querySelector('[pb-accordion-element=\"plus\"]');\n        \n        if (content) {\n          content.style.maxHeight = '0';\n          content.style.opacity = '0';\n          content.style.visibility = 'hidden';\n          content.style.display = 'none';\n        }\n        if (trigger) trigger.setAttribute('aria-expanded', 'false');\n        \n        item.classList.remove('is-active-accordion');\n        content?.classList.remove('is-active-accordion');\n        if (arrow) arrow.classList.remove('is-active-accordion');\n        if (plus) plus.classList.remove('is-active-accordion');\n      });\n\n      const initial = group.getAttribute('pb-accordion-initial');\n      if (initial && initial !== 'none') {\n        const initialItem = items[parseInt(initial) - 1];\n        if (initialItem) {\n          this.openAccordion(initialItem);\n        }\n      }\n    });\n  }\n\n  init() {\n    document.querySelectorAll('[pb-component=\"accordion\"]').forEach(accordion => {\n      const group = accordion.querySelector('[pb-accordion-element=\"group\"]');\n      if (!group) return;\n      group.addEventListener('click', (e) => this.handleClick(e, group));\n    });\n  }\n\n  handleClick(event, group) {\n    const accordionItem = event.target.closest('[pb-accordion-element=\"accordion\"]');\n    if (!accordionItem) return;\n\n    const isOpen = accordionItem.classList.contains('is-active-accordion');\n    const isSingle = group.getAttribute('pb-accordion-single') === 'true';\n\n    if (isSingle) {\n      group.querySelectorAll('[pb-accordion-element=\"accordion\"]').forEach(item => {\n        if (item !== accordionItem && item.classList.contains('is-active-accordion')) {\n          this.closeAccordion(item);\n        }\n      });\n    }\n\n    if (isOpen) {\n      this.closeAccordion(accordionItem);\n    } else {\n      this.openAccordion(accordionItem);\n    }\n  }\n\n  openAccordion(item) {\n    const trigger = item.querySelector('[pb-accordion-element=\"trigger\"]');\n    const content = item.querySelector('[pb-accordion-element=\"content\"]');\n    const arrow = item.querySelector('[pb-accordion-element=\"arrow\"]');\n    const plus = item.querySelector('[pb-accordion-element=\"plus\"]');\n\n    content.style.visibility = 'visible';\n    content.style.display = 'block';\n    \n    content.offsetHeight;\n\n    const contentHeight = content.scrollHeight;\n    \n    requestAnimationFrame(() => {\n      content.style.maxHeight = `${contentHeight}px`;\n      content.style.opacity = '1';\n      trigger.setAttribute('aria-expanded', 'true');\n      item.classList.add('is-active-accordion');\n      content.classList.add('is-active-accordion');\n      if (arrow) arrow.classList.add('is-active-accordion');\n      if (plus) plus.classList.add('is-active-accordion');\n    });\n\n    content.addEventListener('transitionend', () => {\n      if (item.classList.contains('is-active-accordion')) {\n        content.style.maxHeight = 'none';\n      }\n    }, { once: true });\n  }\n\n  closeAccordion(item) {\n    const trigger = item.querySelector('[pb-accordion-element=\"trigger\"]');\n    const content = item.querySelector('[pb-accordion-element=\"content\"]');\n    const arrow = item.querySelector('[pb-accordion-element=\"arrow\"]');\n    const plus = item.querySelector('[pb-accordion-element=\"plus\"]');\n\n    content.style.maxHeight = `${content.scrollHeight}px`;\n    content.style.display = 'block';\n\n    content.offsetHeight;\n\n    requestAnimationFrame(() => {\n      content.style.maxHeight = '0';\n      content.style.opacity = '0';\n      trigger.setAttribute('aria-expanded', 'false');\n      item.classList.remove('is-active-accordion');\n      content.classList.remove('is-active-accordion');\n      if (arrow) arrow.classList.remove('is-active-accordion');\n      if (plus) plus.classList.remove('is-active-accordion');\n    });\n\n    content.addEventListener('transitionend', () => {\n      if (!item.classList.contains('is-active-accordion')) {\n        content.style.visibility = 'hidden';\n        content.style.display = 'none';\n      }\n    }, { once: true });\n  }\n}\n\n/**\n * Initialize PBAccordion if accordion elements exist on the page\n */\nexport const initPBAccordion = () => {\n  if (document.querySelector('[pb-component=\"accordion\"]')) {\n    return new PBAccordion();\n  }\n  return null;\n}; ", "/**\n * UTM Parameter Transfer Utility\n * \n * This utility automatically adds the current URL's query parameters (UTM and others)\n * to all links on a page when they are clicked.\n * \n * Configuration via window.osConfig.utmTransfer = {\n *   enabled: true,                 // Whether to enable UTM transfer\n *   applyToExternalLinks: false,   // Whether to apply to external links\n *   excludedDomains: [],           // Domains to exclude from parameter transfer\n *   paramsToCopy: []               // Specific params to copy (empty = all params)\n * }\n */\n\nclass UtmTransfer {\n  constructor() {\n    this.config = {\n      enabled: true,\n      applyToExternalLinks: false,\n      excludedDomains: [],\n      paramsToCopy: []\n    };\n    \n    // Load configuration\n    this.loadConfig();\n  }\n  \n  loadConfig() {\n    if (window.osConfig && window.osConfig.utmTransfer) {\n      this.config = {\n        ...this.config,\n        ...window.osConfig.utmTransfer\n      };\n    }\n    \n    // Ensure paramsToCopy is valid\n    if (this.config.paramsToCopy === null || this.config.paramsToCopy === undefined) {\n      this.config.paramsToCopy = [];\n    }\n    \n    console.log('UTM Transfer: Initialized with config', JSON.stringify(this.config));\n  }\n  \n  // Initialize the UTM transfer feature\n  init() {\n    if (!this.config.enabled) {\n      console.log('UTM Transfer: Disabled by configuration');\n      return;\n    }\n    \n    // Get current URL search parameters\n    const currentParams = new URLSearchParams(window.location.search);\n    \n    // Skip if no parameters exist\n    if (currentParams.toString() === '') {\n      console.log('UTM Transfer: No URL parameters to transfer');\n      return;\n    }\n    \n    // Log all available parameters\n    const availableParams = [];\n    currentParams.forEach((value, key) => {\n      availableParams.push(`${key}=${value}`);\n    });\n    console.log(`UTM Transfer: Available parameters: ${availableParams.join(', ')}`);\n    \n    // Filter parameters if specific ones are specified\n    let paramsToApply = currentParams;\n    \n    // Only filter if paramsToCopy is explicitly provided and has items\n    if (Array.isArray(this.config.paramsToCopy) && this.config.paramsToCopy.length > 0) {\n      console.log(`UTM Transfer: Filtering to specific parameters: ${this.config.paramsToCopy.join(', ')}`);\n      \n      paramsToApply = new URLSearchParams();\n      this.config.paramsToCopy.forEach(param => {\n        if (currentParams.has(param)) {\n          paramsToApply.append(param, currentParams.get(param));\n          console.log(`UTM Transfer: Found parameter to copy: ${param}=${currentParams.get(param)}`);\n        }\n      });\n      \n      // Skip if no matching parameters\n      if (paramsToApply.toString() === '') {\n        console.log('UTM Transfer: No matching parameters to transfer');\n        return;\n      }\n    } else {\n      console.log('UTM Transfer: No specific parameters configured, will copy all parameters');\n    }\n    \n    // Get all anchor elements on the page\n    const links = document.querySelectorAll('a');\n    console.log(`UTM Transfer: Found ${links.length} links on the page`);\n    \n    // For each link\n    links.forEach(link => {\n      // Add click event listener\n      link.addEventListener('click', event => {\n        this.applyParamsToLink(link, paramsToApply);\n      });\n    });\n    \n    console.log('UTM Transfer: Event listeners attached to links');\n  }\n  \n  // Apply parameters to a specific link\n  applyParamsToLink(linkElement, params = null) {\n    if (!linkElement || !linkElement.getAttribute) {\n      console.error('UTM Transfer: Invalid link element provided');\n      return;\n    }\n    \n    // Get the href attribute\n    let href = linkElement.getAttribute('href');\n    if (!href) return;\n    \n    // Skip special links\n    if (href.startsWith('#') || \n        href.startsWith('javascript:') || \n        href.startsWith('mailto:') || \n        href.startsWith('tel:')) {\n      return;\n    }\n    \n    // Handle external links\n    const isExternalLink = href.includes('://') && !href.includes(window.location.hostname);\n    if (isExternalLink) {\n      // Skip external links if not configured to apply to them\n      if (!this.config.applyToExternalLinks) {\n        return;\n      }\n      \n      // Check excluded domains\n      if (this.config.excludedDomains && this.config.excludedDomains.length > 0) {\n        for (const domain of this.config.excludedDomains) {\n          if (href.includes(domain)) {\n            return; // Skip excluded domains\n          }\n        }\n      }\n    }\n    \n    // Use provided params or get current ones\n    const paramsToApply = params || new URLSearchParams(window.location.search);\n    if (paramsToApply.toString() === '') {\n      return; // No parameters to apply\n    }\n    \n    // Parse the link's URL\n    let url;\n    try {\n      // Handle relative URLs\n      url = new URL(href, window.location.origin);\n    } catch (e) {\n      console.error('UTM Transfer: Invalid URL:', href);\n      return;\n    }\n    \n    // Get existing parameters in the link\n    const linkParams = new URLSearchParams(url.search);\n    \n    // Add current page parameters, without overriding existing ones\n    paramsToApply.forEach((value, key) => {\n      if (!linkParams.has(key)) {\n        linkParams.append(key, value);\n      }\n    });\n    \n    // Update the link's search parameters\n    url.search = linkParams.toString();\n    \n    // Update the href attribute\n    linkElement.setAttribute('href', url.toString());\n    \n    // Log if in debug mode\n    if (this.config.debug) {\n      console.log(`UTM Transfer: Updated link ${href} to ${url.toString()}`);\n    }\n  }\n}\n\n// Export a function to initialize the UTM transfer\nexport const initUtmTransfer = () => {\n  const utmTransfer = new UtmTransfer();\n  utmTransfer.init();\n  \n  // Also expose for manual use\n  return utmTransfer;\n}; ", "/**\n * TwentyNineNext - Core class for 29next client\n * \n * This is a streamlined version focused primarily on checkout functionality.\n */\n\nimport { ApiClient } from '../api/ApiClient.js';\nimport { Logger } from '../utils/Logger.js';\nimport { CheckoutPage } from '../managers/CheckoutManager.js';\nimport { CampaignHelper } from '../helpers/CampaignHelper.js';\nimport { StateManager } from '../managers/StateManager.js';\nimport { CartManager } from '../managers/CartManager.js';\nimport { SelectorManager } from '../managers/SelectorManager.js';\nimport { ToggleManager } from '../managers/ToggleManager.js';\nimport { DebugManager } from '../managers/DebugManager.js';\nimport { TimerManager } from '../managers/TimerManager.js';\nimport { DisplayManager } from '../managers/DisplayManager.js';\nimport { CartDisplayManager } from '../managers/CartDisplayManager.js';\nimport { AttributionManager } from '../managers/AttributionManager.js';\nimport { EventManager } from '../managers/EventManager.js';\nimport { TooltipManager } from '../managers/TooltipManager.js';\nimport { UpsellManager } from '../managers/UpsellManager.js';\nimport { initPBAccordion } from '../utils/PBAccordion.js';\nimport { initUtmTransfer } from '../utils/UtmTransfer.js';\n\nexport class TwentyNineNext {\n  #isInitialized = false;\n  #isCheckoutPage = false;\n  #campaignData = null;\n\n  constructor(options = {}) {\n    // Get Google Maps config from window.osConfig if available\n    const googleMapsConfig = window.osConfig?.googleMaps || {};\n    \n    this.options = {\n      debug: false,\n      autoInit: true,\n      googleMapsApiKey: googleMapsConfig.apiKey || 'YOUR_API_KEY_HERE',\n      googleMapsRegion: googleMapsConfig.region || 'US',\n      enableGoogleMapsAutocomplete: googleMapsConfig.enableAutocomplete !== false,\n      ...options\n    };\n    this.logger = new Logger(this.options.debug);\n    this.coreLogger = this.logger.createModuleLogger('CORE');\n    this.api = new ApiClient(this);\n    this.config = this.#loadConfig();\n    this.state = new StateManager(this);\n    this.attribution = new AttributionManager(this);\n    this.cart = new CartManager(this);\n    this.campaign = new CampaignHelper(this);\n    this.upsell = new UpsellManager(this);\n\n    // Unified event system\n    this.events = {\n      on: (event, callback) => this.on(event, callback),\n      once: (event, callback) => this.once(event, callback),\n      off: (event, callback) => this.off(event, callback),\n      trigger: (event, data) => this.triggerEvent(event, data),\n    };\n\n    if (this.options.autoInit) this.init();\n  }\n\n  // Event Listeners using DOM events\n  on(event, callback) {\n    const wrappedCallback = (e) => {\n      try {\n        callback(e.detail);\n      } catch (error) {\n        this.coreLogger.error(`Error in event callback for \"${event}\":`, error);\n      }\n    };\n    document.addEventListener(`os:${event}`, wrappedCallback);\n    this.coreLogger.debug(`Event listener registered for \"${event}\"`);\n    return this;\n  }\n\n  once(event, callback) {\n    const wrappedCallback = (e) => {\n      try {\n        callback(e.detail);\n      } catch (error) {\n        this.coreLogger.error(`Error in one-time event callback for \"${event}\":`, error);\n      }\n      document.removeEventListener(`os:${event}`, wrappedCallback);\n    };\n    document.addEventListener(`os:${event}`, wrappedCallback);\n    this.coreLogger.debug(`One-time event listener registered for \"${event}\"`);\n    return this;\n  }\n\n  off(event, callback) {\n    document.removeEventListener(`os:${event}`, callback);\n    return this;\n  }\n\n  #loadConfig() {\n    const config = { apiKey: null, campaignId: null, debug: this.options.debug };\n    const apiKeyMeta = document.querySelector('meta[name=\"os-api-key\"]');\n    config.apiKey = apiKeyMeta?.getAttribute('content') ?? null;\n    this.coreLogger.info(`API key: ${config.apiKey ? '✓ Set' : '✗ Not set'}`);\n\n    const campaignIdMeta = document.querySelector('meta[name=\"os-campaign-id\"]');\n    config.campaignId = campaignIdMeta?.getAttribute('content') ?? null;\n    this.coreLogger.info(`Campaign ID: ${config.campaignId ? '✓ Set' : '✗ Not set'}`);\n\n    const debugMeta = document.querySelector('meta[name=\"os-debug\"]');\n    if (debugMeta?.getAttribute('content') === 'true') {\n      config.debug = true;\n      this.logger.setDebug(true);\n      this.coreLogger.info('Debug mode: ✓ Enabled');\n    }\n    \n    // Initialize the spreedly configuration if present\n    this.#initSpreedlyConfig();\n    \n    return config;\n  }\n  \n  /**\n   * Initialize Spreedly configuration from global config\n   * This allows users to customize Spreedly iframe behavior\n   */\n  #initSpreedlyConfig() {\n    // Ensure osConfig exists\n    window.osConfig = window.osConfig || {};\n    \n    // If spreedlyConfig doesn't exist, create it with defaults\n    if (!window.osConfig.spreedlyConfig) {\n      this.coreLogger.debug('Initializing default Spreedly configuration');\n      window.osConfig.spreedlyConfig = {\n        fieldType: {\n          number: 'text',\n          cvv: 'text'\n        },\n        numberFormat: 'prettyFormat',\n        placeholder: {\n          number: 'Credit Card Number',\n          cvv: 'CVV *'\n        },\n        labels: {\n          number: 'Card Number',\n          cvv: 'CVV'\n        }\n        // Other properties will use defaults from SpreedlyManager\n      };\n    } else {\n      this.coreLogger.info('Found custom Spreedly configuration');\n    }\n  }\n\n  async #loadGoogleMapsApi() {\n    // Skip loading if autocomplete is disabled\n    if (!this.options.enableGoogleMapsAutocomplete) {\n      this.coreLogger.debug('Google Maps Autocomplete is disabled in configuration');\n      return;\n    }\n    \n    if (typeof google !== 'undefined' && typeof google.maps !== 'undefined') {\n      this.coreLogger.debug('Google Maps API already loaded');\n      return;\n    }\n\n    this.coreLogger.debug('Loading Google Maps API...');\n    return new Promise((resolve) => {\n      const script = document.createElement('script');\n      const regionParam = this.options.googleMapsRegion ? `&region=${this.options.googleMapsRegion}` : '';\n      script.src = `https://maps.googleapis.com/maps/api/js?key=${this.options.googleMapsApiKey}&libraries=places${regionParam}`;\n      script.async = true;\n      script.defer = true;\n      script.onload = () => {\n        this.coreLogger.debug('Google Maps API loaded successfully');\n        resolve();\n      };\n      script.onerror = () => {\n        this.coreLogger.error('Failed to load Google Maps API');\n        resolve(); // Resolve to continue initialization\n      };\n      document.head.appendChild(script);\n    });\n  }\n\n  async init() {\n    this.coreLogger.info('Initializing 29next client');\n    this.api.init();\n\n    // Ensure window.on29NextReady is an array\n    if (typeof window.on29NextReady !== 'undefined' && !Array.isArray(window.on29NextReady)) {\n      this.coreLogger.warn('window.on29NextReady is not an array, resetting it');\n      window.on29NextReady = [];\n    }\n\n    await this.#fetchCampaignData();\n    await this.#loadGoogleMapsApi();\n    this.#isCheckoutPage = this.#detectCheckoutPage();\n    if (this.#isCheckoutPage) this.#initCheckoutPage();\n\n    this.#initializeManagers();\n    this.#initUIUtilities();\n\n    this.#isInitialized = true;\n    this.triggerEvent('initialized', { client: this });\n    await this.#finalizeInitialization();\n  }\n\n  async #fetchCampaignData() {\n    try {\n      this.coreLogger.info('Fetching campaign data...');\n      this.#campaignData = await this.api.getCampaign();\n      this.#campaignData = this.#campaignData || { packages: [] }; // Ensure packages array\n      this.#campaignData.packages = this.#campaignData.packages || [];\n      this.campaignData = this.#campaignData;\n\n      this.coreLogger.info('Campaign data retrieved successfully');\n      window.osConfig = window.osConfig || {};\n      window.osConfig.campaign = this.#campaignData;\n      window.dataLayer = window.dataLayer || [];\n      this.triggerEvent('campaign.loaded', { campaign: this.#campaignData });\n    } catch (error) {\n      this.coreLogger.error('Failed to retrieve campaign data:', error);\n      this.#campaignData = {\n        name: 'Default Campaign',\n        packages: [],\n        currency: 'USD',\n        locale: 'en-US',\n      };\n      this.campaignData = this.#campaignData;\n    }\n  }\n\n  #initializeManagers() {\n    this.selector = new SelectorManager(this);\n    this.toggle = new ToggleManager(this);\n    this.timer = new TimerManager(this);\n    this.display = new DisplayManager(this);\n    this.eventManager = new EventManager(this);\n    this.tooltip = new TooltipManager(this);\n\n    if (\n      this.#isCheckoutPage ||\n      document.querySelector('[data-os-cart=\"line-display\"]') ||\n      document.querySelector('[os-cart=\"checkout-summary\"]') ||\n      document.querySelector('[data-os-cart-summary=\"grand-total\"]')\n    ) {\n      this.coreLogger.info('Cart display elements detected, initializing CartDisplayManager');\n      this.cartDisplay = new CartDisplayManager(this);\n    }\n\n    this.debug = new DebugManager(this);\n\n    // Extend events with EventManager methods\n    Object.assign(this.events, {\n      emit: (event, data) => this.triggerEvent(event, data),\n      viewItemList: (data) => this.eventManager.viewItemList(data || this.#campaignData),\n      viewItem: (packageData) => this.eventManager.viewItem(packageData),\n      addToCart: (cartData) => this.eventManager.addToCart(cartData),\n      beginCheckout: () => this.eventManager.beginCheckout(),\n      purchase: (orderData, force) => this.eventManager.purchase(orderData, force),\n      fireCustomEvent: (eventName, eventData) => this.eventManager.fireCustomEvent(eventName, eventData),\n    });\n  }\n\n  async #finalizeInitialization() {\n    this.events.viewItemList(this.#campaignData);\n    await new Promise((resolve) => setTimeout(resolve, 800)); // Single delay for rendering\n    this.#hidePreloader();\n  }\n\n  #hidePreloader() {\n    const preloader = document.querySelector('div[os-element=\"preloader\"]');\n    if (preloader) {\n      this.coreLogger.info('Hiding preloader element');\n      preloader.style.transition = 'opacity 0.5s ease';\n      preloader.style.opacity = '0';\n      preloader.style.pointerEvents = 'none';\n      this.coreLogger.debug('Preloader hidden');\n    }\n  }\n\n  #detectCheckoutPage() {\n    const pageTypeMeta = document.querySelector('meta[name=\"os-page-type\"]');\n    const pageType = pageTypeMeta?.getAttribute('content');\n    if (pageType === 'checkout' || (!pageType && document.querySelector('form[os-checkout=\"form\"]'))) {\n      this.coreLogger.info('Checkout page detected');\n      return true;\n    }\n    if (pageType === 'receipt') {\n      this.coreLogger.info('Receipt page detected');\n      this.#initReceiptPage();\n    }\n    if (pageType === 'upsell' || document.querySelector('[data-os-upsell]')) {\n      this.coreLogger.info('Upsell page detected');\n      this.#initUpsellPage();\n    }\n    return false;\n  }\n\n  #initCheckoutPage() {\n    this.checkout = new CheckoutPage(this.api, this.coreLogger, this);\n  }\n\n  #initReceiptPage() {\n    import('../components/checkout/ReceiptPage.js')\n      .then((module) => {\n        const ReceiptPage = module.ReceiptPage;\n        this.receipt = new ReceiptPage(this.api, this.coreLogger, this);\n        this.coreLogger.info('Receipt page initialized');\n\n        const refId = new URLSearchParams(window.location.search).get('ref_id');\n        if (refId) {\n          this.api.getOrder(refId)\n            .then((orderData) => {\n              if (orderData) this.triggerEvent('order.loaded', { order: orderData });\n            })\n            .catch((error) => this.coreLogger.error('Failed to load order data:', error));\n        }\n      })\n      .catch((error) => this.coreLogger.error('Failed to load ReceiptPage module:', error));\n  }\n\n  #initUpsellPage() {\n    this.coreLogger.info('Initializing upsell page');\n    \n    // Make sure the UpsellManager is initialized and available\n    if (!this.upsell) {\n      this.upsell = new UpsellManager(this);\n      this.coreLogger.info('UpsellManager initialized for upsell page');\n    }\n    \n    // Trigger upsell page events\n    this.triggerEvent('upsell.pageview', {\n      ref_id: new URLSearchParams(window.location.search).get('ref_id') || sessionStorage.getItem('order_ref_id')\n    });\n  }\n\n  #initUIUtilities() {\n    this.coreLogger.info('Initializing UI utilities');\n    try {\n      const accordion = initPBAccordion();\n      if (accordion) {\n        this.pbAccordion = accordion;\n        this.coreLogger.info('PBAccordion initialized');\n      }\n    } catch (error) {\n      this.coreLogger.error('Failed to initialize PBAccordion:', error);\n    }\n    try {\n      const utmTransfer = initUtmTransfer();\n      if (utmTransfer) {\n        this.utmTransfer = utmTransfer;\n        this.coreLogger.info('UTM parameter transfer initialized');\n      }\n    } catch (error) {\n      this.coreLogger.error('Failed to initialize UTM transfer:', error);\n    }\n  }\n\n  triggerEvent(eventName, detail = {}) {\n    this.coreLogger.debug(`Triggering event: ${eventName}`);\n    const eventData = { ...detail, timestamp: Date.now(), client: this };\n    const event = new CustomEvent(`os:${eventName}`, { bubbles: true, cancelable: true, detail: eventData });\n    document.dispatchEvent(event);\n    return event;\n  }\n\n  getCampaignData() {\n    return this.#campaignData;\n  }\n\n  get isInitialized() {\n    return this.#isInitialized;\n  }\n\n  get isCheckoutPage() {\n    return this.#isCheckoutPage;\n  }\n\n  debugTriggerViewItemList() {\n    console.log('🛠️ Manually triggering view_item_list event');\n    if (!this.#campaignData) {\n      console.error('❌ No campaign data available');\n      return { success: false, message: 'No campaign data' };\n    }\n    if (!this.events.viewItemList) {\n      console.error('❌ events.viewItemList not available');\n      return { success: false, message: 'Event manager not initialized' };\n    }\n    window.dataLayer = window.dataLayer || [];\n    window.dataLayer.push({ ecommerce: null });\n    this.events.viewItemList(this.#campaignData);\n    console.log('✅ view_item_list manually triggered');\n    return { success: true, message: 'view_item_list event triggered', campaignData: this.#campaignData };\n  }\n\n  isReady() {\n    return this.#isInitialized && this.#campaignData !== null && Array.isArray(this.#campaignData.packages);\n  }\n\n  onReady(callback) {\n    if (!callback || typeof callback !== 'function') return this;\n    if (this.isReady()) {\n      try {\n        callback(this);\n      } catch (error) {\n        this.coreLogger.error('Error in onReady callback:', error);\n      }\n    } else {\n      this.once('initialized', () => {\n        if (this.isReady()) callback(this);\n      });\n    }\n    return this;\n  }\n}"],
  "mappings": "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",
  "names": ["_apiClient", "_logger", "_app", "_initialized", "_debugMode", "_safeLog", "safeLog_fn", "_formatAddress", "formatAddress_fn", "_showError", "showError_fn", "_logger", "_logger", "_form", "_debugMode", "_app", "_logger", "_logger", "_app", "_form", "_debugMode", "_safeLog", "safeLog_fn", "orderData", "_app", "_logger", "_init", "init_fn", "_setupEventListeners", "setupEventListeners_fn", "_logger", "_init", "init_fn", "_logger", "_elements", "_init", "init_fn", "_logger", "_showError", "showError_fn", "_app", "_logger", "_init", "init_fn", "_apiClient", "_logger", "_form", "_app", "_setupEventListeners", "setupEventListeners_fn", "_handleSubmit", "handleSubmit_fn", "_app", "_logger", "_app", "_logger", "_app", "_logger", "price", "_app", "_logger", "_selectors", "_isDebugMode", "_app", "_logger", "_isDebugMode", "_addItemToCart", "addItemToCart_fn", "_removeItemFromCart", "removeItemFromCart_fn", "_app", "_logger", "_isDebugMode", "_init", "init_fn", "_app", "_logger", "_app", "_logger", "_app", "_logger", "_elements", "_config", "_app", "_logger", "_initialized", "_init", "init_fn", "_setupEventListeners", "setupEventListeners_fn", "_app", "_logger", "_debugMode", "_setupEventListeners", "setupEventListeners_fn", "platform", "platform", "max", "offset", "platform", "placements", "sides", "side", "placement", "overflow", "platform", "x", "y", "min", "max", "offset", "shift", "flip", "arrow", "computePosition", "_app", "_logger", "_initialized", "_init", "init_fn", "_setupEventListeners", "setupEventListeners_fn", "computePosition", "offset", "flip", "shift", "arrow", "_app", "_logger", "_stateManager", "_init", "init_fn", "arrow", "_isInitialized", "_loadConfig", "loadConfig_fn", "ReceiptPage"]
}
