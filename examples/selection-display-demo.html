<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selection Display Feature Demo - Campaign Cart v2</title>
    
    <!-- DNS Prefetch for performance -->
    <link rel="dns-prefetch" href="//campaigns.apps.29next.com">
    <link rel="dns-prefetch" href="//cdn-countries.muddy-wind-c7ca.workers.dev">

    <!-- Campaign Cart v2 SDK -->
    <script src="https://campaign-cart-v2.pages.dev/config.js"></script>
    <script src="https://campaign-cart-v2.pages.dev/loader.js"></script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .demo-header {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .demo-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2196f3;
        }
        
        /* Selector Styles */
        .os-cards__vertical {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .os-card {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        
        .os-card:hover {
            border-color: #2196f3;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.15);
        }
        
        .os-card.next-selected {
            border-color: #2196f3;
            background: #e3f2fd;
        }
        
        .os-card__content {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .radio-style-1 {
            width: 24px;
            height: 24px;
            border: 2px solid #ccc;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .next-selected .radio-style-1 {
            border-color: #2196f3;
        }
        
        .radio-inner {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #2196f3;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .next-selected .radio-inner {
            opacity: 1;
        }
        
        /* Price Summary Styles */
        .price-summary {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .pb-form-price__wrapper {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .pb-form-price__amount {
            font-size: 24px;
            font-weight: bold;
            color: #2196f3;
        }
        
        .pb-form-price__amount.pb--compare {
            text-decoration: line-through;
            color: #999;
            font-size: 20px;
            margin-right: 10px;
        }
        
        /* Selection Details */
        .selection-details {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .detail-item {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
        }
        
        .detail-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-size: 20px;
            font-weight: 600;
            color: #333;
        }
        
        /* Conditional Alerts */
        .alert-box {
            padding: 15px 20px;
            border-radius: 6px;
            margin-top: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .bundle-alert {
            background: #e3f2fd;
            color: #1565c0;
            border: 1px solid #bbdefb;
        }
        
        .savings-alert {
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #c8e6c9;
        }
        
        .tip-alert {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        /* Button Styles */
        .cta-button {
            width: 100%;
            padding: 18px 30px;
            font-size: 18px;
            font-weight: 600;
            background: #2196f3;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            transition: all 0.3s ease;
            margin-top: 20px;
        }
        
        .cta-button:hover {
            background: #1976d2;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }
        
        .price-bubble {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
        }
        
        .code-example {
            background: #2b2b2b;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin-top: 20px;
        }
        
        .code-example code {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }
        
        /* Hide elements initially that use conditional display */
        [data-next-show], [data-next-hide] {
            display: none;
        }
    </style>
</head>
<body>
    <div class="demo-header">
        <h1>Selection Display Feature Demo</h1>
        <p>This demo showcases the Selection Display Enhancer, which displays calculated values based on the currently selected package in a selector, rather than cart totals.</p>
    </div>

    <!-- Main Selector Section -->
    <div class="demo-section">
        <h2 class="section-title">1. Swap Mode Selector with Selection Display</h2>
        <p>Click any package below to see the selection display values update in real-time. In swap mode, clicking immediately updates the cart.</p>
        
        <div data-next-selector-id="drone-packages" data-next-cart-selector="" data-next-selection-mode="swap">
            <div class="os-cards__vertical">
                <!-- 3x Package -->
                <div role="button" data-next-selector-card="" data-next-package-id="4" data-next-quantity="3" class="os-card">
                    <div class="os-card__content">
                        <div class="radio-style-1">
                            <div class="radio-inner"></div>
                        </div>
                        <div style="flex: 1;">
                            <h3 style="margin: 0 0 5px 0;">3x Drone Bundle - BEST VALUE</h3>
                            <p style="margin: 0; color: #666;">Save 60% - Only $15.99 each</p>
                        </div>
                        <div style="text-align: right;">
                            <div style="text-decoration: line-through; color: #999;">$119.97</div>
                            <div style="font-size: 24px; font-weight: bold; color: #2196f3;">$47.97</div>
                        </div>
                    </div>
                </div>
                
                <!-- 2x Package -->
                <div role="button" data-next-selector-card="" data-next-package-id="3" data-next-quantity="2" data-next-selected="true" class="os-card">
                    <div class="os-card__content">
                        <div class="radio-style-1">
                            <div class="radio-inner"></div>
                        </div>
                        <div style="flex: 1;">
                            <h3 style="margin: 0 0 5px 0;">2x Drone Bundle</h3>
                            <p style="margin: 0; color: #666;">Save 55% - Only $17.99 each</p>
                        </div>
                        <div style="text-align: right;">
                            <div style="text-decoration: line-through; color: #999;">$79.98</div>
                            <div style="font-size: 24px; font-weight: bold; color: #2196f3;">$35.98</div>
                        </div>
                    </div>
                </div>
                
                <!-- 1x Package -->
                <div role="button" data-next-selector-card="" data-next-package-id="2" data-next-quantity="1" class="os-card">
                    <div class="os-card__content">
                        <div class="radio-style-1">
                            <div class="radio-inner"></div>
                        </div>
                        <div style="flex: 1;">
                            <h3 style="margin: 0 0 5px 0;">1x Drone</h3>
                            <p style="margin: 0; color: #666;">Save 50% - $19.99</p>
                        </div>
                        <div style="text-align: right;">
                            <div style="text-decoration: line-through; color: #999;">$39.99</div>
                            <div style="font-size: 24px; font-weight: bold; color: #2196f3;">$19.99</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Selection-based Price Summary -->
        <div class="price-summary">
            <div class="pb-form-price__wrapper">
                <div class="pb-form-price__flex pb--left">
                    <div class="pb-form-price__label pb-savings" style="background: #4caf50; color: white; padding: 5px 15px; border-radius: 20px;">
                        <span data-next-display="selection.drone-packages.savingsPercentage">55%</span> OFF
                    </div>
                </div>
                <div class="pb-form-price__flex pb--right" style="display: flex; align-items: center;">
                    <div data-next-display="selection.drone-packages.compareTotal" class="pb-form-price__amount pb--compare">$79.98</div>
                    <div data-next-display="selection.drone-packages.total" class="pb-form-price__amount">$35.98</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Selection Details Section -->
    <div class="demo-section">
        <h2 class="section-title">2. Selection Details Display</h2>
        <p>These values update based on the currently selected package:</p>
        
        <div class="selection-details">
            <div class="selection-grid">
                <div class="detail-item">
                    <div class="detail-label">Selected Package</div>
                    <div class="detail-value" data-next-display="selection.drone-packages.name">2x Drone</div>
                </div>
                
                <div class="detail-item">
                    <div class="detail-label">Quantity</div>
                    <div class="detail-value"><span data-next-display="selection.drone-packages.totalUnits" data-format="number">2</span> units</div>
                </div>
                
                <div class="detail-item">
                    <div class="detail-label">Price per Unit</div>
                    <div class="detail-value" data-next-display="selection.drone-packages.unitPrice">$17.99</div>
                </div>
                
                <div class="detail-item">
                    <div class="detail-label">Total Savings</div>
                    <div class="detail-value" data-next-display="selection.drone-packages.savings">$22.00</div>
                </div>
            </div>
            
            <!-- Additional calculated fields -->
            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
                <h4>Calculated Fields:</h4>
                <p>💰 <strong>Monthly Payment:</strong> Just <span data-next-display="selection.drone-packages.monthlyPrice" data-format="currency">$3.00</span>/month for 12 months</p>
                <p>📅 <strong>Daily Cost:</strong> Only <span data-next-display="selection.drone-packages.pricePerDay" data-format="currency">$0.10</span> per day!</p>
                <p>👥 <strong>Split 4 ways:</strong> <span data-next-display="selection.drone-packages.total/4" data-format="currency">$9.00</span> per person</p>
                <p>📊 <strong>Tax Estimate (10%):</strong> <span data-next-display="selection.drone-packages.total*0.1" data-format="currency">$3.60</span></p>
            </div>
        </div>
    </div>

    <!-- Conditional Display Section -->
    <div class="demo-section">
        <h2 class="section-title">3. Conditional Display Based on Selection</h2>
        <p>These alerts show/hide based on the current selection properties. Try selecting different packages to see them change!</p>
        
        <!-- Always show selection status -->
        <div class="alert-box" style="background: #e3f2fd; color: #1565c0; border: 1px solid #bbdefb;">
            <span style="font-size: 24px;">📦</span>
            <div>
                <strong>Currently Selected:</strong> 
                <span data-next-display="selection.drone-packages.name">1x Drone</span>
                <span data-next-show="selection.drone-packages.hasSavings" style="margin-left: 10px;">
                    (Save <span data-next-display="selection.drone-packages.savingsPercentage">50%</span>)
                </span>
            </div>
        </div>
        
        <!-- Bundle alert - shows when 2+ units selected -->
        <div data-next-show="selection.drone-packages.isBundle" class="alert-box bundle-alert">
            <span style="font-size: 24px;">🎁</span>
            <div>
                <strong>Bundle Deal!</strong> You're getting 
                <span data-next-display="selection.drone-packages.totalUnits" data-format="number">2</span> units 
                for just <span data-next-display="selection.drone-packages.unitPrice">$17.99</span> each!
            </div>
        </div>
        
        <!-- Single unit tip - shows when 1 unit selected -->
        <div data-next-show="selection.drone-packages.isSingleUnit" class="alert-box tip-alert">
            <span style="font-size: 24px;">💡</span>
            <div>
                <strong>Tip:</strong> Save more with our multi-packs! The 3x bundle saves you 60%!
            </div>
        </div>
        
        <!-- Savings tiers -->
        <div data-next-show="selection.drone-packages.savingsPercentage >= 60" class="alert-box savings-alert">
            <span style="font-size: 24px;">🎉</span>
            <div>
                <strong>Maximum Savings!</strong> You're getting our best deal - 
                <span data-next-display="selection.drone-packages.savingsPercentage">60%</span> OFF!
            </div>
        </div>
        
        <div data-next-show="selection.drone-packages.savingsPercentage >= 55" data-next-hide="selection.drone-packages.savingsPercentage >= 60" class="alert-box savings-alert">
            <span style="font-size: 24px;">💰</span>
            <div>
                <strong>Great Deal!</strong> You're saving 
                <span data-next-display="selection.drone-packages.savingsPercentage">55%</span>!
            </div>
        </div>
        
        <!-- Free shipping for 2+ units -->
        <div data-next-show="selection.drone-packages.totalUnits >= 2" class="alert-box bundle-alert">
            <span style="font-size: 24px;">🚚</span>
            <div>
                <strong>Free Shipping!</strong> Included on all multi-packs
            </div>
        </div>
        
        <!-- Show package comparison -->
        <div style="margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 8px;">
            <strong>Selection Comparison:</strong>
            <table style="width: 100%; margin-top: 10px;">
                <tr>
                    <td>Regular Price:</td>
                    <td style="text-align: right;"><span data-next-display="selection.drone-packages.compareTotal">$39.99</span></td>
                </tr>
                <tr>
                    <td>Your Price:</td>
                    <td style="text-align: right; color: #2196f3; font-weight: bold;"><span data-next-display="selection.drone-packages.total">$19.99</span></td>
                </tr>
                <tr data-next-show="selection.drone-packages.hasSavings" style="border-top: 1px solid #ddd;">
                    <td><strong>You Save:</strong></td>
                    <td style="text-align: right; color: #4caf50; font-weight: bold;">
                        <span data-next-display="selection.drone-packages.savings">$20.00</span>
                        (<span data-next-display="selection.drone-packages.savingsPercentage">50%</span>)
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <!-- CTA Button Section -->
    <div class="demo-section">
        <h2 class="section-title">4. Dynamic Button with Selection Pricing</h2>
        <p>The button price updates based on the current selection:</p>
        
        <button class="cta-button">
            <span>Add to Cart</span>
            <div class="price-bubble">
                <span data-next-display="selection.drone-packages.compareTotal" data-next-show="selection.drone-packages.hasSavings" style="text-decoration: line-through; opacity: 0.7;">$79.98</span>
                <span data-next-display="selection.drone-packages.total" style="font-size: 20px; font-weight: bold;">$35.98</span>
            </div>
        </button>
        
        <!-- Alternative button style -->
        <button class="cta-button" style="background: #4caf50; margin-top: 10px;">
            <span>Buy Now & Save</span>
            <span data-next-display="selection.drone-packages.savingsPercentage">55%</span>
            <span>→</span>
            <span data-next-display="selection.drone-packages.total" style="font-weight: bold;">$35.98</span>
        </button>
    </div>

    <!-- Code Examples -->
    <div class="demo-section">
        <h2 class="section-title">5. Code Examples</h2>
        
        <h3>Basic Selection Display</h3>
        <div class="code-example">
            <code><pre>&lt;!-- Display current selection values --&gt;
&lt;span data-next-display="selection.drone-packages.total"&gt;$35.98&lt;/span&gt;
&lt;span data-next-display="selection.drone-packages.name"&gt;2x Drone&lt;/span&gt;
&lt;span data-next-display="selection.drone-packages.unitPrice"&gt;$17.99&lt;/span&gt;
&lt;span data-next-display="selection.drone-packages.savings"&gt;$22.00&lt;/span&gt;</pre></code>
        </div>

        <h3>Conditional Display</h3>
        <div class="code-example">
            <code><pre>&lt;!-- Show/hide based on selection properties --&gt;
&lt;div data-next-show="selection.drone-packages.hasSavings"&gt;
  You save &lt;span data-next-display="selection.drone-packages.savingsPercentage"&gt;55%&lt;/span&gt;!
&lt;/div&gt;

&lt;!-- Comparison conditions --&gt;
&lt;div data-next-show="selection.drone-packages.savings &gt; 20"&gt;
  Big savings alert!
&lt;/div&gt;</pre></code>
        </div>

        <h3>Calculated Fields</h3>
        <div class="code-example">
            <code><pre>&lt;!-- Mathematical expressions --&gt;
&lt;span data-next-display="selection.drone-packages.total*0.1"&gt;$3.60&lt;/span&gt; &lt;!-- 10% tax --&gt;
&lt;span data-next-display="selection.drone-packages.total/4"&gt;$9.00&lt;/span&gt; &lt;!-- Split 4 ways --&gt;
&lt;span data-next-display="selection.drone-packages.monthlyPrice"&gt;$3.00&lt;/span&gt; &lt;!-- Monthly --&gt;</pre></code>
        </div>

        <h3>Multiple Selectors</h3>
        <div class="code-example">
            <code><pre>&lt;!-- Reference different selectors by ID --&gt;
&lt;span data-next-display="selection.product-selector.name"&gt;Premium Drone&lt;/span&gt;
&lt;span data-next-display="selection.color-selector.name"&gt;Midnight Black&lt;/span&gt;
&lt;span data-next-display="selection.size-selector.name"&gt;Large&lt;/span&gt;</pre></code>
        </div>
    </div>

    <!-- Benefits Section -->
    <div class="demo-section">
        <h2 class="section-title">Key Benefits</h2>
        <ul style="line-height: 2;">
            <li>✅ <strong>Real-time Updates:</strong> Values update instantly when selection changes</li>
            <li>✅ <strong>No Cart Interference:</strong> Shows selection price, not cart total</li>
            <li>✅ <strong>Conditional Logic:</strong> Show/hide elements based on selection properties</li>
            <li>✅ <strong>Calculated Fields:</strong> Monthly prices, unit prices, custom calculations</li>
            <li>✅ <strong>Multiple Selectors:</strong> Works with multiple selectors on the same page</li>
            <li>✅ <strong>Clean Syntax:</strong> Simple, intuitive attribute-based API</li>
        </ul>
    </div>
</body>
</html>