<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout Review Example</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      max-width: 800px;
      margin: 2rem auto;
      padding: 0 1rem;
      line-height: 1.6;
    }

    .checkout-review {
      margin: 2rem 0;
      padding: 1.5rem;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #f9f9f9;
    }

    .checkout-review h2 {
      margin-top: 0;
      font-size: 1.5rem;
      color: #333;
    }

    .review-table {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 1rem;
    }

    .review-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: 1rem;
      background: white;
      border-radius: 4px;
      border: 1px solid #e0e0e0;
    }

    .review-cell {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .review-label {
      font-weight: 600;
      color: #333;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .review-value {
      color: #666;
      font-size: 1rem;
    }

    .review-change {
      color: #0066cc;
      text-decoration: none;
      font-size: 0.9rem;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      transition: background 0.2s;
    }

    .review-change:hover {
      background: #e6f2ff;
      text-decoration: underline;
    }

    /* Empty state styling */
    .next-review-empty {
      color: #999;
      font-style: italic;
    }

    /* Address formatting */
    address {
      font-style: normal;
      line-height: 1.5;
    }

    .test-buttons {
      margin: 2rem 0;
      padding: 1rem;
      background: #fff3cd;
      border: 1px solid #ffc107;
      border-radius: 4px;
    }

    .test-buttons h3 {
      margin-top: 0;
      color: #856404;
    }

    .test-buttons button {
      margin: 0.5rem 0.5rem 0 0;
      padding: 0.5rem 1rem;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    .test-buttons button:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>
  <h1>Checkout Review Example</h1>
  <p>This example shows how to display stored checkout data using the CheckoutReviewEnhancer.</p>

  <!-- Test Buttons to Simulate Data -->
  <div class="test-buttons">
    <h3>Test Controls</h3>
    <p>Click a button to populate the checkout store with sample data:</p>
    <button onclick="populateUSData()">US Customer</button>
    <button onclick="populateBRData()">Brazil Customer</button>
    <button onclick="populateCAData()">Canada Customer</button>
    <button onclick="clearData()">Clear Data</button>
  </div>

  <!-- Checkout Review Section -->
  <section aria-label="Review" class="checkout-review" data-next-enhancer="checkout-review">
    <h2>Review your information</h2>

    <div class="review-table">
      <!-- Contact -->
      <div class="review-row">
        <div class="review-cell">
          <div class="review-label">Contact</div>
          <div class="review-value"
               data-next-checkout-review="email"
               data-next-fallback="No email provided"></div>
        </div>
        <div class="review-cell">
          <a href="information.html" class="review-change">Change</a>
        </div>
      </div>

      <!-- Full Name -->
      <div class="review-row">
        <div class="review-cell">
          <div class="review-label">Name</div>
          <div class="review-value"
               data-next-checkout-review="fname"
               data-next-format="name"
               data-next-fallback="No name provided"></div>
        </div>
        <div class="review-cell">
          <a href="information.html" class="review-change">Change</a>
        </div>
      </div>

      <!-- Shipping Address -->
      <div class="review-row">
        <div class="review-cell">
          <div class="review-label">Ship to</div>
          <address class="review-value"
                   data-next-checkout-review="address1"
                   data-next-format="address"
                   data-next-fallback="No address provided"></address>
        </div>
        <div class="review-cell">
          <a href="information.html" class="review-change">Change</a>
        </div>
      </div>

      <!-- Phone -->
      <div class="review-row">
        <div class="review-cell">
          <div class="review-label">Phone</div>
          <div class="review-value"
               data-next-checkout-review="phone"
               data-next-format="phone"
               data-next-fallback="No phone provided"></div>
        </div>
        <div class="review-cell">
          <a href="information.html" class="review-change">Change</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Include Next SDK -->
  <script src="../dist/index.umd.js"></script>

  <script>
    // Initialize Next SDK
    window.Next.init({
      apiKey: 'your-api-key',
      campaignId: 'your-campaign-id'
    }).then((sdk) => {
      console.log('Next SDK initialized');
      console.log('CheckoutReviewEnhancer registered automatically');
    });

    // Test Data Functions
    function populateUSData() {
      const checkoutStore = window.Next.stores.checkout;
      checkoutStore.getState().updateFormData({
        email: 'john.doe@example.com',
        fname: 'John',
        lname: 'Doe',
        phone: '+14805551234',
        address1: '1949 East Camelback Road',
        address2: 'Suite 100',
        city: 'Phoenix',
        province: 'AZ',
        postal: '85016',
        country: 'US'
      });
      console.log('US customer data populated');
    }

    function populateBRData() {
      const checkoutStore = window.Next.stores.checkout;
      checkoutStore.getState().updateFormData({
        email: 'felipe@example.com',
        fname: 'Felipe',
        lname: 'Silva',
        phone: '+5511999887766',
        address1: 'Rua das Flores, 123',
        address2: 'Apto 45',
        city: 'SÃ£o Paulo',
        province: 'SP',
        postal: '01234-567',
        country: 'BR'
      });
      console.log('Brazil customer data populated');
    }

    function populateCAData() {
      const checkoutStore = window.Next.stores.checkout;
      checkoutStore.getState().updateFormData({
        email: 'maple@example.com',
        fname: 'Sarah',
        lname: 'Johnson',
        phone: '+14165551234',
        address1: '123 Main Street',
        address2: '',
        city: 'Toronto',
        province: 'ON',
        postal: 'M5H 2N2',
        country: 'CA'
      });
      console.log('Canada customer data populated');
    }

    function clearData() {
      const checkoutStore = window.Next.stores.checkout;
      checkoutStore.getState().reset();
      console.log('Checkout data cleared');
    }
  </script>
</body>
</html>
