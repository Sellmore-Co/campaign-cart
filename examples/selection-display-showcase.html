<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selection Display Feature Showcase</title>
    <style>
        /* Your existing styles */
        .price-summary { margin-top: 20px; }
        .selection-details { margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 8px; }
        .alert-box { padding: 10px; border-radius: 4px; margin-top: 10px; }
        .bundle-alert { background: #e3f2fd; }
        .tip-alert { background: #fff3cd; }
        .savings-alert { background: #d4edda; }
    </style>
</head>
<body>
    <!-- Your existing selector structure -->
    <div data-next-selector-id="drone-packages" data-next-cart-selector="" data-next-selection-mode="swap">
        <!-- Selector cards here... -->
    </div>

    <!-- UPDATED PRICE SUMMARY -->
    <div pb-component="price-summary" class="price-summary">
        <div class="pb-form-price__wrapper">
            <div class="pb-form-price__flex pb--left">
                <div pb-element="savings" class="pb-form-price__label pb-savings">
                    <!-- Remove hardcoded values, let selection display update these -->
                    <span data-next-display="selection.drone-packages.savingsPercentage">55%</span> OFF
                </div>
            </div>
            <div class="pb-form-price__flex pb--right">
                <!-- These will update based on current selection -->
                <div data-next-display="selection.drone-packages.compareTotal" class="pb-form-price__amount pb--compare">$79.98</div>
                <div data-next-display="selection.drone-packages.total" class="pb-form-price__amount">$35.98</div>
            </div>
        </div>
        
        <!-- NEW: Shipping context display -->
        <div style="margin-top: 10px; text-align: right;">
            <div data-next-shipping-id="1">
                <span data-next-show="shipping.isFree" style="color: green;">‚úì FREE Shipping</span>
            </div>
            <div data-next-shipping-id="2">
                <span data-next-hide="shipping.isFree" style="color: #666;">+ <span data-next-display="shipping.cost">$12.99</span> shipping</span>
            </div>
        </div>
    </div>

    <!-- NEW: Selection Details Section -->
    <div class="selection-details">
        <h4>Current Selection Details:</h4>
        
        <!-- Display selected package info -->
        <p><strong>Selected Package:</strong> 
            <span data-next-display="selection.drone-packages.name">2x Drone</span>
        </p>
        
        <p><strong>Quantity:</strong> 
            <span data-next-display="selection.drone-packages.totalUnits">2</span> units
        </p>
        
        <p><strong>Price per unit:</strong> 
            <span data-next-display="selection.drone-packages.unitPrice">$17.99</span>
        </p>
        
        <p><strong>Total Savings:</strong> 
            <span data-next-display="selection.drone-packages.savings">$22.00</span>
            (<span data-next-display="selection.drone-packages.savingsPercentage">55%</span>)
        </p>
        
        <!-- Monthly price calculation -->
        <p><strong>Or pay just:</strong> 
            <span data-next-display="selection.drone-packages.monthlyPrice">$3.00</span>/month for 12 months
        </p>
    </div>

    <!-- NEW: Conditional Messages based on Selection -->
    <div class="conditional-messages">
        <!-- Show when bundle is selected -->
        <div data-next-show="selection.drone-packages.isBundle" class="alert-box bundle-alert">
            <strong>üéÅ Bundle Deal!</strong> 
            You're getting <span data-next-display="selection.drone-packages.totalUnits">2</span> units 
            for just <span data-next-display="selection.drone-packages.unitPrice">$17.99</span> each!
        </div>
        
        <!-- Show when single unit selected -->
        <div data-next-show="selection.drone-packages.isSingleUnit" class="alert-box tip-alert">
            <strong>üí° Tip:</strong> Save more with our multi-packs!
        </div>
        
        <!-- Show when savings exceed $20 -->
        <div data-next-show="selection.drone-packages.savings > 20" class="alert-box savings-alert">
            üéâ <strong>Huge Savings!</strong> You're saving 
            <span data-next-display="selection.drone-packages.savings">$22.00</span>!
        </div>
        
        <!-- Show free shipping for bundles -->
        <div data-next-show="selection.drone-packages.totalUnits >= 2" class="alert-box bundle-alert">
            ‚úì Free shipping included on multi-packs!
        </div>
    </div>

    <!-- NEW: Button with Selection-based Pricing -->
    <button class="add-to-cart-btn" style="margin-top: 20px; padding: 15px 30px; font-size: 18px; background: #2196f3; color: white; border: none; border-radius: 4px; cursor: pointer; width: 100%;">
        <span>Add to Cart</span>
        <span style="margin-left: 10px;">-</span>
        <span data-next-display="selection.drone-packages.total" style="font-weight: bold; margin-left: 10px;">$35.98</span>
        
        <!-- Show compare price if there are savings -->
        <span data-next-show="selection.drone-packages.hasSavings" style="text-decoration: line-through; opacity: 0.7; margin-left: 10px;">
            <span data-next-display="selection.drone-packages.compareTotal">$79.98</span>
        </span>
    </button>

    <!-- NEW: Code Example Update -->
    <div class="code-example" style="margin-top: 30px;">
        <h4>Updated Code Example:</h4>
        <pre><code><!-- Selection Display Features -->

<!-- 1. Display values from current selection -->
<span data-next-display="selection.drone-packages.total">$35.98</span>
<span data-next-display="selection.drone-packages.savings">$22.00</span>
<span data-next-display="selection.drone-packages.unitPrice">$17.99</span>

<!-- 2. Conditional display based on selection -->
<div data-next-show="selection.drone-packages.hasSavings">
  You save <span data-next-display="selection.drone-packages.savingsPercentage">55%</span>!
</div>

<!-- 3. Comparison conditions -->
<div data-next-show="selection.drone-packages.savings > 20">
  Big savings alert!
</div>

<!-- 4. Bundle detection -->
<div data-next-show="selection.drone-packages.isBundle">
  Bundle pricing applied!
</div>

<!-- 5. Multiple selectors on same page -->
<span data-next-display="selection.color-selector.name">Red</span>
<span data-next-display="selection.size-selector.name">Large</span>

<!-- 6. NEW: Shipping context display -->
<div data-next-shipping-id="1">
  <span data-next-show="shipping.isFree">FREE SHIPPING!</span>
  <span data-next-hide="shipping.isFree">
    Shipping: <span data-next-display="shipping.cost">$0.00</span>
  </span>
</div></code></pre>
    </div>

    <!-- Additional Examples Section -->
    <div class="more-examples" style="margin-top: 30px; padding: 20px; background: #f9f9f9; border-radius: 8px;">
        <h4>More Selection Display Examples:</h4>
        
        <!-- Custom calculations -->
        <p><strong>10% Tax Estimate:</strong> 
            <span data-next-display="selection.drone-packages.total*0.1">$3.60</span>
        </p>
        
        <!-- Price split calculation -->
        <p><strong>Split 4 ways:</strong> 
            <span data-next-display="selection.drone-packages.total/4">$9.00</span> each
        </p>
        
        <!-- Daily cost -->
        <p><strong>That's only:</strong> 
            <span data-next-display="selection.drone-packages.pricePerDay">$0.10</span> per day!
        </p>
    </div>
</body>
</html>